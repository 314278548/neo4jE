!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Neo4jE=e():t.Neo4jE=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=139)}([function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.newError=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"N/A";return new c(t,e)},e.PROTOCOL_ERROR=e.SESSION_EXPIRED=e.SERVICE_UNAVAILABLE=e.Neo4jError=void 0;var i=r(n(1)),o=r(n(7)),a=r(n(4)),u=r(n(8)),s=r(n(234));e.SERVICE_UNAVAILABLE="ServiceUnavailable";e.SESSION_EXPIRED="SessionExpired";e.PROTOCOL_ERROR="ProtocolError";var c=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"N/A";return(0,i.default)(this,e),(n=(0,o.default)(this,(0,a.default)(e).call(this,t))).message=t,n.code=r,n.name="Neo4jError",n}return(0,u.default)(e,t),e}((0,s.default)(Error));e.Neo4jError=c},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(9),i=n(38),o=n(18),a=n(66),u=n(67),s=n(91),c=i("wks"),l=r.Symbol,f=s?l:a;t.exports=function(t){return o(c,t)||(u&&o(l,t)?c[t]=l[t]:c[t]=f("Symbol."+t)),c[t]}},function(t,e,n){var r=n(24),i=n(18),o=n(76),a=n(25).f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},function(t,e,n){var r=n(40),i=n(114);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e,n){var r=n(77);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||Function("return this")()}).call(this,n(86))},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.isEmptyObjectOrNull=function(t){if(null===t)return!0;if(!a(t))return!1;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},e.isObject=a,e.isString=s,e.assertObject=function(t,e){if(!a(t))throw new TypeError(e+" expected to be an object but was: "+JSON.stringify(t));return t},e.assertString=u,e.assertNumber=function(t,e){if("number"!=typeof t)throw new TypeError(e+" expected to be a number but was: "+JSON.stringify(t));return t},e.assertNumberOrInteger=function(t,e){if("number"!=typeof t&&!(0,o.isInt)(t))throw new TypeError(e+" expected to be either a number or an Integer object but was: "+JSON.stringify(t));return t},e.assertValidDate=function(t,e){if("[object Date]"!==Object.prototype.toString.call(t))throw new TypeError(e+" expected to be a standard JavaScript Date but was: "+JSON.stringify(t));if(Number.isNaN(t.getTime()))throw new TypeError(e+" expected to be valid JavaScript Date but its time was NaN: "+JSON.stringify(t));return t},e.validateStatementAndParameters=function(t,e){var n=t,r=e||{};"object"===(0,i.default)(t)&&t.text&&(n=t.text,r=t.parameters||{});return function(t){if(u(t,"Cypher statement"),0===t.trim().length)throw new TypeError("Cypher statement is expected to be a non-empty string.")}(n),function(t){if(!a(t)){var e=t.constructor?" "+t.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(e," ").concat(t))}}(r),{query:n,params:r}},e.ENCRYPTION_OFF=e.ENCRYPTION_ON=void 0;var i=r(n(40)),o=n(20);e.ENCRYPTION_ON="ENCRYPTION_ON";function a(t){return"object"===(0,i.default)(t)&&!Array.isArray(t)&&null!==t}function u(t,e){if(!s(t))throw new TypeError(e+" expected to be string but was: "+JSON.stringify(t));return t}function s(t){return"[object String]"===Object.prototype.toString.call(t)}e.ENCRYPTION_OFF="ENCRYPTION_OFF"},function(t,e,n){"use strict";var r=n(9),i=n(61).f,o=n(89),a=n(24),u=n(47),s=n(22),c=n(18),l=function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var n,f,h,d,v,p,_,y,g=t.target,m=t.global,b=t.stat,w=t.proto,k=m?r:b?r[g]:(r[g]||{}).prototype,E=m?a:a[g]||(a[g]={}),S=E.prototype;for(h in e)n=!o(m?h:g+(b?".":"#")+h,t.forced)&&k&&c(k,h),v=E[h],n&&(p=t.noTargetGet?(y=i(k,h))&&y.value:k[h]),d=n&&p?p:e[h],n&&typeof v==typeof d||(_=t.bind&&n?u(d,r):t.wrap&&n?l(d):w&&"function"==typeof d?u(Function.call,d):d,(t.sham||d&&d.sham||v&&v.sham)&&s(_,"sham",!0),E[h]=_,w&&(c(a,f=g+"Prototype")||s(a,f,{}),a[f][h]=d,t.real&&S&&!S[h]&&s(S,h,d)))}},function(t,e,n){var r=n(40);function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}t.exports=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==r(t)&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var u=o?Object.getOwnPropertyDescriptor(t,a):null;u&&(u.get||u.set)?Object.defineProperty(n,a,u):n[a]=t[a]}return n.default=t,e&&e.set(t,n),n}},function(t,e,n){t.exports=n(184)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){var r=n(113);t.exports=function(t,e,n){return e in t?r(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";var r=n(12);Object.defineProperty(e,"__esModule",{value:!0}),e.v1=e.default=void 0;var i=r(n(233));e.v1=i;var o=i;e.default=o},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(15);t.exports=function(t){if(!r(t))throw TypeError(String(t)+" is not an object");return t}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=void 0;var i=r(n(1)),o=r(n(2)),a=n(3),u=function(){function t(e,n){(0,i.default)(this,t),this.low=0|e,this.high=0|n}return(0,o.default)(t,[{key:"inSafeRange",value:function(){return this.greaterThanOrEqual(t.MIN_SAFE_VALUE)&&this.lessThanOrEqual(t.MAX_SAFE_VALUE)}},{key:"toInt",value:function(){return this.low}},{key:"toNumber",value:function(){return this.high*c+(this.low>>>0)}},{key:"toNumberOrInfinity",value:function(){return this.lessThan(t.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(t.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()}},{key:"toString",value:function(e){if((e=e||10)<2||e>36)throw RangeError("radix out of range: "+e);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(t.MIN_VALUE)){var r=t.fromNumber(e),i=this.div(r);return n=i.multiply(r).subtract(this),i.toString(e)+n.toInt().toString(e)}return"-"+this.negate().toString(e)}var o=t.fromNumber(Math.pow(e,6));n=this;for(var a="";;){var u=n.div(o),s=(n.subtract(u.multiply(o)).toInt()>>>0).toString(e);if((n=u).isZero())return s+a;for(;s.length<6;)s="0"+s;a=""+s+a}}},{key:"getHighBits",value:function(){return this.high}},{key:"getLowBits",value:function(){return this.low}},{key:"getNumBitsAbs",value:function(){if(this.isNegative())return this.equals(t.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high?this.high:this.low,n=31;n>0&&0==(e&1<<n);n--);return 0!==this.high?n+33:n+1}},{key:"isZero",value:function(){return 0===this.high&&0===this.low}},{key:"isNegative",value:function(){return this.high<0}},{key:"isPositive",value:function(){return this.high>=0}},{key:"isOdd",value:function(){return 1==(1&this.low)}},{key:"isEven",value:function(){return 0==(1&this.low)}},{key:"equals",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),this.high===e.high&&this.low===e.low}},{key:"notEquals",value:function(t){return!this.equals(t)}},{key:"lessThan",value:function(t){return this.compare(t)<0}},{key:"lessThanOrEqual",value:function(t){return this.compare(t)<=0}},{key:"greaterThan",value:function(t){return this.compare(t)>0}},{key:"greaterThanOrEqual",value:function(t){return this.compare(t)>=0}},{key:"compare",value:function(e){if(t.isInteger(e)||(e=t.fromValue(e)),this.equals(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.subtract(e).isNegative()?-1:1}},{key:"negate",value:function(){return this.equals(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}},{key:"add",value:function(e){t.isInteger(e)||(e=t.fromValue(e));var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,u=65535&e.high,s=e.low>>>16,c=0,l=0,f=0,h=0;return f+=(h+=o+(65535&e.low))>>>16,h&=65535,l+=(f+=i+s)>>>16,f&=65535,c+=(l+=r+u)>>>16,l&=65535,c+=n+a,c&=65535,t.fromBits(f<<16|h,c<<16|l)}},{key:"subtract",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),this.add(e.negate())}},{key:"multiply",value:function(e){if(this.isZero())return t.ZERO;if(t.isInteger(e)||(e=t.fromValue(e)),e.isZero())return t.ZERO;if(this.equals(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.equals(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(f)&&e.lessThan(f))return t.fromNumber(this.toNumber()*e.toNumber());var n=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,u=65535&e.high,s=e.low>>>16,c=65535&e.low,l=0,h=0,d=0,v=0;return d+=(v+=o*c)>>>16,v&=65535,h+=(d+=i*c)>>>16,d&=65535,h+=(d+=o*s)>>>16,d&=65535,l+=(h+=r*c)>>>16,h&=65535,l+=(h+=i*s)>>>16,h&=65535,l+=(h+=o*u)>>>16,h&=65535,l+=n*c+r*s+i*u+o*a,l&=65535,t.fromBits(d<<16|v,l<<16|h)}},{key:"div",value:function(e){if(t.isInteger(e)||(e=t.fromValue(e)),e.isZero())throw(0,a.newError)("division by zero");if(this.isZero())return t.ZERO;var n,r,i;if(this.equals(t.MIN_VALUE))return e.equals(t.ONE)||e.equals(t.NEG_ONE)?t.MIN_VALUE:e.equals(t.MIN_VALUE)?t.ONE:(n=this.shiftRight(1).div(e).shiftLeft(1)).equals(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(r=this.subtract(e.multiply(n)),i=n.add(r.div(e)));if(e.equals(t.MIN_VALUE))return t.ZERO;if(this.isNegative())return e.isNegative()?this.negate().div(e.negate()):this.negate().div(e).negate();if(e.isNegative())return this.div(e.negate()).negate();for(i=t.ZERO,r=this;r.greaterThanOrEqual(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),u=o<=48?1:Math.pow(2,o-48),s=t.fromNumber(n),c=s.multiply(e);c.isNegative()||c.greaterThan(r);)n-=u,c=(s=t.fromNumber(n)).multiply(e);s.isZero()&&(s=t.ONE),i=i.add(s),r=r.subtract(c)}return i}},{key:"modulo",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),this.subtract(this.div(e).multiply(e))}},{key:"not",value:function(){return t.fromBits(~this.low,~this.high)}},{key:"and",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high)}},{key:"or",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high)}},{key:"xor",value:function(e){return t.isInteger(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high)}},{key:"shiftLeft",value:function(e){return t.isInteger(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):t.fromBits(0,this.low<<e-32)}},{key:"shiftRight",value:function(e){return t.isInteger(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e):t.fromBits(this.high>>e-32,this.high>=0?0:-1)}}]),t}();u.__isInteger__=!0,Object.defineProperty(u.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1}),u.isInteger=function(t){return!0===(t&&t.__isInteger__)};var s={};u.fromInt=function(t){var e,n;return(t|=0)>=-128&&t<128&&(n=s[t])?n:(e=new u(t,t<0?-1:0,!1),t>=-128&&t<128&&(s[t]=e),e)},u.fromNumber=function(t){return isNaN(t)||!isFinite(t)?u.ZERO:t<=-l?u.MIN_VALUE:t+1>=l?u.MAX_VALUE:t<0?u.fromNumber(-t).negate():new u(t%c|0,t/c|0)},u.fromBits=function(t,e){return new u(t,e)},u.fromString=function(t,e){if(0===t.length)throw(0,a.newError)("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return u.ZERO;if((e=e||10)<2||e>36)throw(0,a.newError)("radix out of range: "+e);var n;if((n=t.indexOf("-"))>0)throw(0,a.newError)('number format error: interior "-" character: '+t);if(0===n)return u.fromString(t.substring(1),e).negate();for(var r=u.fromNumber(Math.pow(e,8)),i=u.ZERO,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),c=parseInt(t.substring(o,o+s),e);if(s<8){var l=u.fromNumber(Math.pow(e,s));i=i.multiply(l).add(u.fromNumber(c))}else i=(i=i.multiply(r)).add(u.fromNumber(c))}return i},u.fromValue=function(t){return t instanceof u?t:"number"==typeof t?u.fromNumber(t):"string"==typeof t?u.fromString(t):new u(t.low,t.high)},u.toNumber=function(t){return u.fromValue(t).toNumber()},u.toString=function(t,e){return u.fromValue(t).toString(e)},u.inSafeRange=function(t){return u.fromValue(t).inSafeRange()};var c=4294967296,l=c*c/2,f=u.fromInt(1<<24);u.ZERO=u.fromInt(0),u.ONE=u.fromInt(1),u.NEG_ONE=u.fromInt(-1),u.MAX_VALUE=u.fromBits(-1,2147483647,!1),u.MIN_VALUE=u.fromBits(0,-2147483648,!1),u.MIN_SAFE_VALUE=u.fromBits(1,-2097152),u.MAX_SAFE_VALUE=u.fromBits(-1,2097151);var h=u.fromValue;e.int=h;var d=u.isInteger;e.isInt=d;var v=u.inSafeRange;e.inSafeRange=v;var p=u.toNumber;e.toNumber=p;var _=u.toString;e.toString=_;var y=u;e.default=y},function(t,e,n){var r=n(14);t.exports=!r((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(21),i=n(25),o=n(36);t.exports=r?function(t,e,n){return i.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=n(220)},function(t,e){t.exports={}},function(t,e,n){var r=n(21),i=n(88),o=n(19),a=n(46),u=Object.defineProperty;e.f=r?u:function(t,e,n){if(o(t),e=a(e,!0),o(n),i)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";var r=n(12),i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.WRITE=e.READ=e.Driver=void 0;var o=i(n(1)),a=i(n(2)),u=i(n(79)),s=i(n(239)),c=i(n(240)),l=n(3),f=n(127),h=i(n(42)),d=i(n(262)),v=r(n(119)),p=i(n(120)),_=i(n(131)),y=n(43),g=36e5,m=y.ACCESS_MODE_READ;e.READ=m;var b=y.ACCESS_MODE_WRITE;e.WRITE=b;var w=0,k=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,o.default)(this,t),function(t){t.maxConnectionLifetime=E(t.maxConnectionLifetime,g),t.maxConnectionPoolSize=E(t.maxConnectionPoolSize,v.DEFAULT_MAX_SIZE),t.connectionAcquisitionTimeout=E(t.connectionAcquisitionTimeout,v.DEFAULT_ACQUISITION_TIMEOUT)}(i),this._id=w++,this._address=e,this._userAgent=n,this._openConnections={},this._authToken=r,this._config=i,this._log=p.default.create(i),this._pool=new s.default({create:this._createConnection.bind(this),destroy:this._destroyConnection.bind(this),validate:this._validateConnection.bind(this),installIdleObserver:this._installIdleObserverOnConnection.bind(this),removeIdleObserver:this._removeIdleObserverOnConnection.bind(this),config:v.default.fromDriverConfig(i),log:this._log}),this._connectionProvider=null,this._onCompleted=null,this._afterConstruction()}return(0,a.default)(t,[{key:"_afterConstruction",value:function(){this._log.info("Direct driver ".concat(this._id," created for server address ").concat(this._address))}},{key:"_createConnection",value:function(t,e){var n=this,r=c.default.create(t,this._config,this._createConnectionErrorHandler(),this._log);return r._release=function(){return e(t,r)},this._openConnections[r.id]=r,r.connect(this._userAgent,this._authToken).catch((function(t){throw n.onError&&n.onError(t),n._destroyConnection(r),t}))}},{key:"_validateConnection",value:function(t){if(!t.isOpen())return!1;var e=this._config.maxConnectionLifetime;return Date.now()-t.creationTimestamp<=e}},{key:"_installIdleObserverOnConnection",value:function(t,e){t._queueObserver(e)}},{key:"_removeIdleObserverOnConnection",value:function(t){t._updateCurrentObserver()}},{key:"_destroyConnection",value:function(t){delete this._openConnections[t.id],t.close()}},{key:"session",value:function(e,n){var r=t._validateSessionMode(e),i=this._getOrCreateConnectionProvider(),o=n?new h.default(n):h.default.empty();return new u.default(r,i,o,this._config)}},{key:"_createConnectionProvider",value:function(t,e,n){return new f.DirectConnectionProvider(t,e,n)}},{key:"_createConnectionErrorHandler",value:function(){return new _.default(l.SERVICE_UNAVAILABLE)}},{key:"_getOrCreateConnectionProvider",value:function(){if(!this._connectionProvider){var t=this._driverOnErrorCallback.bind(this);this._connectionProvider=this._createConnectionProvider(this._address,this._pool,t)}return this._connectionProvider}},{key:"_driverOnErrorCallback",value:function(t){var e=this.onError;e&&t.code===l.SERVICE_UNAVAILABLE&&e(t)}},{key:"close",value:function(){this._log.info("Driver ".concat(this._id," closing"));try{this._pool.purgeAll()}finally{for(var t in this._openConnections)this._openConnections.hasOwnProperty(t)&&this._openConnections[t].close()}}},{key:"onCompleted",get:function(){return this._onCompleted},set:function(t){if(this._onCompleted=t,this._onCompleted){var e=this._getOrCreateConnectionProvider();new d.default(e,this._onCompleted).verify()}}}],[{key:"_validateSessionMode",value:function(t){var e=t||b;if(e!==y.ACCESS_MODE_READ&&e!==y.ACCESS_MODE_WRITE)throw(0,l.newError)("Illegal session mode "+e);return e}}]),t}();function E(t,e){var n=parseInt(t,10);return n>0||0===n?n:n<0?Number.MAX_SAFE_INTEGER:e}e.Driver=k;var S=k;e.default=S},function(t,e,n){var r=n(87),i=n(45);t.exports=function(t){return r(i(t))}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(24);t.exports=function(t){return r[t+"Prototype"]}},function(t,e){t.exports=!0},function(t,e,n){var r=n(24),i=n(9),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(r[t])||o(i[t]):r[t]&&r[t][e]||i[t]&&i[t][e]}},function(t,e,n){var r=n(72),i=n(25).f,o=n(22),a=n(18),u=n(164),s=n(5)("toStringTag");t.exports=function(t,e,n,c){if(t){var l=n?t:t.prototype;a(l,s)||i(l,s,{configurable:!0,value:e}),c&&!r&&o(l,"toString",u)}}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.HostNameResolver=e.Channel=e.alloc=void 0;var i=r(n(81)),o=r(n(241)),a=r(n(242)),u=r(n(244));e.alloc=function(t){return new i.default(t)};var s=o.default;e.Channel=s;var c=a.default;e.HostNameResolver=c;var l=u.default;e.utf8=l},function(t,e,n){t.exports=n(224)},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},function(t,e,n){var r=n(30),i=n(149);(t.exports=function(t,e){return i[t]||(i[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.4.2",mode:r?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(22);t.exports=function(t,e,n,i){i&&i.enumerable?t[e]=n:r(t,e,n)}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_CONNECTION_HOLDER=e.default=void 0;var i=r(n(7)),o=r(n(4)),a=r(n(8)),u=r(n(1)),s=r(n(2)),c=n(3),l=function(){function t(e,n){(0,u.default)(this,t),this._mode=e,this._connectionProvider=n,this._referenceCount=0,this._connectionPromise=Promise.resolve(null)}return(0,s.default)(t,[{key:"mode",value:function(){return this._mode}},{key:"initializeConnection",value:function(){0===this._referenceCount&&(this._connectionPromise=this._connectionProvider.acquireConnection(this._mode)),this._referenceCount++}},{key:"getConnection",value:function(t){return this._connectionPromise.then((function(e){return t.resolveConnection(e),e}))}},{key:"releaseConnection",value:function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount?this._releaseConnection():this._connectionPromise)}},{key:"close",value:function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())}},{key:"_releaseConnection",value:function(){return this._connectionPromise=this._connectionPromise.then((function(t){return t?t.resetAndFlush().catch(f).then((function(){return t._release()})):Promise.resolve()})).catch(f),this._connectionPromise}}]),t}();function f(){}e.default=l;var h=new(function(t){function e(){return(0,u.default)(this,e),(0,i.default)(this,(0,o.default)(e).apply(this,arguments))}return(0,a.default)(e,t),(0,s.default)(e,[{key:"initializeConnection",value:function(){}},{key:"getConnection",value:function(t){return Promise.reject((0,c.newError)("This connection holder does not serve connections"))}},{key:"releaseConnection",value:function(){return Promise.resolve()}},{key:"close",value:function(){return Promise.resolve()}}]),e}(l));e.EMPTY_CONNECTION_HOLDER=h},function(t,e,n){"use strict";var r=n(12),i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(118)),a=i(n(1)),u=i(n(2)),s=r(n(10)),c="neo4j:bookmark:v1:tx",l=-1,f=function(){function t(e){(0,a.default)(this,t),this._values=function(t){if(!t)return[];if(s.isString(t))return[t];if(Array.isArray(t)){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(null!=r){if(!s.isString(r))throw new TypeError("Bookmark should be a string, given: '".concat(r,"'"));e.push(r)}}return e}throw new TypeError("Bookmark should either be a string or a string array, given: '".concat(t,"'"))}(e),this._maxValue=function(t){if(!t||0===t.length)return null;for(var e=t[0],n=d(e),r=1;r<t.length;r++){var i=t[r],o=d(i);o>n&&(e=i,n=o)}return e}(this._values)}return(0,u.default)(t,[{key:"isEmpty",value:function(){return null===this._maxValue}},{key:"maxBookmarkAsString",value:function(){return this._maxValue}},{key:"values",value:function(){return this._values}},{key:"asBeginTransactionParameters",value:function(){var t;return this.isEmpty()?{}:(t={},(0,o.default)(t,"bookmark",this._maxValue),(0,o.default)(t,"bookmarks",this._values),t)}}],[{key:"empty",value:function(){return h}}]),t}();e.default=f;var h=new f(null);function d(t){return t&&0===t.indexOf(c)&&parseInt(t.substring(c.length))||l}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ACCESS_MODE_WRITE=e.ACCESS_MODE_READ=void 0;e.ACCESS_MODE_READ="READ";e.ACCESS_MODE_WRITE="WRITE"},function(t,e,n){t.exports=n(180)},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}},function(t,e,n){var r=n(15);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(37);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(64),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(47),i=n(87),o=n(50),a=n(48),u=n(92),s=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,l=4==t,f=6==t,h=5==t||f;return function(d,v,p,_){for(var y,g,m=o(d),b=i(m),w=r(v,p,3),k=a(b.length),E=0,S=_||u,O=e?S(d,k):n?S(d,0):void 0;k>E;E++)if((h||E in b)&&(g=w(y=b[E],E,m),t))if(e)O[E]=g;else if(g)switch(t){case 3:return!0;case 5:return y;case 6:return E;case 2:s.call(O,y)}else if(l)return!1;return f?-1:c||l?l:O}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},function(t,e,n){var r=n(45);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r,i,o,a=n(159),u=n(9),s=n(15),c=n(22),l=n(18),f=n(52),h=n(53),d=u.WeakMap;if(a){var v=new d,p=v.get,_=v.has,y=v.set;r=function(t,e){return y.call(v,t,e),e},i=function(t){return p.call(v,t)||{}},o=function(t){return _.call(v,t)}}else{var g=f("state");h[g]=!0,r=function(t,e){return c(t,g,e),e},i=function(t){return l(t,g)?t[g]:{}},o=function(t){return l(t,g)}}t.exports={set:r,get:i,has:o,enforce:function(t){return o(t)?i(t):r(t,{})},getterFor:function(t){return function(e){var n;if(!s(e)||(n=i(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}}},function(t,e,n){var r=n(38),i=n(66),o=r("keys");t.exports=function(t){return o[t]||(o[t]=i(t))}},function(t,e){t.exports={}},function(t,e,n){n(167);var r=n(168),i=n(9),o=n(22),a=n(33),u=n(5)("toStringTag");for(var s in r){var c=i[s],l=c&&c.prototype;l&&!l[u]&&o(l,u,s),a[s]=a.Array}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(116)),u=n(41),s=function(t){console.log("Uncaught error when processing result: "+t)},c=function(t){};var l=function(){function t(e,n,r,o,a){(0,i.default)(this,t),this._stack=function(){var t=new Error("");if(t.stack)return t.stack.replace(/^Error(\n\r)*/,"");return null}(),this._streamObserver=e,this._p=null,this._statement=n,this._parameters=r||{},this._metaSupplier=o||function(){return{}},this._connectionHolder=a||u.EMPTY_CONNECTION_HOLDER}return(0,o.default)(t,[{key:"_createPromise",value:function(){if(!this._p){var t=this;this._p=new Promise((function(e,n){var r=[],i={onNext:function(t){r.push(t)},onCompleted:function(t){e({records:r,summary:t})},onError:function(t){n(t)}};t.subscribe(i)}))}}},{key:"then",value:function(t,e){return this._createPromise(),this._p.then(t,e)}},{key:"catch",value:function(t){return this._createPromise(),this._p.catch(t)}},{key:"subscribe",value:function(t){var e=this,n=this,r=t.onCompleted||c;t.onCompleted=function(i){var o=n._metaSupplier();for(var u in o)o.hasOwnProperty(u)&&(i[u]=o[u]);var s=new a.default(e._statement,e._parameters,i);n._connectionHolder.releaseConnection().then((function(){r.call(t,s)}))};var i=t.onError||s;t.onError=function(r){n._connectionHolder.releaseConnection().then((function(){!function(t,e){e&&(t.stack=t.toString()+"\n"+e)}(r,e._stack),i.call(t,r)}))},this._streamObserver.subscribe(t)}}]),t}();e.default=l},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(117)),u=function(){function t(){(0,i.default)(this,t),this._fieldKeys=null,this._fieldLookup=null,this._queuedRecords=[],this._tail=null,this._error=null,this._hasFailed=!1,this._observer=null,this._conn=null,this._meta={}}return(0,o.default)(t,[{key:"onNext",value:function(t){var e=new a.default(this._fieldKeys,t,this._fieldLookup);this._observer?this._observer.onNext(e):this._queuedRecords.push(e)}},{key:"onCompleted",value:function(t){if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var e=0;e<t.fields.length;e++)this._fieldLookup[t.fields[e]]=e}}else this._observer?this._observer.onCompleted(t):this._tail=t;this._copyMetadataOnCompletion(t)}},{key:"_copyMetadataOnCompletion",value:function(t){for(var e in t)t.hasOwnProperty(e)&&(this._meta[e]=t[e])}},{key:"serverMetadata",value:function(){var t={server:this._conn.server};return Object.assign({},this._meta,t)}},{key:"resolveConnection",value:function(t){this._conn=t}},{key:"prepareToHandleSingleResponse",value:function(){this._fieldKeys=[]}},{key:"markCompleted",value:function(){this._fieldKeys=[],this._tail={}}},{key:"onError",value:function(t){this._hasFailed||(this._hasFailed=!0,this._observer?this._observer.onError?this._observer.onError(t):console.log(t):this._error=t)}},{key:"subscribe",value:function(t){if(this._error)t.onError(this._error);else{if(this._queuedRecords.length>0)for(var e=0;e<this._queuedRecords.length;e++)t.onNext(this._queuedRecords[e]);this._tail&&t.onCompleted(this._tail),this._observer=t}}},{key:"hasFailed",value:function(){return this._hasFailed}}]),t}();e.default=u},function(t,e,n){"use strict";var r=n(12),i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(1)),a=i(n(2)),u=r(n(10)),s=n(20),c=n(3),l=function(){function t(e){(0,o.default)(this,t),function(t){t&&u.assertObject(t,"Transaction config")}(e),this.timeout=function(t){if(u.isObject(t)&&(t.timeout||0===t.timeout)){u.assertNumberOrInteger(t.timeout,"Transaction timeout");var e=(0,s.int)(t.timeout);if(e.isZero())throw(0,c.newError)("Transaction timeout should not be zero");if(e.isNegative())throw(0,c.newError)("Transaction timeout should not be negative");return e}return null}(e),this.metadata=function(t){if(u.isObject(t)&&t.metadata){var e=t.metadata;if(u.assertObject(e),0!==Object.keys(e).length)return e}return null}(e)}return(0,a.default)(t,[{key:"isEmpty",value:function(){return Object.values(this).every((function(t){return null==t}))}}],[{key:"empty",value:function(){return f}}]),t}();e.default=l;var f=new l({})},function(t,e,n){"use strict";var r=n(12),i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.isDuration=function(t){return S(t,h)},e.isLocalTime=function(t){return S(t,d)},e.isTime=function(t){return S(t,v)},e.isDate=function(t){return S(t,p)},e.isLocalDateTime=function(t){return S(t,_)},e.isDateTime=function(t){return S(t,y)},e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=void 0;var o=i(n(251)),a=i(n(1)),u=i(n(2)),s=r(n(126)),c=n(10),l=n(3),f={value:!0,enumerable:!1,configurable:!1},h="__isDuration__",d="__isLocalTime__",v="__isTime__",p="__isDate__",_="__isLocalDateTime__",y="__isDateTime__",g=function(){function t(e,n,r,i){(0,a.default)(this,t),this.months=(0,c.assertNumberOrInteger)(e,"Months"),this.days=(0,c.assertNumberOrInteger)(n,"Days"),(0,c.assertNumberOrInteger)(r,"Seconds"),(0,c.assertNumberOrInteger)(i,"Nanoseconds"),this.seconds=s.normalizeSecondsForDuration(r,i),this.nanoseconds=s.normalizeNanosecondsForDuration(i),Object.freeze(this)}return(0,u.default)(t,[{key:"toString",value:function(){return s.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)}}]),t}();e.Duration=g,Object.defineProperty(g.prototype,h,f);var m=function(){function t(e,n,r,i){(0,a.default)(this,t),this.hour=s.assertValidHour(e),this.minute=s.assertValidMinute(n),this.second=s.assertValidSecond(r),this.nanosecond=s.assertValidNanosecond(i),Object.freeze(this)}return(0,u.default)(t,[{key:"toString",value:function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)}}],[{key:"fromStandardDate",value:function(e,n){return I(e,n),new t(e.getHours(),e.getMinutes(),e.getSeconds(),s.totalNanoseconds(e,n))}}]),t}();e.LocalTime=m,Object.defineProperty(m.prototype,d,f);var b=function(){function t(e,n,r,i,o){(0,a.default)(this,t),this.hour=s.assertValidHour(e),this.minute=s.assertValidMinute(n),this.second=s.assertValidSecond(r),this.nanosecond=s.assertValidNanosecond(i),this.timeZoneOffsetSeconds=(0,c.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}return(0,u.default)(t,[{key:"toString",value:function(){return s.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+s.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)}}],[{key:"fromStandardDate",value:function(e,n){return I(e,n),new t(e.getHours(),e.getMinutes(),e.getSeconds(),s.totalNanoseconds(e,n),s.timeZoneOffsetInSeconds(e))}}]),t}();e.Time=b,Object.defineProperty(b.prototype,v,f);var w=function(){function t(e,n,r){(0,a.default)(this,t),this.year=s.assertValidYear(e),this.month=s.assertValidMonth(n),this.day=s.assertValidDay(r),Object.freeze(this)}return(0,u.default)(t,[{key:"toString",value:function(){return s.dateToIsoString(this.year,this.month,this.day)}}],[{key:"fromStandardDate",value:function(e){return I(e,null),new t(e.getFullYear(),e.getMonth()+1,e.getDate())}}]),t}();e.Date=w,Object.defineProperty(w.prototype,p,f);var k=function(){function t(e,n,r,i,o,u,c){(0,a.default)(this,t),this.year=s.assertValidYear(e),this.month=s.assertValidMonth(n),this.day=s.assertValidDay(r),this.hour=s.assertValidHour(i),this.minute=s.assertValidMinute(o),this.second=s.assertValidSecond(u),this.nanosecond=s.assertValidNanosecond(c),Object.freeze(this)}return(0,u.default)(t,[{key:"toString",value:function(){return O(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)}}],[{key:"fromStandardDate",value:function(e,n){return I(e,n),new t(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),s.totalNanoseconds(e,n))}}]),t}();e.LocalDateTime=k,Object.defineProperty(k.prototype,_,f);var E=function(){function t(e,n,r,i,u,f,h,d,v){(0,a.default)(this,t),this.year=s.assertValidYear(e),this.month=s.assertValidMonth(n),this.day=s.assertValidDay(r),this.hour=s.assertValidHour(i),this.minute=s.assertValidMinute(u),this.second=s.assertValidSecond(f),this.nanosecond=s.assertValidNanosecond(h);var p=function(t,e){var n=t||0===t,r=e&&""!==e;if(n&&!r)return(0,c.assertNumberOrInteger)(t,"Time zone offset in seconds"),[t,null];if(!n&&r)return(0,c.assertString)(e,"Time zone ID"),[null,e];throw n&&r?(0,l.newError)("Unable to create DateTime with both time zone offset and id. Please specify either of them. Given offset: ".concat(t," and id: ").concat(e)):(0,l.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(t," and id: ").concat(e))}(d,v),_=(0,o.default)(p,2),y=_[0],g=_[1];this.timeZoneOffsetSeconds=y,this.timeZoneId=g,Object.freeze(this)}return(0,u.default)(t,[{key:"toString",value:function(){return O(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneId?"[".concat(this.timeZoneId,"]"):s.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds))}}],[{key:"fromStandardDate",value:function(e,n){return I(e,n),new t(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),s.totalNanoseconds(e,n),s.timeZoneOffsetInSeconds(e),null)}}]),t}();function S(t,e){return!0===(t&&t[e])}function O(t,e,n,r,i,o,a){return s.dateToIsoString(t,e,n)+"T"+s.timeToIsoString(r,i,o,a)}function I(t,e){(0,c.assertValidDate)(t,"Standard date"),null!=e&&(0,c.assertNumberOrInteger)(e,"Nanosecond")}e.DateTime=E,Object.defineProperty(E.prototype,y,f)},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=n(10),u=r(n(130)),s=function(){function t(e,n,r,o){(0,i.default)(this,t),this._host=(0,a.assertString)(e,"host"),this._resolved=n?(0,a.assertString)(n,"resolved"):null,this._port=(0,a.assertNumber)(r,"port"),this._hostPort=o,this._stringValue=n?"".concat(o,"(").concat(n,")"):"".concat(o)}return(0,o.default)(t,[{key:"host",value:function(){return this._host}},{key:"resolvedHost",value:function(){return this._resolved?this._resolved:this._host}},{key:"port",value:function(){return this._port}},{key:"resolveWith",value:function(e){return new t(this._host,e,this._port,this._hostPort)}},{key:"asHostPort",value:function(){return this._hostPort}},{key:"asKey",value:function(){return this._hostPort}},{key:"toString",value:function(){return this._stringValue}}],[{key:"fromUrl",value:function(e){var n=u.default.parseDatabaseUrl(e);return new t(n.host,null,n.port,n.hostAndPort)}}]),t}();e.default=s},function(t,e,n){t.exports=n(218)},function(t,e,n){var r=n(21),i=n(62),o=n(36),a=n(27),u=n(46),s=n(18),c=n(88),l=Object.getOwnPropertyDescriptor;e.f=r?l:function(t,e){if(t=a(t),e=u(e,!0),c)try{return l(t,e)}catch(t){}if(s(t,e))return o(!i.f.call(t,e),t[e])}},function(t,e,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);e.f=o?function(t){var e=i(this,t);return!!e&&e.enumerable}:r},function(t,e,n){var r=n(9),i=n(15),o=r.document,a=i(o)&&i(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(){}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+r).toString(36)}},function(t,e,n){var r=n(14);t.exports=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())}))},function(t,e,n){var r=n(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){"use strict";var r=n(158).charAt,i=n(51),o=n(94),a=i.set,u=i.getterFor("String Iterator");o(String,"String",(function(t){a(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=u(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=r(n,i),e.index+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(98),i=n(71);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(t,e,n){var r={};r[n(5)("toStringTag")]="z",t.exports="[object z]"===String(r)},function(t,e,n){var r=n(72),i=n(28),o=n(5)("toStringTag"),a="Arguments"==i(function(){return arguments}());t.exports=r?i:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),o))?n:a?i(e):"Object"==(r=i(e))&&"function"==typeof e.callee?"Arguments":r}},function(t,e,n){"use strict";var r=n(37),i=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)};t.exports.f=function(t){return new i(t)}},function(t,e,n){var r,i,o=n(9),a=n(106),u=o.process,s=u&&u.versions,c=s&&s.v8;c?i=(r=c.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),t.exports=i&&+i},function(t,e,n){e.f=n(5)},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.PathSegment=e.Path=e.UnboundRelationship=e.Relationship=e.Node=void 0;var i=r(n(1)),o=r(n(2)),a=function(){function t(e,n,r){(0,i.default)(this,t),this.identity=e,this.labels=n,this.properties=r}return(0,o.default)(t,[{key:"toString",value:function(){for(var t="("+this.identity,e=0;e<this.labels.length;e++)t+=":"+this.labels[e];var n=Object.keys(this.properties);if(n.length>0){t+=" {";for(var r=0;r<n.length;r++)r>0&&(t+=","),t+=n[r]+":"+JSON.stringify(this.properties[n[r]]);t+="}"}return t+=")"}}]),t}();e.Node=a;var u=function(){function t(e,n,r,o,a){(0,i.default)(this,t),this.identity=e,this.start=n,this.end=r,this.type=o,this.properties=a}return(0,o.default)(t,[{key:"toString",value:function(){var t="("+this.start+")-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+JSON.stringify(this.properties[e[n]]);t+="}"}return t+="]->("+this.end+")"}}]),t}();e.Relationship=u;var s=function(){function t(e,n,r){(0,i.default)(this,t),this.identity=e,this.type=n,this.properties=r}return(0,o.default)(t,[{key:"bind",value:function(t,e){return new u(this.identity,t,e,this.type,this.properties)}},{key:"toString",value:function(){var t="-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+JSON.stringify(this.properties[e[n]]);t+="}"}return t+="]->"}}]),t}();e.UnboundRelationship=s;e.PathSegment=function t(e,n,r){(0,i.default)(this,t),this.start=e,this.relationship=n,this.end=r};e.Path=function t(e,n,r){(0,i.default)(this,t),this.start=e,this.end=n,this.segments=r,this.length=r.length}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(7)),o=r(n(4)),a=r(n(80)),u=r(n(8)),s=r(n(1)),c=r(n(2)),l=r(n(56)),f=r(n(55)),h=r(n(237)),d=n(3),v=n(10),p=r(n(41)),_=r(n(26)),y=n(43),g=r(n(238)),m=r(n(42)),b=r(n(57)),w=function(){function t(e,n,r,i){(0,s.default)(this,t),this._mode=e,this._readConnectionHolder=new p.default(y.ACCESS_MODE_READ,n),this._writeConnectionHolder=new p.default(y.ACCESS_MODE_WRITE,n),this._open=!0,this._hasTx=!1,this._lastBookmark=r,this._transactionExecutor=function(t){var e=t&&t.maxTransactionRetryTime?t.maxTransactionRetryTime:null;return new g.default(e)}(i)}return(0,c.default)(t,[{key:"run",value:function(t,e,n){var r=this,i=(0,v.validateStatementAndParameters)(t,e),o=i.query,a=i.params,u=n?new b.default(n):b.default.empty();return this._run(o,a,(function(t,e){return t.protocol().run(o,a,r._lastBookmark,u,r._mode,e)}))}},{key:"_run",value:function(t,e,n){var r=new k(this),i=this._connectionHolderWithMode(this._mode);return this._hasTx?r.onError((0,d.newError)("Statements cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):(i.initializeConnection(),i.getConnection(r).then((function(t){return n(t,r)})).catch((function(t){return r.onError(t)}))),new f.default(r,t,e,(function(){return r.serverMetadata()}),i)}},{key:"beginTransaction",value:function(t){var e=t,n=b.default.empty();return"string"==typeof e||e instanceof String||Array.isArray(e)?this._updateBookmark(new m.default(e)):e&&(n=new b.default(e)),this._beginTransaction(this._mode,n)}},{key:"_beginTransaction",value:function(t,e){if(this._hasTx)throw(0,d.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var n=_.default._validateSessionMode(t),r=this._connectionHolderWithMode(n);r.initializeConnection(),this._hasTx=!0;var i=new h.default(r,this._transactionClosed.bind(this),this._updateBookmark.bind(this));return i._begin(this._lastBookmark,e),i}},{key:"_transactionClosed",value:function(){this._hasTx=!1}},{key:"lastBookmark",value:function(){return this._lastBookmark.maxBookmarkAsString()}},{key:"readTransaction",value:function(t,e){var n=new b.default(e);return this._runTransaction(y.ACCESS_MODE_READ,n,t)}},{key:"writeTransaction",value:function(t,e){var n=new b.default(e);return this._runTransaction(y.ACCESS_MODE_WRITE,n,t)}},{key:"_runTransaction",value:function(t,e,n){var r=this;return this._transactionExecutor.execute((function(){return r._beginTransaction(t,e)}),n)}},{key:"_updateBookmark",value:function(t){t&&!t.isEmpty()&&(this._lastBookmark=t)}},{key:"close",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null};this._open?(this._open=!1,this._transactionExecutor.close(),this._readConnectionHolder.close().then((function(){t._writeConnectionHolder.close().then((function(){e()}))}))):e()}},{key:"_connectionHolderWithMode",value:function(t){if(t===y.ACCESS_MODE_READ)return this._readConnectionHolder;if(t===y.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,d.newError)("Unknown access mode: "+t)}}]),t}(),k=function(t){function e(t){var n;return(0,s.default)(this,e),(n=(0,i.default)(this,(0,o.default)(e).call(this)))._session=t,n}return(0,u.default)(e,t),(0,c.default)(e,[{key:"onCompleted",value:function(t){(0,a.default)((0,o.default)(e.prototype),"onCompleted",this).call(this,t);var n=new m.default(t.bookmark);this._session._updateBookmark(n)}}]),e}(l.default);var E=w;e.default=E},function(t,e,n){var r=n(236);function i(e,n,o){return"undefined"!=typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}},i(e,n,o||e)}t.exports=i},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(7)),u=r(n(4)),s=r(n(8)),c=function(t){function e(t){var n;(0,i.default)(this,e);var r=t instanceof ArrayBuffer?t:new ArrayBuffer(t);return(n=(0,a.default)(this,(0,u.default)(e).call(this,r.byteLength)))._buffer=r,n._view=new DataView(n._buffer),n}return(0,s.default)(e,t),(0,o.default)(e,[{key:"putUInt8",value:function(t,e){this._view.setUint8(t,e)}},{key:"getUInt8",value:function(t){return this._view.getUint8(t)}},{key:"putInt8",value:function(t,e){this._view.setInt8(t,e)}},{key:"getInt8",value:function(t){return this._view.getInt8(t)}},{key:"getFloat64",value:function(t){return this._view.getFloat64(t)}},{key:"putFloat64",value:function(t,e){this._view.setFloat64(t,e)}},{key:"getSlice",value:function(t,n){if(this._buffer.slice)return new e(this._buffer.slice(t,t+n));for(var r=new e(n),i=0;i<n;i++)r.putUInt8(i,this.getUInt8(i+t));return r}},{key:"readView",value:function(t){return new DataView(this._buffer,this._updatePos(t),t)}}]),e}(r(n(82)).default);e.default=c},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(7)),o=r(n(4)),a=r(n(8)),u=r(n(1)),s=r(n(2)),c=function(){function t(e){(0,u.default)(this,t),this.position=0,this.length=e}return(0,s.default)(t,[{key:"getUInt8",value:function(t){throw new Error("Not implemented")}},{key:"getInt8",value:function(t){throw new Error("Not implemented")}},{key:"getFloat64",value:function(t){throw new Error("Not implemented")}},{key:"putUInt8",value:function(t,e){throw new Error("Not implemented")}},{key:"putInt8",value:function(t,e){throw new Error("Not implemented")}},{key:"putFloat64",value:function(t,e){throw new Error("Not implemented")}},{key:"getInt16",value:function(t){return this.getInt8(t)<<8|this.getUInt8(t+1)}},{key:"getUInt16",value:function(t){return this.getUInt8(t)<<8|this.getUInt8(t+1)}},{key:"getInt32",value:function(t){return this.getInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)}},{key:"getUInt32",value:function(t){return this.getUInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)}},{key:"getInt64",value:function(t){return this.getInt8(t)<<56|this.getUInt8(t+1)<<48|this.getUInt8(t+2)<<40|this.getUInt8(t+3)<<32|this.getUInt8(t+4)<<24|this.getUInt8(t+5)<<16|this.getUInt8(t+6)<<8|this.getUInt8(t+7)}},{key:"getSlice",value:function(t,e){return new l(t,e,this)}},{key:"putInt16",value:function(t,e){this.putInt8(t,e>>8),this.putUInt8(t+1,255&e)}},{key:"putUInt16",value:function(t,e){this.putUInt8(t,e>>8&255),this.putUInt8(t+1,255&e)}},{key:"putInt32",value:function(t,e){this.putInt8(t,e>>24),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,255&e)}},{key:"putUInt32",value:function(t,e){this.putUInt8(t,e>>24&255),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,255&e)}},{key:"putInt64",value:function(t,e){this.putInt8(t,e>>48),this.putUInt8(t+1,e>>42&255),this.putUInt8(t+2,e>>36&255),this.putUInt8(t+3,e>>30&255),this.putUInt8(t+4,e>>24&255),this.putUInt8(t+5,e>>16&255),this.putUInt8(t+6,e>>8&255),this.putUInt8(t+7,255&e)}},{key:"putBytes",value:function(t,e){for(var n=0,r=e.remaining();n<r;n++)this.putUInt8(t+n,e.readUInt8())}},{key:"readUInt8",value:function(){return this.getUInt8(this._updatePos(1))}},{key:"readInt8",value:function(){return this.getInt8(this._updatePos(1))}},{key:"readUInt16",value:function(){return this.getUInt16(this._updatePos(2))}},{key:"readUInt32",value:function(){return this.getUInt32(this._updatePos(4))}},{key:"readInt16",value:function(){return this.getInt16(this._updatePos(2))}},{key:"readInt32",value:function(){return this.getInt32(this._updatePos(4))}},{key:"readInt64",value:function(){return this.getInt32(this._updatePos(8))}},{key:"readFloat64",value:function(){return this.getFloat64(this._updatePos(8))}},{key:"writeUInt8",value:function(t){this.putUInt8(this._updatePos(1),t)}},{key:"writeInt8",value:function(t){this.putInt8(this._updatePos(1),t)}},{key:"writeInt16",value:function(t){this.putInt16(this._updatePos(2),t)}},{key:"writeInt32",value:function(t){this.putInt32(this._updatePos(4),t)}},{key:"writeUInt32",value:function(t){this.putUInt32(this._updatePos(4),t)}},{key:"writeInt64",value:function(t){this.putInt64(this._updatePos(8),t)}},{key:"writeFloat64",value:function(t){this.putFloat64(this._updatePos(8),t)}},{key:"writeBytes",value:function(t){this.putBytes(this._updatePos(t.remaining()),t)}},{key:"readSlice",value:function(t){return this.getSlice(this._updatePos(t),t)}},{key:"_updatePos",value:function(t){var e=this.position;return this.position+=t,e}},{key:"remaining",value:function(){return this.length-this.position}},{key:"hasRemaining",value:function(){return this.remaining()>0}},{key:"reset",value:function(){this.position=0}},{key:"toString",value:function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()}},{key:"toHex",value:function(){for(var t="",e=0;e<this.length;e++){var n=this.getUInt8(e).toString(16);1===n.length&&(n="0"+n),t+=n,e!==this.length-1&&(t+=" ")}return t}}]),t}();e.default=c;var l=function(t){function e(t,n,r){var a;return(0,u.default)(this,e),(a=(0,i.default)(this,(0,o.default)(e).call(this,n)))._start=t,a._inner=r,a}return(0,a.default)(e,t),(0,s.default)(e,[{key:"putUInt8",value:function(t,e){this._inner.putUInt8(this._start+t,e)}},{key:"getUInt8",value:function(t){return this._inner.getUInt8(this._start+t)}},{key:"putInt8",value:function(t,e){this._inner.putInt8(this._start+t,e)}},{key:"putFloat64",value:function(t,e){this._inner.putFloat64(this._start+t,e)}},{key:"getInt8",value:function(t){return this._inner.getInt8(this._start+t)}},{key:"getFloat64",value:function(t){return this._inner.getFloat64(this._start+t)}}]),e}(c)},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.isPoint=function(t){return!0===(t&&t[u])},e.Point=void 0;var i=r(n(1)),o=r(n(2)),a=n(10),u="__isPoint__",s=function(){function t(e,n,r,o){(0,i.default)(this,t),this.srid=(0,a.assertNumberOrInteger)(e,"SRID"),this.x=(0,a.assertNumber)(n,"X coordinate"),this.y=(0,a.assertNumber)(r,"Y coordinate"),this.z=null==o?o:(0,a.assertNumber)(o,"Z coordinate"),Object.freeze(this)}return(0,o.default)(t,[{key:"toString",value:function(){return this.z||0===this.z?"Point{srid=".concat(c(this.srid),", x=").concat(c(this.x),", y=").concat(c(this.y),", z=").concat(c(this.z),"}"):"Point{srid=".concat(c(this.srid),", x=").concat(c(this.x),", y=").concat(c(this.y),"}")}}]),t}();function c(t){return Number.isInteger(t)?t+".0":t.toString()}e.Point=s,Object.defineProperty(s.prototype,u,{value:!0,enumerable:!1,configurable:!1})},function(t,e,n){t.exports=n(156)},function(t,e,n){t.exports=n(185)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(14),i=n(28),o="".split;t.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==i(t)?o.call(t,""):Object(t)}:Object},function(t,e,n){var r=n(21),i=n(14),o=n(63);t.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(14),i=/#|\.prototype\./,o=function(t,e){var n=u[a(t)];return n==c||n!=s&&("function"==typeof e?r(e):!!e)},a=o.normalize=function(t){return String(t).replace(i,".").toLowerCase()},u=o.data={},s=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},function(t,e,n){var r=n(27),i=n(48),o=n(144),a=function(t){return function(e,n,a){var u,s=r(e),c=i(s.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((u=s[l++])!=u)return!0}else for(;c>l;l++)if((t||l in s)&&s[l]===n)return t||l||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},function(t,e,n){var r=n(67);t.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol()},function(t,e,n){var r=n(15),i=n(68),o=n(5)("species");t.exports=function(t,e){var n;return i(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},function(t,e){},function(t,e,n){"use strict";var r=n(11),i=n(161),o=n(96),a=n(165),u=n(32),s=n(22),c=n(39),l=n(5),f=n(30),h=n(33),d=n(95),v=d.IteratorPrototype,p=d.BUGGY_SAFARI_ITERATORS,_=l("iterator"),y=function(){return this};t.exports=function(t,e,n,l,d,g,m){i(n,e,l);var b,w,k,E=function(t){if(t===d&&C)return C;if(!p&&t in I)return I[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},S=e+" Iterator",O=!1,I=t.prototype,T=I[_]||I["@@iterator"]||d&&I[d],C=!p&&T||E(d),x="Array"==e&&I.entries||T;if(x&&(b=o(x.call(new t)),v!==Object.prototype&&b.next&&(f||o(b)===v||(a?a(b,v):"function"!=typeof b[_]&&s(b,_,y)),u(b,S,!0,!0),f&&(h[S]=y))),"values"==d&&T&&"values"!==T.name&&(O=!0,C=function(){return T.call(this)}),f&&!m||I[_]===C||s(I,_,C),h[e]=C,d)if(w={values:E("values"),keys:g?C:E("keys"),entries:E("entries")},m)for(k in w)!p&&!O&&k in I||c(I,k,w[k]);else r({target:e,proto:!0,forced:p||O},w);return w}},function(t,e,n){"use strict";var r,i,o,a=n(96),u=n(22),s=n(18),c=n(5),l=n(30),f=c("iterator"),h=!1;[].keys&&("next"in(o=[].keys())?(i=a(a(o)))!==Object.prototype&&(r=i):h=!0),null==r&&(r={}),l||s(r,f)||u(r,f,(function(){return this})),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:h}},function(t,e,n){var r=n(18),i=n(50),o=n(52),a=n(162),u=o("IE_PROTO"),s=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=i(t),r(t,u)?t[u]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var r=n(19),i=n(163),o=n(71),a=n(53),u=n(99),s=n(63),c=n(52)("IE_PROTO"),l=function(){},f=function(){var t,e=s("iframe"),n=o.length;for(e.style.display="none",u.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),f=t.F;n--;)delete f.prototype[o[n]];return f()};t.exports=Object.create||function(t,e){var n;return null!==t?(l.prototype=r(t),n=new l,l.prototype=null,n[c]=t):n=f(),void 0===e?n:i(n,e)},a[c]=!0},function(t,e,n){var r=n(18),i=n(27),o=n(90).indexOf,a=n(53);t.exports=function(t,e){var n,u=i(t),s=0,c=[];for(n in u)!r(a,n)&&r(u,n)&&c.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(31);t.exports=r("document","documentElement")},function(t,e,n){var r=n(9);t.exports=r.Promise},function(t,e,n){var r=n(19),i=n(173),o=n(48),a=n(47),u=n(102),s=n(174),c=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,e,n,l,f){var h,d,v,p,_,y,g,m=a(e,n,l?2:1);if(f)h=t;else{if("function"!=typeof(d=u(t)))throw TypeError("Target is not iterable");if(i(d)){for(v=0,p=o(t.length);p>v;v++)if((_=l?m(r(g=t[v])[0],g[1]):m(t[v]))&&_ instanceof c)return _;return new c(!1)}h=d.call(t)}for(y=h.next;!(g=y.call(h)).done;)if("object"==typeof(_=s(h,m,g.value,l))&&_&&_ instanceof c)return _;return new c(!1)}).stop=function(t){return new c(!0,t)}},function(t,e,n){var r=n(73),i=n(33),o=n(5)("iterator");t.exports=function(t){if(null!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e,n){var r=n(19),i=n(37),o=n(5)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r,i,o,a=n(9),u=n(14),s=n(28),c=n(47),l=n(99),f=n(63),h=n(105),d=a.location,v=a.setImmediate,p=a.clearImmediate,_=a.process,y=a.MessageChannel,g=a.Dispatch,m=0,b={},w=function(t){if(b.hasOwnProperty(t)){var e=b[t];delete b[t],e()}},k=function(t){return function(){w(t)}},E=function(t){w(t.data)},S=function(t){a.postMessage(t+"",d.protocol+"//"+d.host)};v&&p||(v=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return b[++m]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},r(m),m},p=function(t){delete b[t]},"process"==s(_)?r=function(t){_.nextTick(k(t))}:g&&g.now?r=function(t){g.now(k(t))}:y&&!h?(o=(i=new y).port2,i.port1.onmessage=E,r=c(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||u(S)?r="onreadystatechange"in f("script")?function(t){l.appendChild(f("script")).onreadystatechange=function(){l.removeChild(this),w(t)}}:function(t){setTimeout(k(t),0)}:(r=S,a.addEventListener("message",E,!1))),t.exports={set:v,clear:p}},function(t,e,n){var r=n(106);t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(r)},function(t,e,n){var r=n(31);t.exports=r("navigator","userAgent")||""},function(t,e,n){var r=n(19),i=n(15),o=n(74);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},function(t,e,n){var r=n(14),i=n(5),o=n(75),a=i("species");t.exports=function(t){return o>=51||!r((function(){var e=[];return(e.constructor={})[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},function(t,e,n){"use strict";var r=n(11),i=n(14),o=n(68),a=n(15),u=n(50),s=n(48),c=n(188),l=n(92),f=n(109),h=n(5),d=n(75),v=h("isConcatSpreadable"),p=d>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),_=f("concat"),y=function(t){if(!a(t))return!1;var e=t[v];return void 0!==e?!!e:o(t)};r({target:"Array",proto:!0,forced:!p||!_},{concat:function(t){var e,n,r,i,o,a=u(this),f=l(a,0),h=0;for(e=-1,r=arguments.length;e<r;e++)if(o=-1===e?a:arguments[e],y(o)){if(h+(i=s(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,h++)n in o&&c(f,h,o[n])}else{if(h>=9007199254740991)throw TypeError("Maximum allowed index exceeded");c(f,h++,o)}return f.length=h,f}})},function(t,e,n){n(6)("iterator")},function(t,e,n){var r=n(98),i=n(71).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){t.exports=n(230)},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(77);function i(e,n,o){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?t.exports=i=function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o}:t.exports=i=Reflect.construct,i.apply(null,arguments)}t.exports=i},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.statementType=void 0;var i=r(n(1)),o=r(n(2)),a=n(20),u=function(){function t(e,n,r){(0,i.default)(this,t),this.statement={text:e,parameters:n},this.statementType=r.type,this.counters=new l(r.stats||{}),this.updateStatistics=this.counters,this.plan=!(!r.plan&&!r.profile)&&new s(r.plan||r.profile),this.profile=!!r.profile&&new c(r.profile),this.notifications=this._buildNotifications(r.notifications),this.server=new h(r.server),this.resultConsumedAfter=r.result_consumed_after,this.resultAvailableAfter=r.result_available_after}return(0,o.default)(t,[{key:"_buildNotifications",value:function(t){return t?t.map((function(t){return new f(t)})):[]}},{key:"hasPlan",value:function(){return this.plan instanceof s}},{key:"hasProfile",value:function(){return this.profile instanceof c}}]),t}(),s=function t(e){(0,i.default)(this,t),this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.children=e.children?e.children.map((function(e){return new t(e)})):[]},c=function t(e){(0,i.default)(this,t),this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.dbHits=d(e.args.DbHits),this.rows=d(e.args.Rows),this.children=e.children?e.children.map((function(e){return new t(e)})):[]},l=function(){function t(e){var n=this;(0,i.default)(this,t),this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},Object.keys(e).forEach((function(t){n._stats[t.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()}))]=d(e[t])}))}return(0,o.default)(t,[{key:"containsUpdates",value:function(){var t=this;return Object.keys(this._stats).reduce((function(e,n){return e+t._stats[n]}),0)>0}},{key:"nodesCreated",value:function(){return this._stats.nodesCreated}},{key:"nodesDeleted",value:function(){return this._stats.nodesDeleted}},{key:"relationshipsCreated",value:function(){return this._stats.relationshipsCreated}},{key:"relationshipsDeleted",value:function(){return this._stats.relationshipsDeleted}},{key:"propertiesSet",value:function(){return this._stats.propertiesSet}},{key:"labelsAdded",value:function(){return this._stats.labelsAdded}},{key:"labelsRemoved",value:function(){return this._stats.labelsRemoved}},{key:"indexesAdded",value:function(){return this._stats.indexesAdded}},{key:"indexesRemoved",value:function(){return this._stats.indexesRemoved}},{key:"constraintsAdded",value:function(){return this._stats.constraintsAdded}},{key:"constraintsRemoved",value:function(){return this._stats.constraintsRemoved}}]),t}(),f=function(){function t(e){(0,i.default)(this,t),this.code=e.code,this.title=e.title,this.description=e.description,this.severity=e.severity,this.position=t._constructPosition(e.position)}return(0,o.default)(t,null,[{key:"_constructPosition",value:function(t){return t?{offset:d(t.offset),line:d(t.line),column:d(t.column)}:{}}}]),t}(),h=function t(e){(0,i.default)(this,t),e&&(this.address=e.address,this.version=e.version)};function d(t){return(0,a.isInt)(t)?t.toInt():t}e.statementType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"};var v=u;e.default=v},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=n(3);var u=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(0,i.default)(this,t),this.keys=e,this.length=e.length,this._fields=n,this._fieldLookup=r||function(t){var e={};return t.forEach((function(t,n){e[t]=n})),e}(e)}return(0,o.default)(t,[{key:"forEach",value:function(t){for(var e=0;e<this.keys.length;e++)t(this._fields[e],this.keys[e],this)}},{key:"toObject",value:function(){var t={};return this.forEach((function(e,n){t[n]=e})),t}},{key:"get",value:function(t){var e;if("number"!=typeof t){if(void 0===(e=this._fieldLookup[t]))throw(0,a.newError)("This record has no field with key '"+t+"', available key are: ["+this.keys+"].")}else e=t;if(e>this._fields.length-1||e<0)throw(0,a.newError)("This record has no field with index '"+e+"'. Remember that indexes start at `0`, and make sure your statement returns records in the shape you meant it to.");return this._fields[e]}},{key:"has",value:function(t){return"number"==typeof t?t>=0&&t<this._fields.length:void 0!==this._fieldLookup[t]}}]),t}();e.default=u},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ACQUISITION_TIMEOUT=e.DEFAULT_MAX_SIZE=e.default=void 0;var i=r(n(1)),o=r(n(2)),a=100;e.DEFAULT_MAX_SIZE=a;var u=6e4;e.DEFAULT_ACQUISITION_TIMEOUT=u;var s=function(){function t(e,n){(0,i.default)(this,t),this.maxSize=c(e,a),this.acquisitionTimeout=c(n,u)}return(0,o.default)(t,null,[{key:"defaultConfig",value:function(){return new t(a,u)}},{key:"fromDriverConfig",value:function(e){var n,r=l(e.connectionPoolSize);return l(e.maxConnectionPoolSize)?n=e.maxConnectionPoolSize:r?(console.warn('WARNING: neo4j-driver setting "connectionPoolSize" is deprecated, please use "maxConnectionPoolSize" instead'),n=e.connectionPoolSize):n=a,new t(n,l(e.connectionAcquisitionTimeout)?e.connectionAcquisitionTimeout:u)}}]),t}();function c(t,e){return 0===t||t?t:e}function l(t){return 0===t||t}e.default=s},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i,o=r(n(7)),a=r(n(4)),u=r(n(8)),s=r(n(1)),c=r(n(2)),l=r(n(118)),f=n(3),h="info",d=(i={},(0,l.default)(i,"error",0),(0,l.default)(i,"warn",1),(0,l.default)(i,"info",2),(0,l.default)(i,"debug",3),i),v=function(){function t(e,n){(0,s.default)(this,t),this._level=e,this._loggerFunction=n}return(0,c.default)(t,[{key:"isErrorEnabled",value:function(){return _(this._level,"error")}},{key:"error",value:function(t){this.isErrorEnabled()&&this._loggerFunction("error",t)}},{key:"isWarnEnabled",value:function(){return _(this._level,"warn")}},{key:"warn",value:function(t){this.isWarnEnabled()&&this._loggerFunction("warn",t)}},{key:"isInfoEnabled",value:function(){return _(this._level,"info")}},{key:"info",value:function(t){this.isInfoEnabled()&&this._loggerFunction("info",t)}},{key:"isDebugEnabled",value:function(){return _(this._level,"debug")}},{key:"debug",value:function(t){this.isDebugEnabled()&&this._loggerFunction("debug",t)}}],[{key:"create",value:function(e){if(e&&e.logging){var n=e.logging;return new t(function(t){if(t&&t.level){var e=t.level,n=d[e];if(!n&&0!==n)throw(0,f.newError)("Illegal logging level: ".concat(e,". Supported levels are: ").concat(Object.keys(d)));return e}return h}(n),function(t){if(t&&t.logger){var e=t.logger;if(e&&"function"==typeof e)return e}throw(0,f.newError)("Illegal logger function: ".concat(t.logger))}(n))}return this.noOp()}},{key:"noOp",value:function(){return p}}]),t}(),p=new(function(t){function e(){return(0,s.default)(this,e),(0,o.default)(this,(0,a.default)(e).call(this,null,null))}return(0,u.default)(e,t),(0,c.default)(e,[{key:"isErrorEnabled",value:function(){return!1}},{key:"error",value:function(t){}},{key:"isWarnEnabled",value:function(){return!1}},{key:"warn",value:function(t){}},{key:"isInfoEnabled",value:function(){return!1}},{key:"info",value:function(t){}},{key:"isDebugEnabled",value:function(){return!1}},{key:"debug",value:function(t){}}]),e}(v));function _(t,e){return d[t]>=d[e]}var y=v;e.default=y},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION_IN_DEV=e.VERSION_4_0_0=e.VERSION_3_5_0=e.VERSION_3_4_0=e.VERSION_3_2_0=e.VERSION_3_1_0=e.ServerVersion=void 0;var i=r(n(1)),o=r(n(2)),a=n(10),u=new RegExp("^(Neo4j/)?(\\d+)\\.(\\d+)(?:\\.)?(\\d*)(\\.|-|\\+)?([0-9A-Za-z-.]*)?$"),s=function(){function t(e,n,r){(0,i.default)(this,t),this.major=e,this.minor=n,this.patch=r}return(0,o.default)(t,[{key:"compareTo",value:function(t){var e=l(this.major,t.major);return 0===e&&0===(e=l(this.minor,t.minor))&&(e=l(this.patch,t.patch)),e}}],[{key:"fromDriver",value:function(e){var n=e.session();return n.run("RETURN 1").then((function(e){return n.close(),t.fromString(e.summary.server.version)}))}},{key:"fromString",value:function(e){if(!e)return new t(3,0,0);if((0,a.assertString)(e,"Neo4j version string"),e.toLowerCase()==="Neo4j/dev".toLowerCase())return y;var n=e.match(u);if(!n)throw new Error("Unparsable Neo4j version: ".concat(e));return new t(c(n[2]),c(n[3]),c(n[4]||0))}}]),t}();function c(t,e){var n=parseInt(t,10);if(!n&&0!==n)throw new Error("Unparsable number ".concat(e,": '").concat(t,"'"));return n}function l(t,e){return t<e?-1:t===e?0:1}e.ServerVersion=s;var f=new s(3,1,0);e.VERSION_3_1_0=f;var h=new s(3,2,0);e.VERSION_3_2_0=h;var d=new s(3,4,0);e.VERSION_3_4_0=d;var v=new s(3,5,0);e.VERSION_3_5_0=v;var p=new s(4,0,0);e.VERSION_4_0_0=p;var _=Number.MAX_SAFE_INTEGER,y=new s(_,_,_);e.VERSION_IN_DEV=y},function(t,e,n){"use strict";var r=n(12),i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(1)),a=i(n(2)),u=i(n(123)),s=r(n(124)),c=n(3),l=i(n(42)),f=i(n(57)),h=n(43),d=function(){function t(e,n,r){(0,o.default)(this,t),this._connection=e,this._packer=this._createPacker(n),this._unpacker=this._createUnpacker(r)}return(0,a.default)(t,[{key:"packer",value:function(){return this._packer}},{key:"unpacker",value:function(){return this._unpacker}},{key:"transformMetadata",value:function(t){return t}},{key:"initialize",value:function(t,e,n){var r=u.default.init(t,e);this._connection.write(r,n,!0)}},{key:"prepareToClose",value:function(t){}},{key:"beginTransaction",value:function(t,e,n,r){v(e,this._connection,r);var i=u.default.run("BEGIN",t.asBeginTransactionParameters()),o=u.default.pullAll();this._connection.write(i,r,!1),this._connection.write(o,r,!1)}},{key:"commitTransaction",value:function(t){this.run("COMMIT",{},l.default.empty(),f.default.empty(),h.ACCESS_MODE_WRITE,t)}},{key:"rollbackTransaction",value:function(t){this.run("ROLLBACK",{},l.default.empty(),f.default.empty(),h.ACCESS_MODE_WRITE,t)}},{key:"run",value:function(t,e,n,r,i,o){v(r,this._connection,o);var a=u.default.run(t,e),s=u.default.pullAll();this._connection.write(a,o,!1),this._connection.write(s,o,!0)}},{key:"reset",value:function(t){var e=u.default.reset();this._connection.write(e,t,!0)}},{key:"_createPacker",value:function(t){return new s.Packer(t)}},{key:"_createUnpacker",value:function(t){return new s.Unpacker(t)}}]),t}();function v(t,e,n){if(!t.isEmpty()){var r=(0,c.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw e._handleFatalError(r),n.onError(r),r}}e.default=d},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=n(43),u="r",s=function(){function t(e,n,r){(0,i.default)(this,t),this.signature=e,this.fields=n,this.toString=r}return(0,o.default)(t,null,[{key:"init",value:function(e,n){return new t(1,[e,n],(function(){return"INIT ".concat(e," {...}")}))}},{key:"run",value:function(e,n){return new t(16,[e,n],(function(){return"RUN ".concat(e," ").concat(JSON.stringify(n))}))}},{key:"pullAll",value:function(){return l}},{key:"reset",value:function(){return f}},{key:"hello",value:function(e,n){return new t(1,[Object.assign({user_agent:e},n)],(function(){return"HELLO {user_agent: '".concat(e,"', ...}")}))}},{key:"begin",value:function(e,n,r){var i=c(e,n,r);return new t(17,[i],(function(){return"BEGIN ".concat(JSON.stringify(i))}))}},{key:"commit",value:function(){return h}},{key:"rollback",value:function(){return d}},{key:"runWithMetadata",value:function(e,n,r,i,o){var a=c(r,i,o);return new t(16,[e,n,a],(function(){return"RUN ".concat(e," ").concat(JSON.stringify(n)," ").concat(JSON.stringify(a))}))}},{key:"goodbye",value:function(){return v}}]),t}();function c(t,e,n){var r={};return t.isEmpty()||(r.bookmarks=t.values()),e.timeout&&(r.tx_timeout=e.timeout),e.metadata&&(r.tx_metadata=e.metadata),n===a.ACCESS_MODE_READ&&(r.mode=u),r}e.default=s;var l=new s(63,[],(function(){return"PULL_ALL"})),f=new s(15,[],(function(){return"RESET"})),h=new s(18,[],(function(){return"COMMIT"})),d=new s(19,[],(function(){return"ROLLBACK"})),v=new s(2,[],(function(){return"GOODBYE"}))},function(t,e,n){"use strict";var r=n(12),i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Structure=e.Unpacker=e.Packer=void 0;var o=i(n(40)),a=i(n(1)),u=i(n(2)),s=n(34),c=r(n(20)),l=n(3),f=n(78),h=function(){function t(e,n){(0,a.default)(this,t),this.signature=e,this.fields=n}return(0,u.default)(t,[{key:"toString",value:function(){for(var t="",e=0;e<this.fields.length;e++)e>0&&(t+=", "),t+=this.fields[e];return"Structure("+this.signature+", ["+t+"])"}}]),t}();e.Structure=h;var d=function(){function t(e){(0,a.default)(this,t),this._ch=e,this._byteArraysSupported=!0}return(0,u.default)(t,[{key:"packable",value:function(t,e){var n=this;if(null===t)return function(){return n._ch.writeUInt8(192)};if(!0===t)return function(){return n._ch.writeUInt8(195)};if(!1===t)return function(){return n._ch.writeUInt8(194)};if("number"==typeof t)return function(){return n.packFloat(t)};if("string"==typeof t)return function(){return n.packString(t,e)};if((0,c.isInt)(t))return function(){return n.packInteger(t)};if(t instanceof Int8Array)return function(){return n.packBytes(t,e)};if(t instanceof Array)return function(){n.packListHeader(t.length,e);for(var r=0;r<t.length;r++)n.packable(void 0===t[r]?null:t[r],e)()};if(function(t){if(null==t)return!1;return"function"==typeof t[Symbol.iterator]}(t))return this.packableIterable(t,e);if(t instanceof f.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: ".concat(t),e);if(t instanceof f.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: ".concat(t),e);if(t instanceof f.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: ".concat(t),e);if(t instanceof h){for(var r=[],i=0;i<t.fields.length;i++)r[i]=this.packable(t.fields[i],e);return function(){return n.packStruct(t.signature,r)}}return"object"===(0,o.default)(t)?function(){for(var r=Object.keys(t),i=0,o=0;o<r.length;o++)void 0!==t[r[o]]&&i++;n.packMapHeader(i,e);for(var a=0;a<r.length;a++){var u=r[a];void 0!==t[u]&&(n.packString(u),n.packable(t[u],e)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(t),e)}},{key:"packableIterable",value:function(t,e){try{var n=Array.from(t);return this.packable(n,e)}catch(n){e((0,l.newError)("Cannot pack given iterable, ".concat(n.message,": ").concat(t)))}}},{key:"packStruct",value:function(t,e,n){e=e||[],this.packStructHeader(e.length,t,n);for(var r=0;r<e.length;r++)e[r]()}},{key:"packInteger",value:function(t){var e=t.high,n=t.low;t.greaterThanOrEqual(-16)&&t.lessThan(128)?this._ch.writeInt8(n):t.greaterThanOrEqual(-128)&&t.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(n)):t.greaterThanOrEqual(-32768)&&t.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(n)):t.greaterThanOrEqual(-2147483648)&&t.lessThan(2147483648)?(this._ch.writeUInt8(202),this._ch.writeInt32(n)):(this._ch.writeUInt8(203),this._ch.writeInt32(e),this._ch.writeInt32(n))}},{key:"packFloat",value:function(t){this._ch.writeUInt8(193),this._ch.writeFloat64(t)}},{key:"packString",value:function(t,e){var n=s.utf8.encode(t),r=n.length;r<16?(this._ch.writeUInt8(128|r),this._ch.writeBytes(n)):r<256?(this._ch.writeUInt8(208),this._ch.writeUInt8(r),this._ch.writeBytes(n)):r<65536?(this._ch.writeUInt8(209),this._ch.writeUInt8(r/256>>0),this._ch.writeUInt8(r%256),this._ch.writeBytes(n)):r<4294967296?(this._ch.writeUInt8(210),this._ch.writeUInt8((r/16777216>>0)%256),this._ch.writeUInt8((r/65536>>0)%256),this._ch.writeUInt8((r/256>>0)%256),this._ch.writeUInt8(r%256),this._ch.writeBytes(n)):e((0,l.newError)("UTF-8 strings of size "+r+" are not supported"))}},{key:"packListHeader",value:function(t,e){t<16?this._ch.writeUInt8(144|t):t<256?(this._ch.writeUInt8(212),this._ch.writeUInt8(t)):t<65536?(this._ch.writeUInt8(213),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)):t<4294967296?(this._ch.writeUInt8(214),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)):e((0,l.newError)("Lists of size "+t+" are not supported"))}},{key:"packBytes",value:function(t,e){if(this._byteArraysSupported){this.packBytesHeader(t.length,e);for(var n=0;n<t.length;n++)this._ch.writeInt8(t[n])}else e((0,l.newError)("Byte arrays are not supported by the database this driver is connected to"))}},{key:"packBytesHeader",value:function(t,e){t<256?(this._ch.writeUInt8(204),this._ch.writeUInt8(t)):t<65536?(this._ch.writeUInt8(205),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)):t<4294967296?(this._ch.writeUInt8(206),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)):e((0,l.newError)("Byte arrays of size "+t+" are not supported"))}},{key:"packMapHeader",value:function(t,e){t<16?this._ch.writeUInt8(160|t):t<256?(this._ch.writeUInt8(216),this._ch.writeUInt8(t)):t<65536?(this._ch.writeUInt8(217),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256)):t<4294967296?(this._ch.writeUInt8(218),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)):e((0,l.newError)("Maps of size "+t+" are not supported"))}},{key:"packStructHeader",value:function(t,e,n){t<16?(this._ch.writeUInt8(176|t),this._ch.writeUInt8(e)):t<256?(this._ch.writeUInt8(220),this._ch.writeUInt8(t),this._ch.writeUInt8(e)):t<65536?(this._ch.writeUInt8(221),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256)):n((0,l.newError)("Structures of size "+t+" are not supported"))}},{key:"disableByteArrays",value:function(){this._byteArraysSupported=!1}},{key:"_nonPackableValue",value:function(t,e){return e&&e((0,l.newError)(t,l.PROTOCOL_ERROR)),function(){}}}]),t}();e.Packer=d;var v=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,a.default)(this,t),this._disableLosslessIntegers=e}return(0,u.default)(t,[{key:"unpack",value:function(t){var e=t.readUInt8(),n=240&e,r=15&e;if(192===e)return null;var i=this._unpackBoolean(e);if(null!==i)return i;var o=this._unpackNumberOrInteger(e,t);if(null!==o)return this._disableLosslessIntegers&&(0,c.isInt)(o)?o.toNumberOrInfinity():o;var a=this._unpackString(e,n,r,t);if(null!==a)return a;var u=this._unpackList(e,n,r,t);if(null!==u)return u;var s=this._unpackByteArray(e,t);if(null!==s)return s;var f=this._unpackMap(e,n,r,t);if(null!==f)return f;var h=this._unpackStruct(e,n,r,t);if(null!==h)return h;throw(0,l.newError)("Unknown packed value with marker "+e.toString(16))}},{key:"unpackInteger",value:function(t){var e=t.readUInt8(),n=this._unpackInteger(e,t);if(null==n)throw(0,l.newError)("Unable to unpack integer value with marker "+e.toString(16));return n}},{key:"_unpackBoolean",value:function(t){return 195===t||194!==t&&null}},{key:"_unpackNumberOrInteger",value:function(t,e){return 193===t?e.readFloat64():this._unpackInteger(t,e)}},{key:"_unpackInteger",value:function(t,e){if(t>=0&&t<128)return(0,c.int)(t);if(t>=240&&t<256)return(0,c.int)(t-256);if(200===t)return(0,c.int)(e.readInt8());if(201===t)return(0,c.int)(e.readInt16());if(202===t){var n=e.readInt32();return(0,c.int)(n)}if(203===t){var r=e.readInt32(),i=e.readInt32();return new c.default(i,r)}return null}},{key:"_unpackString",value:function(t,e,n,r){return 128===e?s.utf8.decode(r,n):208===t?s.utf8.decode(r,r.readUInt8()):209===t?s.utf8.decode(r,r.readUInt16()):210===t?s.utf8.decode(r,r.readUInt32()):null}},{key:"_unpackList",value:function(t,e,n,r){return 144===e?this._unpackListWithSize(n,r):212===t?this._unpackListWithSize(r.readUInt8(),r):213===t?this._unpackListWithSize(r.readUInt16(),r):214===t?this._unpackListWithSize(r.readUInt32(),r):null}},{key:"_unpackListWithSize",value:function(t,e){for(var n=[],r=0;r<t;r++)n.push(this.unpack(e));return n}},{key:"_unpackByteArray",value:function(t,e){return 204===t?this._unpackByteArrayWithSize(e.readUInt8(),e):205===t?this._unpackByteArrayWithSize(e.readUInt16(),e):206===t?this._unpackByteArrayWithSize(e.readUInt32(),e):null}},{key:"_unpackByteArrayWithSize",value:function(t,e){for(var n=new Int8Array(t),r=0;r<t;r++)n[r]=e.readInt8();return n}},{key:"_unpackMap",value:function(t,e,n,r){return 160===e?this._unpackMapWithSize(n,r):216===t?this._unpackMapWithSize(r.readUInt8(),r):217===t?this._unpackMapWithSize(r.readUInt16(),r):218===t?this._unpackMapWithSize(r.readUInt32(),r):null}},{key:"_unpackMapWithSize",value:function(t,e){for(var n={},r=0;r<t;r++){n[this.unpack(e)]=this.unpack(e)}return n}},{key:"_unpackStruct",value:function(t,e,n,r){return 176===e?this._unpackStructWithSize(n,r):220===t?this._unpackStructWithSize(r.readUInt8(),r):221===t?this._unpackStructWithSize(r.readUInt16(),r):null}},{key:"_unpackStructWithSize",value:function(t,e){var n=e.readUInt8();return 78===n?this._unpackNode(t,e):82===n?this._unpackRelationship(t,e):114===n?this._unpackUnboundRelationship(t,e):80===n?this._unpackPath(t,e):this._unpackUnknownStruct(n,t,e)}},{key:"_unpackNode",value:function(t,e){return this._verifyStructSize("Node",3,t),new f.Node(this.unpack(e),this.unpack(e),this.unpack(e))}},{key:"_unpackRelationship",value:function(t,e){return this._verifyStructSize("Relationship",5,t),new f.Relationship(this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e))}},{key:"_unpackUnboundRelationship",value:function(t,e){return this._verifyStructSize("UnboundRelationship",3,t),new f.UnboundRelationship(this.unpack(e),this.unpack(e),this.unpack(e))}},{key:"_unpackPath",value:function(t,e){this._verifyStructSize("Path",3,t);for(var n=this.unpack(e),r=this.unpack(e),i=this.unpack(e),o=[],a=n[0],u=0;u<i.length;u+=2){var s=n[i[u+1]],c=i[u],l=void 0;c>0?(l=r[c-1])instanceof f.UnboundRelationship&&(r[c-1]=l=l.bind(a.identity,s.identity)):(l=r[-c-1])instanceof f.UnboundRelationship&&(r[-c-1]=l=l.bind(s.identity,a.identity)),o.push(new f.PathSegment(a,l,s)),a=s}return new f.Path(n[0],n[n.length-1],o)}},{key:"_unpackUnknownStruct",value:function(t,e,n){for(var r=new h(t,[]),i=0;i<e;i++)r.fields.push(this.unpack(n));return r}},{key:"_verifyStructSize",value:function(t,e,n){if(e!==n)throw(0,l.newError)("Wrong struct size for ".concat(t,", expected ").concat(e," but was ").concat(n),l.PROTOCOL_ERROR)}}]),t}();e.Unpacker=v},function(t,e,n){"use strict";var r=n(12),i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(1)),a=i(n(2)),u=i(n(7)),s=i(n(4)),c=i(n(8)),l=i(n(122)),f=r(n(250)),h=function(t){function e(){return(0,o.default)(this,e),(0,u.default)(this,(0,s.default)(e).apply(this,arguments))}return(0,c.default)(e,t),(0,a.default)(e,[{key:"_createPacker",value:function(t){return new f.Packer(t)}},{key:"_createUnpacker",value:function(t){return new f.Unpacker(t)}}]),e}(l.default);e.default=h},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeSecondsForDuration=function(t,e){return(0,a.int)(t).add(R(e,w))},e.normalizeNanosecondsForDuration=function(t){return A(t,w)},e.localTimeToNanoOfDay=function(t,e,n,r){t=(0,a.int)(t),e=(0,a.int)(e),n=(0,a.int)(n),r=(0,a.int)(r);var i=t.multiply(S);return(i=(i=i.add(e.multiply(E))).add(n.multiply(w))).add(r)},e.nanoOfDayToLocalTime=C,e.localDateTimeToEpochSecond=function(t,e,n,r,i,o,u){var s=x(t,e,n),c=function(t,e,n){t=(0,a.int)(t),e=(0,a.int)(e),n=(0,a.int)(n);var r=t.multiply(b);return(r=r.add(e.multiply(m))).add(n)}(r,i,o);return s.multiply(T).add(c)},e.epochSecondAndNanoToLocalDateTime=function(t,e){var n=R(t,T),r=A(t,T).multiply(w).add(e),i=N(n),o=C(r);return new u.LocalDateTime(i.year,i.month,i.day,o.hour,o.minute,o.second,o.nanosecond)},e.dateToEpochDay=x,e.epochDayToDate=N,e.durationToIsoString=function(t,e,n,r){var i=U(t),o=U(e),u=function(t,e){var n,r;t=(0,a.int)(t),e=(0,a.int)(e);var i=t.isNegative(),o=e.greaterThan(0);n=i&&o?t.equals(-1)?"-0":t.add(1).toString():t.toString();o&&(r=j(i?e.negate().add(2*w).modulo(w):e.add(w).modulo(w)));return r?n+r:n}(n,r);return"P".concat(i,"M").concat(o,"DT").concat(u,"S")},e.timeToIsoString=function(t,e,n,r){var i=U(t,2),o=U(e,2),a=U(n,2),u=j(r);return"".concat(i,":").concat(o,":").concat(a).concat(u)},e.timeZoneOffsetToIsoString=function(t){if((t=(0,a.int)(t)).equals(0))return"Z";var e=t.isNegative();e&&(t=t.multiply(-1));var n=e?"-":"+",r=U(t.div(b),2),i=U(t.div(m).modulo(g),2),o=t.modulo(m),u=o.equals(0)?null:U(o,2);return u?"".concat(n).concat(r,":").concat(i,":").concat(u):"".concat(n).concat(r,":").concat(i)},e.dateToIsoString=function(t,e,n){var r=(t=(0,a.int)(t)).isNegative();r&&(t=t.multiply(-1));var i=U(t,4);r&&(i="-"+i);var o=U(e,2),u=U(n,2);return"".concat(i,"-").concat(o,"-").concat(u)},e.totalNanoseconds=function(t,e){e=e||0;var n=t.getMilliseconds()*k;return(0,a.isInt)(e)?e.add(n):e+n},e.timeZoneOffsetInSeconds=function(t){var e=t.getTimezoneOffset();if(0===e)return 0;return-1*e*m},e.assertValidYear=function(t){return P(t,f,"Year")},e.assertValidMonth=function(t){return P(t,h,"Month")},e.assertValidDay=function(t){return P(t,d,"Day")},e.assertValidHour=function(t){return P(t,v,"Hour")},e.assertValidMinute=function(t){return P(t,p,"Minute")},e.assertValidSecond=function(t){return P(t,_,"Second")},e.assertValidNanosecond=function(t){return P(t,y,"Nanosecond")};var i=r(n(1)),o=r(n(2)),a=n(20),u=n(58),s=n(10),c=n(3),l=function(){function t(e,n){(0,i.default)(this,t),this._minNumber=e,this._maxNumber=n,this._minInteger=(0,a.int)(e),this._maxInteger=(0,a.int)(n)}return(0,o.default)(t,[{key:"contains",value:function(t){return(0,a.isInt)(t)?t.greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger):t>=this._minNumber&&t<=this._maxNumber}},{key:"toString",value:function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")}}]),t}(),f=new l(-999999999,999999999),h=new l(1,12),d=new l(1,31),v=new l(0,23),p=new l(0,59),_=new l(0,59),y=new l(0,999999999),g=60,m=60,b=m*g,w=1e9,k=1e6,E=w*m,S=E*g,O=719528,I=146097,T=86400;function C(t){var e=(t=(0,a.int)(t)).div(S),n=(t=t.subtract(e.multiply(S))).div(E),r=(t=t.subtract(n.multiply(E))).div(w),i=t.subtract(r.multiply(w));return new u.LocalTime(e,n,r,i)}function x(t,e,n){t=(0,a.int)(t),e=(0,a.int)(e),n=(0,a.int)(n);var r=t.multiply(365);return r=(r=(r=t.greaterThanOrEqual(0)?r.add(t.add(3).div(4).subtract(t.add(99).div(100)).add(t.add(399).div(400))):r.subtract(t.div(-4).subtract(t.div(-100)).add(t.div(-400)))).add(e.multiply(367).subtract(362).div(12))).add(n.subtract(1)),e.greaterThan(2)&&(r=r.subtract(1),function(t){return!!(t=(0,a.int)(t)).modulo(4).equals(0)&&(!t.modulo(100).equals(0)||!!t.modulo(400).equals(0))}(t)||(r=r.subtract(1))),r.subtract(O)}function N(t){var e=(t=(0,a.int)(t)).add(O).subtract(60),n=(0,a.int)(0);if(e.lessThan(0)){var r=e.add(1).div(I).subtract(1);n=r.multiply(400),e=e.add(r.multiply(-I))}var i=e.multiply(400).add(591).div(I),o=e.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)));o.lessThan(0)&&(i=i.subtract(1),o=e.subtract(i.multiply(365).add(i.div(4)).subtract(i.div(100)).add(i.div(400)))),i=i.add(n);var s=o,c=s.multiply(5).add(2).div(153),l=c.add(2).modulo(12).add(1),f=s.subtract(c.multiply(306).add(5).div(10)).add(1);return i=i.add(c.div(10)),new u.Date(i,l,f)}function P(t,e,n){if((0,s.assertNumberOrInteger)(t,n),!e.contains(t))throw(0,c.newError)("".concat(n," is expected to be in range ").concat(e," but was: ").concat(t));return t}function R(t,e){t=(0,a.int)(t),e=(0,a.int)(e);var n=t.div(e);return t.isPositive()!==e.isPositive()&&n.multiply(e).notEquals(t)&&(n=n.subtract(1)),n}function A(t,e){return t=(0,a.int)(t),e=(0,a.int)(e),t.subtract(R(t,e).multiply(e))}function j(t){return(t=(0,a.int)(t)).equals(0)?"":"."+U(t,9)}function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=(t=(0,a.int)(t)).isNegative();n&&(t=t.negate());var r=t.toString();if(e)for(;r.length<e;)r="0"+r;return n?"-"+r:r}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.SingleConnectionProvider=e.LoadBalancer=e.DirectConnectionProvider=void 0;var i=r(n(7)),o=r(n(4)),a=r(n(8)),u=r(n(1)),s=r(n(2)),c=n(3),l=n(26),f=r(n(79)),h=r(n(128)),d=r(n(259)),v=r(n(260)),p=n(34),_=function(){function t(){(0,u.default)(this,t)}return(0,s.default)(t,[{key:"acquireConnection",value:function(t){throw new Error("Abstract function")}},{key:"_withAdditionalOnErrorCallback",value:function(t,e){return t.catch((function(t){e(t)})),t}}]),t}(),y=function(t){function e(t,n,r){var a;return(0,u.default)(this,e),(a=(0,i.default)(this,(0,o.default)(e).call(this)))._address=t,a._connectionPool=n,a._driverOnErrorCallback=r,a}return(0,a.default)(e,t),(0,s.default)(e,[{key:"acquireConnection",value:function(t){var e=this._connectionPool.acquire(this._address);return this._withAdditionalOnErrorCallback(e,this._driverOnErrorCallback)}}]),e}(_);e.DirectConnectionProvider=y;var g=function(t){function e(t,n,r,a,s,c,l){var f;return(0,u.default)(this,e),(f=(0,i.default)(this,(0,o.default)(e).call(this)))._seedRouter=t,f._routingTable=new h.default,f._rediscovery=new d.default(new v.default(n)),f._connectionPool=r,f._driverOnErrorCallback=c,f._loadBalancingStrategy=a,f._hostNameResolver=s,f._dnsResolver=new p.HostNameResolver,f._log=l,f._useSeedRouter=!0,f}return(0,a.default)(e,t),(0,s.default)(e,[{key:"acquireConnection",value:function(t){var e=this,n=this._freshRoutingTable(t).then((function(n){if(t===l.READ){var r=e._loadBalancingStrategy.selectReader(n.readers);return e._acquireConnectionToServer(r,"read")}if(t===l.WRITE){var i=e._loadBalancingStrategy.selectWriter(n.writers);return e._acquireConnectionToServer(i,"write")}throw(0,c.newError)("Illegal mode "+t)}));return this._withAdditionalOnErrorCallback(n,this._driverOnErrorCallback)}},{key:"forget",value:function(t){this._routingTable.forget(t),this._connectionPool.purge(t)}},{key:"forgetWriter",value:function(t){this._routingTable.forgetWriter(t)}},{key:"_acquireConnectionToServer",value:function(t,e){return t?this._connectionPool.acquire(t):Promise.reject((0,c.newError)("Failed to obtain connection towards ".concat(e," server. Known routing table is: ").concat(this._routingTable),c.SESSION_EXPIRED))}},{key:"_freshRoutingTable",value:function(t){var e=this._routingTable;return e.isStaleFor(t)?(this._log.info("Routing table is stale for ".concat(t,": ").concat(e)),this._refreshRoutingTable(e)):Promise.resolve(e)}},{key:"_refreshRoutingTable",value:function(t){var e=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(e,t):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(e,t)}},{key:"_fetchRoutingTableFromSeedRouterFallbackToKnownRouters",value:function(t,e){var n=this;return this._fetchRoutingTableUsingSeedRouter([],this._seedRouter).then((function(r){return r?(n._useSeedRouter=!1,r):n._fetchRoutingTableUsingKnownRouters(t,e)})).then((function(t){return n._applyRoutingTableIfPossible(t),t}))}},{key:"_fetchRoutingTableFromKnownRoutersFallbackToSeedRouter",value:function(t,e){var n=this;return this._fetchRoutingTableUsingKnownRouters(t,e).then((function(e){return e||n._fetchRoutingTableUsingSeedRouter(t,n._seedRouter)})).then((function(t){return n._applyRoutingTableIfPossible(t),t}))}},{key:"_fetchRoutingTableUsingKnownRouters",value:function(t,n){return this._fetchRoutingTable(t,n).then((function(r){if(r)return r;var i=t.length-1;return e._forgetRouter(n,t,i),null}))}},{key:"_fetchRoutingTableUsingSeedRouter",value:function(t,e){var n=this;return this._resolveSeedRouter(e).then((function(e){var r=e.filter((function(e){return t.indexOf(e)<0}));return n._fetchRoutingTable(r,null)}))}},{key:"_resolveSeedRouter",value:function(t){var e=this;return this._hostNameResolver.resolve(t).then((function(t){return Promise.all(t.map((function(t){return e._dnsResolver.resolve(t)})))})).then((function(t){return[].concat.apply([],t)}))}},{key:"_fetchRoutingTable",value:function(t,n){var r=this;return t.reduce((function(i,o,a){return i.then((function(i){if(i)return i;var u=a-1;return e._forgetRouter(n,t,u),r._createSessionForRediscovery(o).then((function(t){return t?r._rediscovery.lookupRoutingTableOnRouter(t,o).catch((function(t){return r._log.warn("unable to fetch routing table because of an error ".concat(t)),null})):null}))}))}),Promise.resolve(null))}},{key:"_createSessionForRediscovery",value:function(t){return this._connectionPool.acquire(t).then((function(t){var e=new m(t);return new f.default(l.READ,e)})).catch((function(t){if(t&&"Neo.ClientError.Security.Unauthorized"===t.code)throw t;return null}))}},{key:"_applyRoutingTableIfPossible",value:function(t){if(!t)throw(0,c.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(this._routingTable),c.SERVICE_UNAVAILABLE);0===t.writers.length&&(this._useSeedRouter=!0),this._updateRoutingTable(t)}},{key:"_updateRoutingTable",value:function(t){this._connectionPool.keepAll(t.allServers()),this._routingTable=t,this._log.info("Updated routing table ".concat(t))}}],[{key:"_forgetRouter",value:function(t,e,n){var r=e[n];t&&r&&t.forgetRouter(r)}}]),e}(_);e.LoadBalancer=g;var m=function(t){function e(t){var n;return(0,u.default)(this,e),(n=(0,i.default)(this,(0,o.default)(e).call(this)))._connection=t,n}return(0,a.default)(e,t),(0,s.default)(e,[{key:"acquireConnection",value:function(t){var e=this._connection;return this._connection=null,Promise.resolve(e)}}]),e}(_);e.SingleConnectionProvider=m},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(129)),o=r(n(1)),a=r(n(2)),u=n(20),s=n(26),c=function(){function t(e,n,r,i){(0,o.default)(this,t),this.routers=e||[],this.readers=n||[],this.writers=r||[],this.expirationTime=i||(0,u.int)(0)}return(0,a.default)(t,[{key:"forget",value:function(t){this.readers=l(this.readers,t),this.writers=l(this.writers,t)}},{key:"forgetRouter",value:function(t){this.routers=l(this.routers,t)}},{key:"forgetWriter",value:function(t){this.writers=l(this.writers,t)}},{key:"isStaleFor",value:function(t){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||t===s.READ&&0===this.readers.length||t===s.WRITE&&0===this.writers.length}},{key:"allServers",value:function(){return[].concat((0,i.default)(this.routers),(0,i.default)(this.readers),(0,i.default)(this.writers))}},{key:"toString",value:function(){return"RoutingTable["+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")}}]),t}();function l(t,e){return t.filter((function(t){return t.asKey()!==e.asKey()}))}e.default=c},function(t,e,n){var r=n(256),i=n(257),o=n(258);t.exports=function(t){return r(t)||i(t)||o()}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=n(261),a=n(10),u=7687,s=7474,c=7473,l=function t(e,n,r,o,a){(0,i.default)(this,t),this.scheme=e,this.host=n,this.port=r,this.hostAndPort=o,this.query=a};function f(t,e,n){if(!(t=(t||"").trim()))throw new Error("Illegal empty ".concat(e," in URL query '").concat(n,"'"));return t}function h(t){var e="["===t.charAt(0),n="]"===t.charAt(t.length-1);if(e||n){if(e&&n)return t;throw new Error("Illegal IPv6 address ".concat(t))}return"[".concat(t,"]")}function d(t){return"http"===t?s:"https"===t?c:u}var v={parseDatabaseUrl:function(t){(0,a.assertString)(t,"URL");var e=function(t){if(-1===(t=t.trim()).indexOf("://"))return{schemeMissing:!0,url:"none://".concat(t)};return{schemeMissing:!1,url:t}}(t),n=(0,o.parse)(e.url),r=e.schemeMissing?null:function(t){if(t)return":"===(t=t.trim()).charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t;return null}(n.scheme),i=function(t,e){if(!t)throw new Error("Unable to extract host from ".concat(e));return t.trim()}(n.host),u=function(t){if(!t)throw new Error("Illegal host ".concat(t));return t.indexOf(":")>=0?h(t):t}(i),s=function(t,e){var n=parseInt(t,10);return 0===n||n?n:d(e)}(n.port,r),c="".concat(u,":").concat(s),v=function(t,e){var n=function(t){(t=(t||"").trim())&&"?"===t.charAt(0)&&(t=t.substring(1,t.length));return t}(t),r={};n&&n.split("&").forEach((function(t){var n=t.split("=");if(2!==n.length)throw new Error("Invalid parameters: '".concat(n,"' in URL '").concat(e,"'."));var i=f(n[0],"key",e),o=f(n[1],"value",e);if(r[i])throw new Error("Duplicated query parameters with key '".concat(i,"' in URL '").concat(e,"'"));r[i]=o}));return r}(n.query,t);return new l(r,i,s,c,v)},defaultPortForScheme:d,formatIPv4Address:function(t,e){return"".concat(t,":").concat(e)},formatIPv6Address:function(t,e){var n=h(t);return"".concat(n,":").concat(e)}};e.default=v},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=n(3),u=function(){function t(e,n,r){(0,i.default)(this,t),this._errorCode=e,this._handleUnavailability=n||s,this._handleWriteFailure=r||s}return(0,o.default)(t,[{key:"errorCode",value:function(){return this._errorCode}},{key:"handleAndTransformError",value:function(t,e){return function(t){if(t)return t.code===a.SESSION_EXPIRED||t.code===a.SERVICE_UNAVAILABLE||"Neo.TransientError.General.DatabaseUnavailable"===t.code;return!1}(t)?this._handleUnavailability(t,e):function(t){if(t)return"Neo.ClientError.Cluster.NotALeader"===t.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===t.code;return!1}(t)?this._handleWriteFailure(t,e):t}}]),t}();function s(t){return t}e.default=u},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=function(){function t(e){(0,i.default)(this,t),this._offset=e||0}return(0,o.default)(t,[{key:"next",value:function(t){if(0===t)return-1;var e=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),e%t}}]),t}();e.default=a},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=function(){function t(){(0,i.default)(this,t)}return(0,o.default)(t,[{key:"selectReader",value:function(t){throw new Error("Abstract function")}},{key:"selectWriter",value:function(t){throw new Error("Abstract function")}}]),t}();e.default=a},function(t,e,n){t.exports=n(140)},function(t,e,n){t.exports=n(152)},function(t,e,n){var r=n(189),i=n(192);function o(t){return(o="function"==typeof i&&"symbol"==typeof r?function(t){return typeof t}:function(t){return t&&"function"==typeof i&&t.constructor===i&&t!==i.prototype?"symbol":typeof t})(t)}function a(e){return"function"==typeof i&&"symbol"===o(r)?t.exports=a=function(t){return o(t)}:t.exports=a=function(t){return t&&"function"==typeof i&&t.constructor===i&&t!==i.prototype?"symbol":o(t)},a(e)}t.exports=a},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var r=n(113);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r(t,i.key,i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return P}));var r=n(134),i=n.n(r),o=n(135),a=n.n(o),u=n(84),s=n.n(u),c=n(44),l=n.n(c),f=n(13),h=n.n(f),d=n(85),v=n.n(d),p=n(136),_=n.n(p),y=n(60),g=n.n(y),m=n(23),b=n.n(m),w=n(35),k=n.n(w),E=n(137),S=n.n(E),O=n(138),I=n.n(O),T=n(16),C=n.n(T),x=n(17),N=n.n(x),P=function(){function t(e){var n=this;S()(this,t),C()(this,"_nodes",{}),C()(this,"_edges",{}),C()(this,"_groups",{}),C()(this,"instance",{}),C()(this,"hide_nodes",{}),C()(this,"show_nodes",{}),C()(this,"defaults",{neo4jUri:"bolt://localhost:7687",neo4jUser:"neo4j",neo4jPassword:"neo4j",encrypted:"ENCRYPTION_OFF",trust:"TRUST_ALL_CERTIFICATES",initialQuery:"MATCH (n)-[r]->(m) RETURN * limit 200",domId:"echarts"}),C()(this,"dispose",(function(){n.instance.dispose()})),C()(this,"_fold",(function(t){if(!n.hide_nodes[t]){n.hide_nodes[t]=n._nodes[t],delete n.show_nodes[t];var e,r=n._nodes[t];if(r.sub_node_ids)k()(e=b()(r.sub_node_ids)).call(e,(function(t){return n._fold(t)}))}})),C()(this,"_option",{animation:!0,title:{text:"Les Miserables",subtext:"Default layout",top:"bottom",left:"right"},tooltip:{trigger:"item"},legend:[],series:[{focusNodeAdjacency:!0,edgeSymbol:["circle","arrow"],symbolSize:55,name:"Les Miserables",type:"graph",layout:"force",data:[],edges:[],categories:[],roam:!0,itemStyle:{normal:{borderColor:"#fff",borderWidth:1,shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.3)"}},force:{initLayout:"circular",layoutAnimation:!0,repulsion:1e3,gravity:0,edgeLength:[30,1e4]},circular:{rotateLabel:!0},draggable:!0,label:{show:!0,position:"inside",textStyle:{fontWeight:"bold",fontSize:12}},edgeLabel:{show:!0,position:"middle",formatter:function(t){return t.data.label}},lineStyle:{color:"source",curveness:.3},tooltip:{formatter:function(t){return t.data.title}}}]}),this._init(e)}return I()(t,[{key:"_init",value:function(t){var e=this.defaults;this._config=t,this._encrypted=t.encrypted||e.encrypted,this._trust=t.trust||e.trust,this._driver=N.a.driver(t.server_url||e.neo4jUri,N.a.auth.basic(t.server_user||e.neo4jUser,t.server_password||e.neo4jPassword),{encrypted:this._encrypted,trust:this._trust}),this._initEcharts()}},{key:"_initEcharts",value:function(){var t=this;this._consoleLog(this._config.id||this.defaults.domId);var e=this.instance=this._config.instance;e.setOption(this._config.option||this._option),e.on("click",(function(n){if("node"===n.dataType){t._consoleLog(n);var r=n.data.sub_node_ids;if(r){var i;t.showL();var o=t.instance.getOption(),a=[],u=0;if(t._consoleLog(t.hide_nodes),k()(i=b()(r)).call(i,(function(e){var n=t.hide_nodes[e];n&&(u++,a.push(n))})),u>0){t._consoleLog("需要展开的节点"),t._consoleLog(a);var s=o.series[0].data;k()(a).call(a,(function(e){t._consoleLog("expand ".concat(e.name));var n=e.id;t.show_nodes[n]=e,s.push(e),delete t.hide_nodes[n]}))}else{var c;t._consoleLog("需要隐藏的节点"),t._consoleLog(r),k()(c=b()(r)).call(c,(function(e){t._fold(e)})),o.series[0].data=b()(t.show_nodes)}e.setOption(o),t.hideL()}}}))}},{key:"_clear",value:function(){this._consoleLog("开始清理"),this.hide_nodes={},this.show_nodes={},this._nodes={},this._edges={},this._groups={},this._consoleLog("清理完毕")}},{key:"_addNode",value:function(t){this._nodes[t.id]=t,t.group&&(this._groups[t.group]={name:t.group})}},{key:"_addEdge",value:function(t){this._edges[t.id]=t}},{key:"buildNodeVisObject",value:function(t){var e,n,r,i,o,a,u,s,c,l,f,d,p,y,m,b,w,E;return h.a.async((function(S){for(;;)switch(S.prev=S.next){case 0:if(e={},n=t.labels[0],r=this._config&&this._config.labels&&this._config.labels[n],i=r&&r.caption,o=r&&r.size,a=r&&r.sizeCypher,u=r&&r.community,e.id=t.identity.toInt(),!a){S.next=34;break}return s=this._driver.session(),S.next=12,h.a.awrap(s.run(a,{id:N.a.int(e.id)}));case 12:for(c=S.sent,l=!0,f=!1,d=void 0,S.prev=16,p=g()(c.records);!(l=(y=p.next()).done);l=!0)m=y.value,k()(m).call(m,(function(t){"number"==typeof t?e.value=t:N.a.isInt(t)&&(e.value=t.toNumber())}));S.next=24;break;case 20:S.prev=20,S.t0=S.catch(16),f=!0,d=S.t0;case 24:S.prev=24,S.prev=25,l||null==p.return||p.return();case 27:if(S.prev=27,!f){S.next=30;break}throw d;case 30:return S.finish(27);case 31:return S.finish(24);case 32:S.next=35;break;case 34:"number"==typeof o?e.value=o:(b=t.properties[o])&&"number"==typeof b?e.value=b:b&&"object"===_()(b)&&N.a.isInt(b)&&b.inSafeRange()?e.value=b.toNumber():e.value=1;case 35:if(e.label="function"==typeof i?i(t):t.properties[i]||n||"",u)try{t.properties[u]?e.group=t.properties[u].toNumber()||n||0:e.group=0}catch(t){e.group=0}else e.group=n;for(w in e.title="",t.properties)t.properties.hasOwnProperty(w)&&(e.title+=v()(E="<strong>".concat(w,":</strong> ")).call(E,t.properties[w],"<br>"));return S.abrupt("return",e);case 40:case"end":return S.stop()}}),null,this,[[16,20,24,32],[25,,27,31]])}},{key:"buildEdgeVisObject",value:function(t){var e=this._config&&this._config.relationships&&this._config.relationships[t.type],n=e&&e.thickness,r=e&&e.caption,i={};for(var o in i.id=t.identity.toInt(),i.from=t.start.toInt(),i.to=t.end.toInt(),i.source=t.start.toString(),i.target=t.end.toString(),i.title="",t.properties){var a;if(t.properties.hasOwnProperty(o))i.title+=v()(a="<strong>".concat(o,":</strong> ")).call(a,t.properties[o],"<br>")}return i.value=n&&"string"==typeof n?t.properties[n]:n&&"number"==typeof n?n:1,i.label="boolean"==typeof r?r?t.type:"":r&&"string"==typeof r?t.properties[r]||"":t.type,i}},{key:"_consoleLog",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";("log"!==e||this._config.console_debug)&&console[e](t)}},{key:"hideL",value:function(){this.instance.hideLoading()}},{key:"showL",value:function(){this.instance.showLoading({text:"数据获取中",effect:"whirling"})}},{key:"query",value:function(t){var e=this,n=this._driver.session(),r=[];n.run(t,{limit:30}).subscribe({onNext:function(t){var n;0;var i=l()(n=b()(t.toObject())).call(n,(function(t){var n,r,i,o,a,u,s,c,l,f,d,v,p,_,y,m,b,w;return h.a.async((function(k){for(;;)switch(k.prev=k.next){case 0:if(!(t instanceof N.a.types.Node)){k.next=7;break}return k.next=3,h.a.awrap(e.buildNodeVisObject(t));case 3:n=k.sent;try{e._addNode(n)}catch(t){e._consoleLog(t,"error")}k.next=91;break;case 7:if(!(t instanceof N.a.types.Relationship)){k.next=12;break}r=e.buildEdgeVisObject(t),e._addEdge(r),k.next=91;break;case 12:if(!(t instanceof N.a.types.Path)){k.next=58;break}return k.next=15,h.a.awrap(e.buildNodeVisObject(t.start));case 15:return i=k.sent,k.next=18,h.a.awrap(e.buildNodeVisObject(t.end));case 18:o=k.sent,e._addNode(i),e._addNode(o),a=!0,u=!1,s=void 0,k.prev=24,c=g()(t.segments);case 26:if(a=(l=c.next()).done){k.next=42;break}return f=l.value,k.t0=e,k.next=31,h.a.awrap(e.buildNodeVisObject(f.start));case 31:return k.t1=k.sent,k.t0._addNode.call(k.t0,k.t1),k.t2=e,k.next=36,h.a.awrap(e.buildNodeVisObject(f.end));case 36:k.t3=k.sent,k.t2._addNode.call(k.t2,k.t3),e._addEdge(e.buildEdgeVisObject(f.relationship));case 39:a=!0,k.next=26;break;case 42:k.next=48;break;case 44:k.prev=44,k.t4=k.catch(24),u=!0,s=k.t4;case 48:k.prev=48,k.prev=49,a||null==c.return||c.return();case 51:if(k.prev=51,!u){k.next=54;break}throw s;case 54:return k.finish(51);case 55:return k.finish(48);case 56:k.next=91;break;case 58:if(!(t instanceof Array)){k.next=91;break}d=!0,v=!1,p=void 0,k.prev=62,_=g()(t);case 64:if(d=(y=_.next()).done){k.next=77;break}if(!((m=y.value)instanceof N.a.types.Node)){k.next=73;break}return k.next=69,h.a.awrap(e.buildNodeVisObject(m));case 69:b=k.sent,e._addNode(b),k.next=74;break;case 73:m instanceof N.a.types.Relationship&&(w=e.buildEdgeVisObject(m),e._addEdge(w));case 74:d=!0,k.next=64;break;case 77:k.next=83;break;case 79:k.prev=79,k.t5=k.catch(62),v=!0,p=k.t5;case 83:k.prev=83,k.prev=84,d||null==_.return||_.return();case 86:if(k.prev=86,!v){k.next=89;break}throw p;case 89:return k.finish(86);case 90:return k.finish(83);case 91:case"end":return k.stop()}}),null,null,[[24,44,48,56],[49,,51,55],[62,79,83,91],[84,,86,90]])}));r.push(s.a.all(i))},onCompleted:function(){var t,o,u,c,f,d,v,p,_,y,g,m,w,k,E,S,O;return h.a.async((function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,h.a.awrap(s.a.all(r));case 2:for(d in n.close(),e._consoleLog("开始处理数据"),o=e.show_nodes,u=e.hide_nodes,c=e._nodes,f=e._edges)v=f[d],p=c[v.source],_=c[v.target],(y=p.sub_node_ids)||(y=p.sub_node_ids={}),y[_.id]=_.id;for(k in g=l()(t=b()(f)).call(t,(function(t){return{target:t.target,source:t.source,label:t.label}})),m=b()(e._groups),w=l()(g).call(g,(function(t){return t.target})),c)(E=c[k]).name=E.label,E.value=E.id,E.group&&(E.category=a()(m).call(m,(function(t){return t.name===E.group}))),i()(w).call(w,E.id.toString())?u[E.id]=E:o[E.id]=E;e._consoleLog(o),e._consoleLog(e.show_nodes),(S=e.instance.getOption()).legend=[{data:l()(m).call(m,(function(t){return t.name}))}],O=b()(o),S.series[0].data=O,S.series[0].edges=g,S.series[0].categories=m,e._consoleLog("数据梳理完成"),e._consoleLog(S),e.instance.setOption(S),e.hideL();case 25:case"end":return I.stop()}}))},onError:function(t){e._consoleLog(t,"error")}})}},{key:"render",value:function(t){this._consoleLog("开始查询"),this._clear(),this.showL(),this.query(t)}}]),t}()},function(t,e,n){t.exports=n(141)},function(t,e,n){var r=n(142),i=n(145),o=Array.prototype,a=String.prototype;t.exports=function(t){var e=t.includes;return t===o||t instanceof Array&&e===o.includes?r:"string"==typeof t||t===a||t instanceof String&&e===a.includes?i:e}},function(t,e,n){n(143);var r=n(29);t.exports=r("Array").includes},function(t,e,n){"use strict";var r=n(11),i=n(90).includes,o=n(65);r({target:"Array",proto:!0},{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},function(t,e,n){var r=n(64),i=Math.max,o=Math.min;t.exports=function(t,e){var n=r(t);return n<0?i(n+e,0):o(n,e)}},function(t,e,n){n(146);var r=n(29);t.exports=r("String").includes},function(t,e,n){"use strict";var r=n(11),i=n(147),o=n(45);r({target:"String",proto:!0,forced:!n(151)("includes")},{includes:function(t){return!!~String(o(this)).indexOf(i(t),arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(148);t.exports=function(t){if(r(t))throw TypeError("The method doesn't accept regular expressions");return t}},function(t,e,n){var r=n(15),i=n(28),o=n(5)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(9),i=n(150),o=r["__core-js_shared__"]||i("__core-js_shared__",{});t.exports=o},function(t,e,n){var r=n(9),i=n(22);t.exports=function(t,e){try{i(r,t,e)}catch(n){r[t]=e}return e}},function(t,e,n){var r=n(5)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(t){}}return!1}},function(t,e,n){t.exports=n(153)},function(t,e,n){var r=n(154),i=Array.prototype;t.exports=function(t){var e=t.findIndex;return t===i||t instanceof Array&&e===i.findIndex?r:e}},function(t,e,n){n(155);var r=n(29);t.exports=r("Array").findIndex},function(t,e,n){"use strict";var r=n(11),i=n(49).findIndex,o=n(65),a=!0;"findIndex"in[]&&Array(1).findIndex((function(){a=!1})),r({target:"Array",proto:!0,forced:a},{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),o("findIndex")},function(t,e,n){t.exports=n(157)},function(t,e,n){n(93),n(69),n(54),n(169),n(178),n(179);var r=n(24);t.exports=r.Promise},function(t,e,n){var r=n(64),i=n(45),o=function(t){return function(e,n){var o,a,u=String(i(e)),s=r(n),c=u.length;return s<0||s>=c?t?"":void 0:(o=u.charCodeAt(s))<55296||o>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):o:t?u.slice(s,s+2):a-56320+(o-55296<<10)+65536}};t.exports={codeAt:o(!1),charAt:o(!0)}},function(t,e,n){var r=n(9),i=n(160),o=r.WeakMap;t.exports="function"==typeof o&&/native code/.test(i.call(o))},function(t,e,n){var r=n(38);t.exports=r("native-function-to-string",Function.toString)},function(t,e,n){"use strict";var r=n(95).IteratorPrototype,i=n(97),o=n(36),a=n(32),u=n(33),s=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=i(r,{next:o(1,n)}),a(t,c,!1,!0),u[c]=s,t}},function(t,e,n){var r=n(14);t.exports=!r((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},function(t,e,n){var r=n(21),i=n(25),o=n(19),a=n(70);t.exports=r?Object.defineProperties:function(t,e){o(t);for(var n,r=a(e),u=r.length,s=0;u>s;)i.f(t,n=r[s++],e[n]);return t}},function(t,e,n){"use strict";var r=n(72),i=n(73);t.exports=r?{}.toString:function(){return"[object "+i(this)+"]"}},function(t,e,n){var r=n(19),i=n(166);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,o){return r(n),i(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},function(t,e,n){var r=n(15);t.exports=function(t){if(!r(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},function(t,e,n){"use strict";var r=n(27),i=n(65),o=n(33),a=n(51),u=n(94),s=a.set,c=a.getterFor("Array Iterator");t.exports=u(Array,"Array",(function(t,e){s(this,{type:"Array Iterator",target:r(t),index:0,kind:e})}),(function(){var t=c(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(t,e,n){"use strict";var r,i,o,a,u=n(11),s=n(30),c=n(9),l=n(31),f=n(100),h=n(39),d=n(170),v=n(38),p=n(32),_=n(171),y=n(15),g=n(37),m=n(172),b=n(28),w=n(101),k=n(175),E=n(103),S=n(104).set,O=n(176),I=n(107),T=n(177),C=n(74),x=n(108),N=n(51),P=n(89),R=n(5),A=n(75),j=R("species"),U="Promise",D=N.get,L=N.set,M=N.getterFor(U),F=f,V=c.TypeError,B=c.document,q=c.process,z=v("inspectSource"),H=l("fetch"),W=C.f,G=W,Z="process"==b(q),K=!!(B&&B.createEvent&&c.dispatchEvent),J=P(U,(function(){if(!(z(F)!==String(F))){if(66===A)return!0;if(!Z&&"function"!=typeof PromiseRejectionEvent)return!0}if(s&&!F.prototype.finally)return!0;if(A>=51&&/native code/.test(F))return!1;var t=F.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[j]=e,!(t.then((function(){}))instanceof e)})),Y=J||!k((function(t){F.all(t).catch((function(){}))})),X=function(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e},$=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;O((function(){for(var i=e.value,o=1==e.state,a=0;r.length>a;){var u,s,c,l=r[a++],f=o?l.ok:l.fail,h=l.resolve,d=l.reject,v=l.domain;try{f?(o||(2===e.rejection&&nt(t,e),e.rejection=1),!0===f?u=i:(v&&v.enter(),u=f(i),v&&(v.exit(),c=!0)),u===l.promise?d(V("Promise-chain cycle")):(s=X(u))?s.call(u,h,d):h(u)):d(i)}catch(t){v&&!c&&v.exit(),d(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&tt(t,e)}))}},Q=function(t,e,n){var r,i;K?((r=B.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),c.dispatchEvent(r)):r={promise:e,reason:n},(i=c["on"+t])?i(r):"unhandledrejection"===t&&T("Unhandled promise rejection",n)},tt=function(t,e){S.call(c,(function(){var n,r=e.value;if(et(e)&&(n=x((function(){Z?q.emit("unhandledRejection",r,t):Q("unhandledrejection",t,r)})),e.rejection=Z||et(e)?2:1,n.error))throw n.value}))},et=function(t){return 1!==t.rejection&&!t.parent},nt=function(t,e){S.call(c,(function(){Z?q.emit("rejectionHandled",t):Q("rejectionhandled",t,e.value)}))},rt=function(t,e,n,r){return function(i){t(e,n,i,r)}},it=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,$(t,e,!0))},ot=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw V("Promise can't be resolved itself");var i=X(n);i?O((function(){var r={done:!1};try{i.call(n,rt(ot,t,r,e),rt(it,t,r,e))}catch(n){it(t,r,n,e)}})):(e.value=n,e.state=1,$(t,e,!1))}catch(n){it(t,{done:!1},n,e)}}};J&&(F=function(t){m(this,F,U),g(t),r.call(this);var e=D(this);try{t(rt(ot,this,e),rt(it,this,e))}catch(t){it(this,e,t)}},(r=function(t){L(this,{type:U,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=d(F.prototype,{then:function(t,e){var n=M(this),r=W(E(this,F));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Z?q.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&$(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new r,e=D(t);this.promise=t,this.resolve=rt(ot,t,e),this.reject=rt(it,t,e)},C.f=W=function(t){return t===F||t===o?new i(t):G(t)},s||"function"!=typeof f||(a=f.prototype.then,h(f.prototype,"then",(function(t,e){var n=this;return new F((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof H&&u({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return I(F,H.apply(c,arguments))}}))),u({global:!0,wrap:!0,forced:J},{Promise:F}),p(F,U,!1,!0),_(U),o=l(U),u({target:U,stat:!0,forced:J},{reject:function(t){var e=W(this);return e.reject.call(void 0,t),e.promise}}),u({target:U,stat:!0,forced:s||J},{resolve:function(t){return I(s&&this===o?F:this,t)}}),u({target:U,stat:!0,forced:Y},{all:function(t){var e=this,n=W(e),r=n.resolve,i=n.reject,o=x((function(){var n=g(e.resolve),o=[],a=0,u=1;w(t,(function(t){var s=a++,c=!1;o.push(void 0),u++,n.call(e,t).then((function(t){c||(c=!0,o[s]=t,--u||r(o))}),i)})),--u||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=W(e),r=n.reject,i=x((function(){var i=g(e.resolve);w(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(t,e,n){var r=n(39);t.exports=function(t,e,n){for(var i in e)n&&n.unsafe&&t[i]?t[i]=e[i]:r(t,i,e[i],n);return t}},function(t,e,n){"use strict";var r=n(31),i=n(25),o=n(5),a=n(21),u=o("species");t.exports=function(t){var e=r(t),n=i.f;a&&e&&!e[u]&&n(e,u,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},function(t,e,n){var r=n(5),i=n(33),o=r("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||a[o]===t)}},function(t,e,n){var r=n(19);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(5)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},t(o)}catch(t){}return n}},function(t,e,n){var r,i,o,a,u,s,c,l,f=n(9),h=n(61).f,d=n(28),v=n(104).set,p=n(105),_=f.MutationObserver||f.WebKitMutationObserver,y=f.process,g=f.Promise,m="process"==d(y),b=h(f,"queueMicrotask"),w=b&&b.value;w||(r=function(){var t,e;for(m&&(t=y.domain)&&t.exit();i;){e=i.fn,i=i.next;try{e()}catch(t){throw i?a():o=void 0,t}}o=void 0,t&&t.enter()},m?a=function(){y.nextTick(r)}:_&&!p?(u=!0,s=document.createTextNode(""),new _(r).observe(s,{characterData:!0}),a=function(){s.data=u=!u}):g&&g.resolve?(c=g.resolve(void 0),l=c.then,a=function(){l.call(c,r)}):a=function(){v.call(f,r)}),t.exports=w||function(t){var e={fn:t,next:void 0};o&&(o.next=e),i||(i=e,a()),o=e}},function(t,e,n){var r=n(9);t.exports=function(t,e){var n=r.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},function(t,e,n){"use strict";var r=n(11),i=n(37),o=n(74),a=n(108),u=n(101);r({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=o.f(e),r=n.resolve,s=n.reject,c=a((function(){var n=i(e.resolve),o=[],a=0,s=1;u(t,(function(t){var i=a++,u=!1;o.push(void 0),s++,n.call(e,t).then((function(t){u||(u=!0,o[i]={status:"fulfilled",value:t},--s||r(o))}),(function(t){u||(u=!0,o[i]={status:"rejected",reason:t},--s||r(o))}))})),--s||r(o)}));return c.error&&s(c.value),n.promise}})},function(t,e,n){"use strict";var r=n(11),i=n(30),o=n(100),a=n(31),u=n(103),s=n(107),c=n(39);r({target:"Promise",proto:!0,real:!0},{finally:function(t){var e=u(this,a("Promise")),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then((function(){return n}))}:t,n?function(n){return s(e,t()).then((function(){throw n}))}:t)}}),i||"function"!=typeof o||o.prototype.finally||c(o.prototype,"finally",a("Promise").prototype.finally)},function(t,e,n){t.exports=n(181)},function(t,e,n){var r=n(182),i=Array.prototype;t.exports=function(t){var e=t.map;return t===i||t instanceof Array&&e===i.map?r:e}},function(t,e,n){n(183);var r=n(29);t.exports=r("Array").map},function(t,e,n){"use strict";var r=n(11),i=n(49).map;r({target:"Array",proto:!0,forced:!n(109)("map")},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,n,r){var i=e&&e.prototype instanceof p?e:p,o=Object.create(i.prototype),a=new T(r||[]);return o._invoke=function(t,e,n){var r=l;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return x()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=S(a,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var s=c(t,e,n);if("normal"===s.type){if(r=n.done?d:f,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=d,n.method="throw",n.arg=s.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var l="suspendedStart",f="suspendedYield",h="executing",d="completed",v={};function p(){}function _(){}function y(){}var g={};g[o]=function(){return this};var m=Object.getPrototypeOf,b=m&&m(m(C([])));b&&b!==n&&r.call(b,o)&&(g=b);var w=y.prototype=p.prototype=Object.create(g);function k(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function E(t){var e;this._invoke=function(n,i){function o(){return new Promise((function(e,o){!function e(n,i,o,a){var u=c(t[n],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(l).then((function(t){s.value=t,o(s)}),(function(t){return e("throw",t,o,a)}))}a(u.arg)}(n,i,e,o)}))}return e=e?e.then(o,o):o()}}function S(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function C(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:x}}function x(){return{value:e,done:!0}}return _.prototype=w.constructor=y,y.constructor=_,y[u]=_.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},k(E.prototype),E.prototype[a]=function(){return this},t.AsyncIterator=E,t.async=function(e,n,r,i){var o=new E(s(e,n,r,i));return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},k(w),w[u]="Generator",w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){t.exports=n(186)},function(t,e,n){var r=n(187),i=Array.prototype;t.exports=function(t){var e=t.concat;return t===i||t instanceof Array&&e===i.concat?r:e}},function(t,e,n){n(110);var r=n(29);t.exports=r("Array").concat},function(t,e,n){"use strict";var r=n(46),i=n(25),o=n(36);t.exports=function(t,e,n){var a=r(e);a in t?i.f(t,a,o(0,n)):t[a]=n}},function(t,e,n){t.exports=n(190)},function(t,e,n){t.exports=n(191)},function(t,e,n){n(111),n(69),n(54);var r=n(76);t.exports=r.f("iterator")},function(t,e,n){t.exports=n(193)},function(t,e,n){t.exports=n(194),n(213),n(214),n(215),n(216),n(217)},function(t,e,n){n(110),n(93),n(195),n(198),n(199),n(200),n(201),n(111),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(209),n(210),n(211),n(212);var r=n(24);t.exports=r.Symbol},function(t,e,n){"use strict";var r=n(11),i=n(9),o=n(31),a=n(30),u=n(21),s=n(67),c=n(91),l=n(14),f=n(18),h=n(68),d=n(15),v=n(19),p=n(50),_=n(27),y=n(46),g=n(36),m=n(97),b=n(70),w=n(112),k=n(196),E=n(197),S=n(61),O=n(25),I=n(62),T=n(22),C=n(39),x=n(38),N=n(52),P=n(53),R=n(66),A=n(5),j=n(76),U=n(6),D=n(32),L=n(51),M=n(49).forEach,F=N("hidden"),V=A("toPrimitive"),B=L.set,q=L.getterFor("Symbol"),z=Object.prototype,H=i.Symbol,W=o("JSON","stringify"),G=S.f,Z=O.f,K=k.f,J=I.f,Y=x("symbols"),X=x("op-symbols"),$=x("string-to-symbol-registry"),Q=x("symbol-to-string-registry"),tt=x("wks"),et=i.QObject,nt=!et||!et.prototype||!et.prototype.findChild,rt=u&&l((function(){return 7!=m(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=G(z,e);r&&delete z[e],Z(t,e,n),r&&t!==z&&Z(z,e,r)}:Z,it=function(t,e){var n=Y[t]=m(H.prototype);return B(n,{type:"Symbol",tag:t,description:e}),u||(n.description=e),n},ot=s&&"symbol"==typeof H.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof H},at=function(t,e,n){t===z&&at(X,e,n),v(t);var r=y(e,!0);return v(n),f(Y,r)?(n.enumerable?(f(t,F)&&t[F][r]&&(t[F][r]=!1),n=m(n,{enumerable:g(0,!1)})):(f(t,F)||Z(t,F,g(1,{})),t[F][r]=!0),rt(t,r,n)):Z(t,r,n)},ut=function(t,e){v(t);var n=_(e),r=b(n).concat(ft(n));return M(r,(function(e){u&&!st.call(n,e)||at(t,e,n[e])})),t},st=function(t){var e=y(t,!0),n=J.call(this,e);return!(this===z&&f(Y,e)&&!f(X,e))&&(!(n||!f(this,e)||!f(Y,e)||f(this,F)&&this[F][e])||n)},ct=function(t,e){var n=_(t),r=y(e,!0);if(n!==z||!f(Y,r)||f(X,r)){var i=G(n,r);return!i||!f(Y,r)||f(n,F)&&n[F][r]||(i.enumerable=!0),i}},lt=function(t){var e=K(_(t)),n=[];return M(e,(function(t){f(Y,t)||f(P,t)||n.push(t)})),n},ft=function(t){var e=t===z,n=K(e?X:_(t)),r=[];return M(n,(function(t){!f(Y,t)||e&&!f(z,t)||r.push(Y[t])})),r};(s||(C((H=function(){if(this instanceof H)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=R(t),n=function(t){this===z&&n.call(X,t),f(this,F)&&f(this[F],e)&&(this[F][e]=!1),rt(this,e,g(1,t))};return u&&nt&&rt(z,e,{configurable:!0,set:n}),it(e,t)}).prototype,"toString",(function(){return q(this).tag})),I.f=st,O.f=at,S.f=ct,w.f=k.f=lt,E.f=ft,u&&(Z(H.prototype,"description",{configurable:!0,get:function(){return q(this).description}}),a||C(z,"propertyIsEnumerable",st,{unsafe:!0}))),c||(j.f=function(t){return it(A(t),t)}),r({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:H}),M(b(tt),(function(t){U(t)})),r({target:"Symbol",stat:!0,forced:!s},{for:function(t){var e=String(t);if(f($,e))return $[e];var n=H(e);return $[e]=n,Q[n]=e,n},keyFor:function(t){if(!ot(t))throw TypeError(t+" is not a symbol");if(f(Q,t))return Q[t]},useSetter:function(){nt=!0},useSimple:function(){nt=!1}}),r({target:"Object",stat:!0,forced:!s,sham:!u},{create:function(t,e){return void 0===e?m(t):ut(m(t),e)},defineProperty:at,defineProperties:ut,getOwnPropertyDescriptor:ct}),r({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:lt,getOwnPropertySymbols:ft}),r({target:"Object",stat:!0,forced:l((function(){E.f(1)}))},{getOwnPropertySymbols:function(t){return E.f(p(t))}}),W)&&r({target:"JSON",stat:!0,forced:!s||l((function(){var t=H();return"[null]"!=W([t])||"{}"!=W({a:t})||"{}"!=W(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(d(e)||void 0!==t)&&!ot(t))return h(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ot(e))return e}),i[1]=e,W.apply(null,i)}});H.prototype[V]||T(H.prototype,V,H.prototype.valueOf),D(H,"Symbol"),P[F]=!0},function(t,e,n){var r=n(27),i=n(112).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){n(6)("asyncIterator")},function(t,e){},function(t,e,n){n(6)("hasInstance")},function(t,e,n){n(6)("isConcatSpreadable")},function(t,e,n){n(6)("match")},function(t,e,n){n(6)("matchAll")},function(t,e,n){n(6)("replace")},function(t,e,n){n(6)("search")},function(t,e,n){n(6)("species")},function(t,e,n){n(6)("split")},function(t,e,n){n(6)("toPrimitive")},function(t,e,n){n(6)("toStringTag")},function(t,e,n){n(6)("unscopables")},function(t,e,n){n(32)(Math,"Math",!0)},function(t,e,n){var r=n(9);n(32)(r.JSON,"JSON",!0)},function(t,e,n){n(6)("asyncDispose")},function(t,e,n){n(6)("dispose")},function(t,e,n){n(6)("observable")},function(t,e,n){n(6)("patternMatch")},function(t,e,n){n(6)("replaceAll")},function(t,e,n){n(54),n(69),t.exports=n(219)},function(t,e,n){var r=n(19),i=n(102);t.exports=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return r(e.call(t))}},function(t,e,n){t.exports=n(221)},function(t,e,n){n(222);var r=n(24);t.exports=r.Object.values},function(t,e,n){var r=n(11),i=n(223).values;r({target:"Object",stat:!0},{values:function(t){return i(t)}})},function(t,e,n){var r=n(21),i=n(70),o=n(27),a=n(62).f,u=function(t){return function(e){for(var n,u=o(e),s=i(u),c=s.length,l=0,f=[];c>l;)n=s[l++],r&&!a.call(u,n)||f.push(t?[n,u[n]]:u[n]);return f}};t.exports={entries:u(!0),values:u(!1)}},function(t,e,n){n(54);var r=n(225),i=n(73),o=Array.prototype,a={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===o||t instanceof Array&&e===o.forEach||a.hasOwnProperty(i(t))?r:e}},function(t,e,n){t.exports=n(226)},function(t,e,n){n(227);var r=n(29);t.exports=r("Array").forEach},function(t,e,n){"use strict";var r=n(11),i=n(228);r({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},function(t,e,n){"use strict";var r=n(49).forEach,i=n(229);t.exports=i("forEach")?function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(t,e,n){"use strict";var r=n(14);t.exports=function(t,e){var n=[][t];return!n||!r((function(){n.call(null,e||function(){throw 1},1)}))}},function(t,e,n){t.exports=n(231)},function(t,e,n){n(232);var r=n(24).Object,i=t.exports=function(t,e,n){return r.defineProperty(t,e,n)};r.defineProperty.sham&&(i.sham=!0)},function(t,e,n){var r=n(11),i=n(21);r({target:"Object",stat:!0,forced:!i,sham:!i},{defineProperty:n(25).f})},function(t,e,n){"use strict";(function(t){var r=n(0),i=n(12);Object.defineProperty(e,"__esModule",{value:!0}),e.driver=E,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return o.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return o.isInt}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return u.Neo4jError}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return y.isPoint}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return g.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return g.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return g.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return g.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return g.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return g.isTime}}),e.default=e.temporal=e.spatial=e.error=e.session=e.types=e.logging=e.auth=e.integer=void 0;var o=i(n(20)),a=n(78),u=n(3),s=r(n(55)),c=r(n(116)),l=r(n(117)),f=n(26),h=r(n(263)),d=r(n(267)),v=n(10),p=r(n(130)),_=r(n(268)),y=n(83),g=n(58),m=r(n(59)),b={basic:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return n?{scheme:"basic",principal:t,credentials:e,realm:n}:{scheme:"basic",principal:t,credentials:e}},kerberos:function(t){return{scheme:"kerberos",principal:"",credentials:t}},custom:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return i?{scheme:r,principal:t,credentials:e,realm:n,parameters:i}:{scheme:r,principal:t,credentials:e,realm:n}}};e.auth=b;var w="neo4j-javascript/"+d.default,k={console:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(e){return{level:e,logger:function(e,n){return console.log("".concat(t.Date.now()," ").concat(e.toUpperCase()," ").concat(n))}}}))};function E(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,v.assertString)(t,"Bolt URL");var r=p.default.parseDatabaseUrl(t);if(-1!==["bolt+routing","neo4j"].indexOf(r.scheme))return new h.default(m.default.fromUrl(r.hostAndPort),r.query,w,e,n);if("bolt"===r.scheme){if(!(0,v.isEmptyObjectOrNull)(r.query))throw new Error("Parameters are not supported with scheme 'bolt'. Given URL: '".concat(t,"'"));return new f.Driver(m.default.fromUrl(r.hostAndPort),w,e,n)}if("http"===r.scheme||"https"===r.scheme)return new _.default(r,w,e,n);throw new Error("Unknown scheme: ".concat(r.scheme))}e.logging=k;var S={Node:a.Node,Relationship:a.Relationship,UnboundRelationship:a.UnboundRelationship,PathSegment:a.PathSegment,Path:a.Path,Result:s.default,ResultSummary:c.default,Record:l.default,Point:y.Point,Date:g.Date,DateTime:g.DateTime,Duration:g.Duration,LocalDateTime:g.LocalDateTime,LocalTime:g.LocalTime,Time:g.Time,Integer:o.default};e.types=S;var O={READ:f.READ,WRITE:f.WRITE};e.session=O;var I={SERVICE_UNAVAILABLE:u.SERVICE_UNAVAILABLE,SESSION_EXPIRED:u.SESSION_EXPIRED,PROTOCOL_ERROR:u.PROTOCOL_ERROR};e.error=I;var T={toNumber:o.toNumber,toString:o.toString,inSafeRange:o.inSafeRange};e.integer=T;var C={isPoint:y.isPoint};e.spatial=C;var x={isDuration:g.isDuration,isLocalTime:g.isLocalTime,isTime:g.isTime,isDate:g.isDate,isLocalDateTime:g.isLocalDateTime,isDateTime:g.isDateTime};e.temporal=x;var N={driver:E,int:o.int,isInt:o.isInt,isPoint:y.isPoint,isDuration:g.isDuration,isLocalTime:g.isLocalTime,isTime:g.isTime,isDate:g.isDate,isLocalDateTime:g.isLocalDateTime,isDateTime:g.isDateTime,integer:T,Neo4jError:u.Neo4jError,auth:b,logging:k,types:S,session:O,error:I,spatial:C,temporal:x};e.default=N}).call(this,n(86))},function(t,e,n){var r=n(4),i=n(77),o=n(235),a=n(115);function u(e){var n="function"==typeof Map?new Map:void 0;return t.exports=u=function(t){if(null===t||!o(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return a(t,arguments,r(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),i(e,t)},u(e)}t.exports=u},function(t,e){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}},function(t,e,n){var r=n(4);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(7)),o=r(n(4)),a=r(n(80)),u=r(n(8)),s=r(n(1)),c=r(n(2)),l=r(n(56)),f=r(n(55)),h=n(10),d=n(41),v=r(n(42)),p=r(n(57)),_=function(){function t(e,n,r){(0,s.default)(this,t),this._connectionHolder=e,this._state=g.ACTIVE,this._onClose=n,this._onBookmark=r}return(0,c.default)(t,[{key:"_begin",value:function(t,e){var n=this,r=new y(this);this._connectionHolder.getConnection(r).then((function(i){return i.protocol().beginTransaction(t,e,n._connectionHolder.mode(),r)})).catch((function(t){return r.onError(t)}))}},{key:"run",value:function(t,e){var n=(0,h.validateStatementAndParameters)(t,e),r=n.query,i=n.params;return this._state.run(this._connectionHolder,new y(this),r,i)}},{key:"commit",value:function(){var t=this._state.commit(this._connectionHolder,new y(this));return this._state=t.state,this._onClose(),t.result}},{key:"rollback",value:function(){var t=this._state.rollback(this._connectionHolder,new y(this));return this._state=t.state,this._onClose(),t.result}},{key:"isOpen",value:function(){return this._state===g.ACTIVE}},{key:"_onError",value:function(){return this._state=g.FAILED,this._onClose(),this._connectionHolder.releaseConnection()}}]),t}(),y=function(t){function e(t){var n;return(0,s.default)(this,e),(n=(0,i.default)(this,(0,o.default)(e).call(this)))._tx=t,n}return(0,u.default)(e,t),(0,c.default)(e,[{key:"onError",value:function(t){var n=this;this._hasFailed||this._tx._onError().then((function(){(0,a.default)((0,o.default)(e.prototype),"onError",n).call(n,t)}))}},{key:"onCompleted",value:function(t){(0,a.default)((0,o.default)(e.prototype),"onCompleted",this).call(this,t);var n=new v.default(t.bookmark);this._tx._onBookmark(n)}}]),e}(l.default),g={ACTIVE:{commit:function(t,e){return{result:m(!0,t,e),state:g.SUCCEEDED}},rollback:function(t,e){return{result:m(!1,t,e),state:g.ROLLED_BACK}},run:function(t,e,n,r){var i=v.default.empty(),o=p.default.empty();return t.getConnection(e).then((function(a){return a.protocol().run(n,r,i,o,t.mode(),e)})).catch((function(t){return e.onError(t)})),function(t,e,n,r){return new f.default(t,e,n,r,d.EMPTY_CONNECTION_HOLDER)}(e,n,r,(function(){return e.serverMetadata()}))}},FAILED:{commit:function(t,e){return e.onError({error:"Cannot commit statements in this transaction, because previous statements in the transaction has failed and the transaction has been rolled back. Please start a new transaction to run another statement."}),{result:b(e,"COMMIT",{}),state:g.FAILED}},rollback:function(t,e){return e.markCompleted(),{result:b(e,"ROLLBACK",{}),state:g.FAILED}},run:function(t,e,n,r){return e.onError({error:"Cannot run statement, because previous statements in the transaction has failed and the transaction has already been rolled back."}),b(e,n,r)}},SUCCEEDED:{commit:function(t,e){return e.onError({error:"Cannot commit statements in this transaction, because commit has already been successfully called on the transaction and transaction has been closed. Please start a new transaction to run another statement."}),{result:b(e,"COMMIT",{}),state:g.SUCCEEDED}},rollback:function(t,e){return e.onError({error:"Cannot rollback transaction, because transaction has already been successfully closed."}),{result:b(e,"ROLLBACK",{}),state:g.SUCCEEDED}},run:function(t,e,n,r){return e.onError({error:"Cannot run statement, because transaction has already been successfully closed."}),b(e,n,r)}},ROLLED_BACK:{commit:function(t,e){return e.onError({error:"Cannot commit this transaction, because it has already been rolled back."}),{result:b(e,"COMMIT",{}),state:g.ROLLED_BACK}},rollback:function(t,e){return e.onError({error:"Cannot rollback transaction, because transaction has already been rolled back."}),{result:b(e,"ROLLBACK",{}),state:g.ROLLED_BACK}},run:function(t,e,n,r){return e.onError({error:"Cannot run statement, because transaction has already been rolled back."}),b(e,n,r)}}};function m(t,e,n){return e.getConnection(n).then((function(e){return t?e.protocol().commitTransaction(n):e.protocol().rollbackTransaction(n)})).catch((function(t){return n.onError(t)})),new f.default(n,t?"COMMIT":"ROLLBACK",{},w,e)}function b(t,e,n){return new f.default(t,e,n,w,d.EMPTY_CONNECTION_HOLDER)}function w(){return{}}var k=_;e.default=k},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=n(3),u=3e4,s=1e3,c=2,l=.2,f=function(){function t(e,n,r,o){(0,i.default)(this,t),this._maxRetryTimeMs=h(e,u),this._initialRetryDelayMs=h(n,s),this._multiplier=h(r,c),this._jitterFactor=h(o,l),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}return(0,o.default)(t,[{key:"execute",value:function(t,e){var n=this;return new Promise((function(r,i){n._executeTransactionInsidePromise(t,e,r,i)})).catch((function(r){var i=Date.now(),o=n._initialRetryDelayMs;return n._retryTransactionPromise(t,e,r,i,o)}))}},{key:"close",value:function(){this._inFlightTimeoutIds.forEach((function(t){return clearTimeout(t)})),this._inFlightTimeoutIds=[]}},{key:"_retryTransactionPromise",value:function(e,n,r,i,o){var a=this;return Date.now()-i>this._maxRetryTimeMs||!t._canRetryOn(r)?Promise.reject(r):new Promise((function(t,r){var i=a._computeDelayWithJitter(o),u=setTimeout((function(){a._inFlightTimeoutIds=a._inFlightTimeoutIds.filter((function(t){return t!==u})),a._executeTransactionInsidePromise(e,n,t,r)}),i);a._inFlightTimeoutIds.push(u)})).catch((function(t){var r=o*a._multiplier;return a._retryTransactionPromise(e,n,t,i,r)}))}},{key:"_executeTransactionInsidePromise",value:function(t,e,n,r){var i,o=this;try{i=t()}catch(t){return void r(t)}this._safeExecuteTransactionWork(i,e).then((function(t){return o._handleTransactionWorkSuccess(t,i,n,r)})).catch((function(t){return o._handleTransactionWorkFailure(t,i,r)}))}},{key:"_safeExecuteTransactionWork",value:function(t,e){try{var n=e(t);return Promise.resolve(n)}catch(t){return Promise.reject(t)}}},{key:"_handleTransactionWorkSuccess",value:function(t,e,n,r){e.isOpen()?e.commit().then((function(){n(t)})).catch((function(t){r(t)})):n(t)}},{key:"_handleTransactionWorkFailure",value:function(t,e,n){e.isOpen()?e.rollback().catch((function(t){})).then((function(){return n(t)})):n(t)}},{key:"_computeDelayWithJitter",value:function(t){var e=t*this._jitterFactor,n=t-e,r=t+e;return Math.random()*(r-n)+n}},{key:"_verifyAfterConstruction",value:function(){if(this._maxRetryTimeMs<0)throw(0,a.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw(0,a.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw(0,a.newError)("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||this._jitterFactor>1)throw(0,a.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)}}],[{key:"_canRetryOn",value:function(t){return t&&t.code&&(t.code===a.SERVICE_UNAVAILABLE||t.code===a.SESSION_EXPIRED||this._isTransientError(t))}},{key:"_isTransientError",value:function(t){var e=t.code;return e.indexOf("TransientError")>=0&&("Neo.TransientError.Transaction.Terminated"!==e&&"Neo.TransientError.Transaction.LockClientStopped"!==e)}}]),t}();function h(t,e){return t||0===t?t:e}e.default=f},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(119)),u=n(3),s=r(n(120)),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.create,r=void 0===n?function(t,e){}:n,o=e.destroy,u=void 0===o?function(t){return!0}:o,c=e.validate,l=void 0===c?function(t){return!0}:c,f=e.installIdleObserver,h=void 0===f?function(t,e){}:f,d=e.removeIdleObserver,v=void 0===d?function(t){}:d,p=e.config,_=void 0===p?a.default.defaultConfig():p,y=e.log,g=void 0===y?s.default.noOp():y;(0,i.default)(this,t),this._create=r,this._destroy=u,this._validate=l,this._installIdleObserver=h,this._removeIdleObserver=v,this._maxSize=_.maxSize,this._acquisitionTimeout=_.acquisitionTimeout,this._pools={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=g}return(0,o.default)(t,[{key:"acquire",value:function(t){var e=this;return this._acquire(t).then((function(n){var r=t.asKey();if(n)return l(r,e._activeResourceCounts),e._log.isDebugEnabled()&&e._log.debug("".concat(n," acquired from the pool ").concat(r)),n;var i=e._acquireRequests;return i[r]||(i[r]=[]),new Promise((function(t,n){var o,a=setTimeout((function(){var t=i[r];t&&(i[r]=t.filter((function(t){return t!==o}))),o.isCompleted()||o.reject((0,u.newError)("Connection acquisition timed out in ".concat(e._acquisitionTimeout," ms.")))}),e._acquisitionTimeout);o=new f(r,t,n,a,e._log),i[r].push(o)}))}))}},{key:"purge",value:function(t){this._purgeKey(t.asKey())}},{key:"purgeAll",value:function(){var t=this;Object.keys(this._pools).forEach((function(e){return t._purgeKey(e)}))}},{key:"keepAll",value:function(t){var e=this,n=t.map((function(t){return t.asKey()}));Object.keys(this._pools).filter((function(t){return-1===n.indexOf(t)})).forEach((function(t){return e._purgeKey(t)}))}},{key:"has",value:function(t){return t.asKey()in this._pools}},{key:"activeResourceCount",value:function(t){return this._activeResourceCounts[t.asKey()]||0}},{key:"_acquire",value:function(t){var e=t.asKey(),n=this._pools[e];for(n||(n=[],this._pools[e]=n);n.length;){var r=n.pop();if(this._validate(r))return this._removeIdleObserver&&this._removeIdleObserver(r),Promise.resolve(r);this._destroy(r)}return this._maxSize&&this.activeResourceCount(t)>=this._maxSize?Promise.resolve(null):this._create(t,this._release)}},{key:"_release",value:function(t,e){var n=this,r=t.asKey(),i=this._pools[r];i?this._validate(e)?(this._log.isDebugEnabled()&&this._log.debug("".concat(e," released to the pool ").concat(r)),this._installIdleObserver&&this._installIdleObserver(e,{onError:function(){var t=n._pools[r];t&&(n._pools[r]=t.filter((function(t){return t!==e}))),n._destroy(e)}}),i.push(e)):(this._log.isDebugEnabled()&&this._log.debug("".concat(e," destroyed and can't be released to the pool ").concat(r," because it is not functional")),this._destroy(e)):(this._log.isDebugEnabled()&&this._log.debug("".concat(e," destroyed and can't be released to the pool ").concat(r," because pool has been purged")),this._destroy(e)),function(t,e){var n=(e[t]||0)-1;n>0?e[t]=n:delete e[t]}(r,this._activeResourceCounts),this._processPendingAcquireRequests(t)}},{key:"_purgeKey",value:function(t){for(var e=this._pools[t]||[];e.length;){var n=e.pop();this._removeIdleObserver&&this._removeIdleObserver(n),this._destroy(n)}delete this._pools[t]}},{key:"_processPendingAcquireRequests",value:function(t){var e=this,n=t.asKey(),r=this._acquireRequests[n];if(r){var i=r.shift();i?this._acquire(t).catch((function(t){return i.reject(t),null})).then((function(r){r&&(i.isCompleted()?e._release(t,r):(l(n,e._activeResourceCounts),i.resolve(r)))})):delete this._acquireRequests[n]}}}]),t}();function l(t,e){var n=e[t]||0;e[t]=n+1}var f=function(){function t(e,n,r,o,a){(0,i.default)(this,t),this._key=e,this._resolve=n,this._reject=r,this._timeoutId=o,this._log=a,this._completed=!1}return(0,o.default)(t,[{key:"isCompleted",value:function(){return this._completed}},{key:"resolve",value:function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(t," acquired from the pool ").concat(this._key)),this._resolve(t))}},{key:"reject",value:function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(t))}}]),t}(),h=c;e.default=h},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=n(34),u=n(246),s=n(3),c=r(n(248)),l=n(121),f=r(n(249));function h(){}var d={onNext:h,onCompleted:h,onError:h},v=0,p=function(){function t(e,n,r,o){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];(0,i.default)(this,t),this.id=v++,this.address=r,this.server={address:r.asHostPort()},this.creationTimestamp=Date.now(),this._errorHandler=n,this._disableLosslessIntegers=a,this._pendingObservers=[],this._currentObserver=void 0,this._ch=e,this._dechunker=new u.Dechunker,this._chunker=new u.Chunker(e),this._log=o,this._dbConnectionId=null,this._protocol=null,this._currentFailure=null,this._isBroken=!1,this._log.isDebugEnabled()&&this._log.debug("".concat(this," created towards ").concat(r))}return(0,o.default)(t,[{key:"connect",value:function(t,e){var n=this;return this._negotiateProtocol().then((function(){return n._initialize(t,e)}))}},{key:"_negotiateProtocol",value:function(){var t=this,e=new f.default(this,this._ch,this._chunker,this._disableLosslessIntegers,this._log);return new Promise((function(n,r){var i=function(e){t._handleFatalError(e),r(e)};t._ch.onerror=i.bind(t),t._ch._error&&i(t._ch._error),t._ch.onmessage=function(i){try{t._protocol=e.createNegotiatedProtocol(i),t._ch.onerror=t._handleFatalError.bind(t),t._ch.onmessage=function(e){return t._dechunker.write(e)},t._dechunker.onmessage=function(e){t._handleMessage(t._protocol.unpacker().unpack(e))},i.hasRemaining()&&t._dechunker.write(i.readSlice(i.remaining())),n(t)}catch(e){t._handleFatalError(e),r(e)}},e.writeHandshakeRequest()}))}},{key:"_initialize",value:function(t,e){var n=this;return new Promise((function(r,i){var o=new _(n,r,i);n._protocol.initialize(t,e,o)}))}},{key:"protocol",value:function(){return this._protocol}},{key:"write",value:function(t,e,n){var r=this;this._queueObserver(e)&&(this._log.isDebugEnabled()&&this._log.debug("".concat(this," C: ").concat(t)),this._protocol.packer().packStruct(t.signature,t.fields.map((function(t){return r._packable(t)})),(function(t){return r._handleFatalError(t)})),this._chunker.messageBoundary(),n&&this._chunker.flush())}},{key:"_handleFatalError",value:function(t){for(this._isBroken=!0,this._error=this._errorHandler.handleAndTransformError(t,this.address),this._log.isErrorEnabled()&&this._log.error("".concat(this," experienced a fatal error ").concat(JSON.stringify(this._error))),this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(this._error);this._pendingObservers.length>0;){var e=this._pendingObservers.shift();e&&e.onError&&e.onError(this._error)}}},{key:"_handleMessage",value:function(t){if(!this._isBroken){var e=t.fields[0];switch(t.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: RECORD ").concat(JSON.stringify(t))),this._currentObserver.onNext(e);break;case 112:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: SUCCESS ").concat(JSON.stringify(t)));try{var n=this._protocol.transformMetadata(e);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: FAILURE ").concat(JSON.stringify(t)));try{var r=(0,s.newError)(e.message,e.code);this._currentFailure=this._errorHandler.handleAndTransformError(r,this.address),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._resetOnFailure()}break;case 126:this._log.isDebugEnabled()&&this._log.debug("".concat(this," S: IGNORED ").concat(JSON.stringify(t)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,s.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._handleFatalError((0,s.newError)("Unknown Bolt protocol message: "+t))}}}},{key:"resetAndFlush",value:function(){var t=this;return new Promise((function(e,n){t._protocol.reset({onNext:function(e){var r=t._handleProtocolError("Received RECORD as a response for RESET: "+JSON.stringify(e));n(r)},onError:function(e){if(t._isBroken)n(e);else{var r=t._handleProtocolError("Received FAILURE as a response for RESET: "+e);n(r)}},onCompleted:function(){e()}})}))}},{key:"_resetOnFailure",value:function(){var t=this;this._protocol.reset({onNext:function(e){t._handleProtocolError("Received RECORD as a response for RESET: "+JSON.stringify(e))},onError:function(){t._currentFailure=null},onCompleted:function(){t._currentFailure=null}})}},{key:"_queueObserver",value:function(t){return this._isBroken?(t&&t.onError&&t.onError(this._error),!1):((t=t||d).onCompleted=t.onCompleted||h,t.onError=t.onError||h,t.onNext=t.onNext||h,void 0===this._currentObserver?this._currentObserver=t:this._pendingObservers.push(t),!0)}},{key:"_updateCurrentObserver",value:function(){this._currentObserver=this._pendingObservers.shift()}},{key:"isOpen",value:function(){return!this._isBroken&&this._ch._open}},{key:"close",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null};this._log.isDebugEnabled()&&this._log.debug("".concat(this," closing")),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(d),this._ch.close((function(){t._log.isDebugEnabled()&&t._log.debug("".concat(t," closed")),e()}))}},{key:"toString",value:function(){var t=this._dbConnectionId||"";return"Connection [".concat(this.id,"][").concat(t,"]")}},{key:"_packable",value:function(t){var e=this;return this._protocol.packer().packable(t,(function(t){return e._handleFatalError(t)}))}},{key:"_handleProtocolError",value:function(t){this._currentFailure=null,this._updateCurrentObserver();var e=(0,s.newError)(t,s.PROTOCOL_ERROR);return this._handleFatalError(e),e}}],[{key:"create",value:function(e,n,r,i){var o=new c.default(e,n,r.errorCode());return new t(new a.Channel(o),r,e,i,n.disableLosslessIntegers)}}]),t}();e.default=p;var _=function(){function t(e,n,r){(0,i.default)(this,t),this._connection=e,this._onSuccess=n,this._onError=r}return(0,o.default)(t,[{key:"onNext",value:function(t){this.onError((0,s.newError)("Received RECORD when initializing "+JSON.stringify(t)))}},{key:"onError",value:function(t){this._connection._updateCurrentObserver(),this._connection._handleFatalError(t),this._onError(t)}},{key:"onCompleted",value:function(t){if(t){var e=t.server;if(!this._connection.server.version)this._connection.server.version=e,l.ServerVersion.fromString(e).compareTo(l.VERSION_3_2_0)<0&&this._connection.protocol().packer().disableByteArrays();var n=t.connection_id;this._connection._dbConnectionId||(this._connection._dbConnectionId=n)}this._onSuccess(this._connection)}}]),t}()},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(81)),u=n(3),s=n(10),c=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l;(0,i.default)(this,t),this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=e;var r=function(t,e){var n=function(t){return!0===t.encrypted||t.encrypted===s.ENCRYPTION_ON}(t),r=function(t){return!1===t.encrypted||t.encrypted===s.ENCRYPTION_OFF}(t),i=t.trust,o=function(t){var e="function"==typeof t?t():"";return e&&e.toLowerCase().indexOf("https")>=0}(e);if(function(t,e,n){t&&!n?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):e&&n&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption.")}(n,r,o),r)return{scheme:"ws",error:null};if(o)return{scheme:"wss",error:null};if(n){return i&&"TRUST_CUSTOM_CA_SIGNED_CERTIFICATES"!==i?{scheme:null,error:(0,u.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_CUSTOM_CA_SIGNED_CERTIFICATES'. "+i+' is not supported. Please either use TRUST_CUSTOM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+s.ENCRYPTION_OFF+'"` in the driver configuration.')}:{scheme:"wss",error:null}}return{scheme:"ws",error:null}}(e,n),o=r.scheme,c=r.error;if(c)this._error=c;else{this._ws=function(t,e){var n=t+"://"+e.asHostPort();try{return new WebSocket(n)}catch(n){if(function(t,e){return"SyntaxError"===t.name&&(n=e.asHostPort(),"["===n.charAt(0)&&-1!==n.indexOf("]"));var n}(n,e)){var r=function(t,e){var n=e.host().replace(new RegExp(":","g"),"-").replace("%","s")+".ipv6-literal.net";return"".concat(t,"://").concat(n,":").concat(e.port())}(t,e);return new WebSocket(r)}throw n}}(o,e.address),this._ws.binaryType="arraybuffer";var f=this;this._ws.onclose=function(t){t.wasClean||f._handleConnectionError()},this._ws.onopen=function(){f._clearConnectionTimeout();var t=f._pending;f._pending=null;for(var e=0;e<t.length;e++)f.write(t[e])},this._ws.onmessage=function(t){if(f.onmessage){var e=new a.default(t.data);f.onmessage(e)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}}return(0,o.default)(t,[{key:"_handleConnectionError",value:function(){if(this._connectionTimeoutFired)return this._error=(0,u.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&(this._error=(0,u.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))}},{key:"write",value:function(t){if(null!==this._pending)this._pending.push(t);else{if(!(t instanceof a.default))throw(0,u.newError)("Don't know how to send buffer: "+t);this._ws.send(t._buffer)}}},{key:"close",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null};this._open=!1,this._clearConnectionTimeout(),this._ws.close(),this._ws.onclose=t}},{key:"_setupConnectionTimeout",value:function(){var t=this,e=this._config.connectionTimeout;if(e){var n=this._ws;return setTimeout((function(){n.readyState!==WebSocket.OPEN&&(t._connectionTimeoutFired=!0,n.close())}),e)}return null}},{key:"_clearConnectionTimeout",value:function(){var t=this._connectionTimeoutId;(t||0===t)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(t))}}]),t}();function l(){return"undefined"!=typeof window&&window.location?window.location.protocol:null}e.default=c},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(7)),u=r(n(4)),s=r(n(8)),c=function(t){function e(){return(0,i.default)(this,e),(0,a.default)(this,(0,u.default)(e).apply(this,arguments))}return(0,s.default)(e,t),(0,o.default)(e,[{key:"resolve",value:function(t){return this._resolveToItself(t)}}]),e}(r(n(243)).default);e.default=c},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=function(){function t(){(0,i.default)(this,t)}return(0,o.default)(t,[{key:"resolve",value:function(){throw new Error("Abstract function")}},{key:"_resolveToItself",value:function(t){return Promise.resolve([t])}}]),t}();e.default=a},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(81)),o=n(245),a=new o.TextEncoder("utf-8"),u=new o.TextDecoder("utf-8");var s={encode:function(t){return new i.default(a.encode(t).buffer)},decode:function(t,e){if(t instanceof i.default)return u.decode(t.readView(Math.min(e,t.length-t.position)));for(var n=new i.default(e),r=0;r<e;r++)n.writeUInt8(t.readUInt8());return n.reset(),u.decode(n.readView(e))}};e.default=s},function(t,e,n){"use strict";function r(t,e,n){return e<=t&&t<=n}function i(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}n.r(e),n.d(e,"TextEncoder",(function(){return f})),n.d(e,"TextDecoder",(function(){return l}));var o=-1;function a(t){this.tokens=[].slice.call(t)}a.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():o},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var u=-1;function s(t,e){if(t)throw TypeError("Decoder error");return e||65533}var c="utf-8";function l(t,e){if(!(this instanceof l))return new l(t,e);if((t=void 0!==t?String(t).toLowerCase():c)!==c)throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function f(t,e){if(!(this instanceof f))return new f(t,e);if((t=void 0!==t?String(t).toLowerCase():c)!==c)throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function h(t){var e=t.fatal,n=0,i=0,a=0,c=128,l=191;this.handler=function(t,f){if(f===o&&0!==a)return a=0,s(e);if(f===o)return u;if(0===a){if(r(f,0,127))return f;if(r(f,194,223))a=1,n=f-192;else if(r(f,224,239))224===f&&(c=160),237===f&&(l=159),a=2,n=f-224;else{if(!r(f,240,244))return s(e);240===f&&(c=144),244===f&&(l=143),a=3,n=f-240}return n<<=6*a,null}if(!r(f,c,l))return n=a=i=0,c=128,l=191,t.prepend(f),s(e);if(c=128,l=191,n+=f-128<<6*(a-(i+=1)),i!==a)return null;var h=n;return n=a=i=0,h}}function d(t){t.fatal;this.handler=function(t,e){if(e===o)return u;if(r(e,0,127))return e;var n,i;r(e,128,2047)?(n=1,i=192):r(e,2048,65535)?(n=2,i=224):r(e,65536,1114111)&&(n=3,i=240);for(var a=[(e>>6*n)+i];n>0;){var s=e>>6*(n-1);a.push(128|63&s),n-=1}return a}}l.prototype={decode:function(t,e){var n;n="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=i(e),this._streaming||(this._decoder=new h({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var r,o=new a(n),s=[];!o.endOfStream()&&(r=this._decoder.handler(o,o.read()))!==u;)null!==r&&(Array.isArray(r)?s.push.apply(s,r):s.push(r));if(!this._streaming){do{if((r=this._decoder.handler(o,o.read()))===u)break;null!==r&&(Array.isArray(r)?s.push.apply(s,r):s.push(r))}while(!o.endOfStream());this._decoder=null}return s.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===s[0]?(this._BOMseen=!0,s.shift()):this._BOMseen=!0)),function(t){for(var e="",n=0;n<t.length;++n){var r=t[n];r<=65535?e+=String.fromCharCode(r):(r-=65536,e+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return e}(s)}},f.prototype={encode:function(t,e){t=t?String(t):"",e=i(e),this._streaming||(this._encoder=new d(this._options)),this._streaming=Boolean(e.stream);for(var n,r=[],o=new a(function(t){for(var e=String(t),n=e.length,r=0,i=[];r<n;){var o=e.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var a=t.charCodeAt(r+1);if(56320<=a&&a<=57343){var u=1023&o,s=1023&a;i.push(65536+(u<<10)+s),r+=1}else i.push(65533)}r+=1}return i}(t));!o.endOfStream()&&(n=this._encoder.handler(o,o.read()))!==u;)Array.isArray(n)?r.push.apply(r,n):r.push(n);if(!this._streaming){for(;(n=this._encoder.handler(o,o.read()))!==u;)Array.isArray(n)?r.push.apply(r,n):r.push(n);this._encoder=null}return new Uint8Array(r)}}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Dechunker=e.Chunker=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(7)),u=r(n(4)),s=r(n(8)),c=r(n(82)),l=n(34),f=r(n(247)),h=1400,d=function(t){function e(t,n){var r;return(0,i.default)(this,e),(r=(0,a.default)(this,(0,u.default)(e).call(this,0)))._bufferSize=n||h,r._ch=t,r._buffer=(0,l.alloc)(r._bufferSize),r._currentChunkStart=0,r._chunkOpen=!1,r}return(0,s.default)(e,t),(0,o.default)(e,[{key:"putUInt8",value:function(t,e){this._ensure(1),this._buffer.writeUInt8(e)}},{key:"putInt8",value:function(t,e){this._ensure(1),this._buffer.writeInt8(e)}},{key:"putFloat64",value:function(t,e){this._ensure(8),this._buffer.writeFloat64(e)}},{key:"putBytes",value:function(t,e){for(;e.remaining()>0;)this._ensure(1),this._buffer.remaining()>e.remaining()?this._buffer.writeBytes(e):this._buffer.writeBytes(e.readSlice(this._buffer.remaining()));return this}},{key:"flush",value:function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,l.alloc)(this._bufferSize),this._chunkOpen=!1}return this}},{key:"messageBoundary",value:function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)}},{key:"_ensure",value:function(t){var e=this._chunkOpen?t:t+2;this._buffer.remaining()<e&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)}},{key:"_closeChunkIfOpen",value:function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}}}]),e}(c.default);e.Chunker=d;var v=function(){function t(){(0,i.default)(this,t),this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return(0,o.default)(t,[{key:"AWAITING_CHUNK",value:function(t){return t.remaining()>=2?this._onHeader(t.readUInt16()):(this._partialChunkHeader=t.readUInt8()<<8,this.IN_HEADER)}},{key:"IN_HEADER",value:function(t){return this._onHeader(65535&(this._partialChunkHeader|t.readUInt8()))}},{key:"IN_CHUNK",value:function(t){return this._chunkSize<=t.remaining()?(this._currentMessage.push(t.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=t.remaining(),this._currentMessage.push(t.readSlice(t.remaining())),this.IN_CHUNK)}},{key:"CLOSED",value:function(t){}},{key:"_onHeader",value:function(t){var e;return 0===t?(e=1===this._currentMessage.length?this._currentMessage[0]:new f.default(this._currentMessage),this._currentMessage=[],this.onmessage(e),this.AWAITING_CHUNK):(this._chunkSize=t,this.IN_CHUNK)}},{key:"write",value:function(t){for(;t.hasRemaining();)this._state=this._state(t)}}]),t}();e.Dechunker=v},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(7)),u=r(n(4)),s=r(n(8)),c=r(n(82)),l=n(34),f=function(t){function e(t){var n;(0,i.default)(this,e);for(var r=0,o=0;o<t.length;o++)r+=t[o].length;return(n=(0,a.default)(this,(0,u.default)(e).call(this,r)))._buffers=t,n}return(0,s.default)(e,t),(0,o.default)(e,[{key:"getUInt8",value:function(t){for(var e=0;e<this._buffers.length;e++){var n=this._buffers[e];if(!(t>=n.length))return n.getUInt8(t);t-=n.length}}},{key:"getInt8",value:function(t){for(var e=0;e<this._buffers.length;e++){var n=this._buffers[e];if(!(t>=n.length))return n.getInt8(t);t-=n.length}}},{key:"getFloat64",value:function(t){for(var e=(0,l.alloc)(8),n=0;n<8;n++)e.putUInt8(n,this.getUInt8(t+n));return e.getFloat64(0)}}]),e}(c.default);e.default=f},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=n(3),a=n(10),u=3e4,s=[null,void 0,!0,!1,a.ENCRYPTION_ON,a.ENCRYPTION_OFF],c=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_ON_FIRST_USE","TRUST_SIGNED_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];e.default=function t(e,n,r){(0,i.default)(this,t),this.address=e,this.encrypted=function(t){var e=t.encrypted;if(-1===s.indexOf(e))throw(0,o.newError)("Illegal value of the encrypted setting ".concat(e,". Expected one of ").concat(s));return e}(n),this.trust=function(t){var e=t.trust;if(-1===c.indexOf(e))throw(0,o.newError)("Illegal value of the trust setting ".concat(e,". Expected one of ").concat(c));return e}(n),this.trustedCertificates=function(t){return t.trustedCertificates||[]}(n),this.knownHostsPath=function(t){return t.knownHosts||null}(n),this.connectionErrorCode=r||o.SERVICE_UNAVAILABLE,this.connectionTimeout=function(t){var e=parseInt(t.connectionTimeout,10);return 0===e?null:e&&e<0?null:e||u}(n)}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=n(34),u=n(3),s=r(n(122)),c=r(n(125)),l=r(n(255)),f=1616949271,h=function(){function t(e,n,r,o,a){(0,i.default)(this,t),this._connection=e,this._channel=n,this._chunker=r,this._disableLosslessIntegers=o,this._log=a}return(0,o.default)(t,[{key:"writeHandshakeRequest",value:function(){var t;this._channel.write(((t=(0,a.alloc)(20)).writeInt32(f),t.writeInt32(3),t.writeInt32(2),t.writeInt32(1),t.writeInt32(0),t.reset(),t))}},{key:"createNegotiatedProtocol",value:function(t){var e=t.readInt32();return this._log.isDebugEnabled()&&this._log.debug("".concat(this._connection," negotiated protocol version ").concat(e)),this._createProtocolWithVersion(e)}},{key:"_createProtocolWithVersion",value:function(t){switch(t){case 1:return new s.default(this._connection,this._chunker,this._disableLosslessIntegers);case 2:return new c.default(this._connection,this._chunker,this._disableLosslessIntegers);case 3:return new l.default(this._connection,this._chunker,this._disableLosslessIntegers);case 1213486160:throw(0,u.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");default:throw(0,u.newError)("Unknown Bolt protocol version: "+t)}}}]),t}();e.default=h},function(t,e,n){"use strict";var r=n(12),i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var o=i(n(1)),a=i(n(2)),u=i(n(7)),s=i(n(4)),c=i(n(80)),l=i(n(8)),f=r(n(124)),h=n(83),d=n(58),v=n(20),p=n(126),_=88,y=3,g=89,m=4,b=69,w=4,k=116,E=1,S=84,O=2,I=68,T=1,C=100,x=2,N=70,P=3,R=102,A=3,j=function(t){function e(){return(0,o.default)(this,e),(0,u.default)(this,(0,s.default)(e).apply(this,arguments))}return(0,l.default)(e,t),(0,a.default)(e,[{key:"disableByteArrays",value:function(){throw new Error("Bolt V2 should always support byte arrays")}},{key:"packable",value:function(t,n){var r=this;return(0,h.isPoint)(t)?function(){return function(t,e,n){null===t.z||void 0===t.z?function(t,e,n){var r=[e.packable((0,v.int)(t.srid),n),e.packable(t.x,n),e.packable(t.y,n)];e.packStruct(_,r,n)}(t,e,n):function(t,e,n){var r=[e.packable((0,v.int)(t.srid),n),e.packable(t.x,n),e.packable(t.y,n),e.packable(t.z,n)];e.packStruct(g,r,n)}(t,e,n)}(t,r,n)}:(0,d.isDuration)(t)?function(){return function(t,e,n){var r=(0,v.int)(t.months),i=(0,v.int)(t.days),o=(0,v.int)(t.seconds),a=(0,v.int)(t.nanoseconds),u=[e.packable(r,n),e.packable(i,n),e.packable(o,n),e.packable(a,n)];e.packStruct(b,u,n)}(t,r,n)}:(0,d.isLocalTime)(t)?function(){return function(t,e,n){var r=(0,p.localTimeToNanoOfDay)(t.hour,t.minute,t.second,t.nanosecond),i=[e.packable(r,n)];e.packStruct(k,i,n)}(t,r,n)}:(0,d.isTime)(t)?function(){return function(t,e,n){var r=(0,p.localTimeToNanoOfDay)(t.hour,t.minute,t.second,t.nanosecond),i=(0,v.int)(t.timeZoneOffsetSeconds),o=[e.packable(r,n),e.packable(i,n)];e.packStruct(S,o,n)}(t,r,n)}:(0,d.isDate)(t)?function(){return function(t,e,n){var r=(0,p.dateToEpochDay)(t.year,t.month,t.day),i=[e.packable(r,n)];e.packStruct(I,i,n)}(t,r,n)}:(0,d.isLocalDateTime)(t)?function(){return function(t,e,n){var r=(0,p.localDateTimeToEpochSecond)(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),i=(0,v.int)(t.nanosecond),o=[e.packable(r,n),e.packable(i,n)];e.packStruct(C,o,n)}(t,r,n)}:(0,d.isDateTime)(t)?function(){return function(t,e,n){t.timeZoneId?function(t,e,n){var r=(0,p.localDateTimeToEpochSecond)(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),i=(0,v.int)(t.nanosecond),o=t.timeZoneId,a=[e.packable(r,n),e.packable(i,n),e.packable(o,n)];e.packStruct(R,a,n)}(t,e,n):function(t,e,n){var r=(0,p.localDateTimeToEpochSecond)(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),i=(0,v.int)(t.nanosecond),o=(0,v.int)(t.timeZoneOffsetSeconds),a=[e.packable(r,n),e.packable(i,n),e.packable(o,n)];e.packStruct(N,a,n)}(t,e,n)}(t,r,n)}:(0,c.default)((0,s.default)(e.prototype),"packable",this).call(this,t,n)}}]),e}(f.Packer);e.Packer=j;var U=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,o.default)(this,e),(0,u.default)(this,(0,s.default)(e).call(this,t))}return(0,l.default)(e,t),(0,a.default)(e,[{key:"_unpackUnknownStruct",value:function(t,n,r){return t===_?function(t,e,n){return t._verifyStructSize("Point2D",y,e),new h.Point(t.unpack(n),t.unpack(n),t.unpack(n),void 0)}(this,n,r):t===g?function(t,e,n){return t._verifyStructSize("Point3D",m,e),new h.Point(t.unpack(n),t.unpack(n),t.unpack(n),t.unpack(n))}(this,n,r):t===b?function(t,e,n){t._verifyStructSize("Duration",w,e);var r=t.unpack(n),i=t.unpack(n),o=t.unpack(n),a=t.unpack(n);return new d.Duration(r,i,o,a)}(this,n,r):t===k?function(t,e,n,r){t._verifyStructSize("LocalTime",E,e);var i=t.unpackInteger(n);return D((0,p.nanoOfDayToLocalTime)(i),r)}(this,n,r,this._disableLosslessIntegers):t===S?function(t,e,n,r){t._verifyStructSize("Time",O,e);var i=t.unpackInteger(n),o=t.unpackInteger(n),a=(0,p.nanoOfDayToLocalTime)(i);return D(new d.Time(a.hour,a.minute,a.second,a.nanosecond,o),r)}(this,n,r,this._disableLosslessIntegers):t===I?function(t,e,n,r){t._verifyStructSize("Date",T,e);var i=t.unpackInteger(n);return D((0,p.epochDayToDate)(i),r)}(this,n,r,this._disableLosslessIntegers):t===C?function(t,e,n,r){t._verifyStructSize("LocalDateTime",x,e);var i=t.unpackInteger(n),o=t.unpackInteger(n);return D((0,p.epochSecondAndNanoToLocalDateTime)(i,o),r)}(this,n,r,this._disableLosslessIntegers):t===N?function(t,e,n,r){t._verifyStructSize("DateTimeWithZoneOffset",P,e);var i=t.unpackInteger(n),o=t.unpackInteger(n),a=t.unpackInteger(n),u=(0,p.epochSecondAndNanoToLocalDateTime)(i,o);return D(new d.DateTime(u.year,u.month,u.day,u.hour,u.minute,u.second,u.nanosecond,a,null),r)}(this,n,r,this._disableLosslessIntegers):t===R?function(t,e,n,r){t._verifyStructSize("DateTimeWithZoneId",A,e);var i=t.unpackInteger(n),o=t.unpackInteger(n),a=t.unpack(n),u=(0,p.epochSecondAndNanoToLocalDateTime)(i,o);return D(new d.DateTime(u.year,u.month,u.day,u.hour,u.minute,u.second,u.nanosecond,null,a),r)}(this,n,r,this._disableLosslessIntegers):(0,c.default)((0,s.default)(e.prototype),"_unpackUnknownStruct",this).call(this,t,n,r,this._disableLosslessIntegers)}}]),e}(f.Unpacker);function D(t,e){if(!e)return t;var n=Object.create(Object.getPrototypeOf(t));for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];n[r]=(0,v.isInt)(i)?i.toNumberOrInfinity():i}return Object.freeze(n),n}e.Unpacker=U},function(t,e,n){var r=n(252),i=n(253),o=n(254);t.exports=function(t,e){return r(t)||i(t,e)||o()}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(7)),u=r(n(4)),s=r(n(8)),c=r(n(125)),l=r(n(123)),f=function(t){function e(){return(0,i.default)(this,e),(0,a.default)(this,(0,u.default)(e).apply(this,arguments))}return(0,s.default)(e,t),(0,o.default)(e,[{key:"transformMetadata",value:function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t}},{key:"initialize",value:function(t,e,n){h(n);var r=l.default.hello(t,e);this._connection.write(r,n,!0)}},{key:"prepareToClose",value:function(t){var e=l.default.goodbye();this._connection.write(e,t,!0)}},{key:"beginTransaction",value:function(t,e,n,r){h(r);var i=l.default.begin(t,e,n);this._connection.write(i,r,!0)}},{key:"commitTransaction",value:function(t){h(t);var e=l.default.commit();this._connection.write(e,t,!0)}},{key:"rollbackTransaction",value:function(t){h(t);var e=l.default.rollback();this._connection.write(e,t,!0)}},{key:"run",value:function(t,e,n,r,i,o){var a=l.default.runWithMetadata(t,e,n,r,i),u=l.default.pullAll();this._connection.write(a,o,!1),this._connection.write(u,o,!0)}}]),e}(c.default);function h(t){t&&"function"==typeof t.prepareToHandleSingleResponse&&t.prepareToHandleSingleResponse()}e.default=f},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(128)),u=n(3),s=function(){function t(e){(0,i.default)(this,t),this._routingUtil=e}return(0,o.default)(t,[{key:"lookupRoutingTableOnRouter",value:function(e,n){var r=this;return this._routingUtil.callRoutingProcedure(e,n).then((function(e){if(null===e)return null;if(1!==e.length)throw(0,u.newError)('Illegal response from router "'+n+'". Received '+e.length+" records but expected only one.\n"+JSON.stringify(e),u.PROTOCOL_ERROR);var i=e[0],o=r._routingUtil.parseTtl(i,n),s=r._routingUtil.parseServers(i,n),c=s.routers,l=s.readers,f=s.writers;return t._assertNonEmpty(c,"routers",n),t._assertNonEmpty(l,"readers",n),new a.default(c,l,f,o)}))}}],[{key:"_assertNonEmpty",value:function(t,e,n){if(0===t.length)throw(0,u.newError)("Received no "+e+" from router "+n,u.PROTOCOL_ERROR)}}]),t}();e.default=s},function(t,e,n){"use strict";var r=n(12),i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(1)),a=i(n(2)),u=n(3),s=r(n(20)),c=n(121),l=i(n(42)),f=i(n(57)),h=n(43),d=i(n(59)),v=function(){function t(e){(0,o.default)(this,t),this._routingContext=e}return(0,a.default)(t,[{key:"callRoutingProcedure",value:function(t,e){return this._callAvailableRoutingProcedure(t).then((function(e){return t.close(),e.records})).catch((function(t){if("Neo.ClientError.Procedure.ProcedureNotFound"===t.code)throw(0,u.newError)("Server at ".concat(e.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),u.SERVICE_UNAVAILABLE);return null}))}},{key:"parseTtl",value:function(t,e){try{var n=(0,s.int)(Date.now()),r=(0,s.int)(t.get("ttl")).multiply(1e3).add(n);return r.lessThan(n)?s.default.MAX_VALUE:r}catch(n){throw(0,u.newError)("Unable to parse TTL entry from router ".concat(e," from record:\n").concat(JSON.stringify(t),"\nError message: ").concat(n.message),u.PROTOCOL_ERROR)}}},{key:"parseServers",value:function(t,e){try{var n=t.get("servers"),r=[],i=[],o=[];return n.forEach((function(t){var e=t.role,n=t.addresses;if("ROUTE"===e)r=p(n).map((function(t){return d.default.fromUrl(t)}));else if("WRITE"===e)o=p(n).map((function(t){return d.default.fromUrl(t)}));else{if("READ"!==e)throw(0,u.newError)('Unknown server role "'+e+'"',u.PROTOCOL_ERROR);i=p(n).map((function(t){return d.default.fromUrl(t)}))}})),{routers:r,readers:i,writers:o}}catch(n){throw(0,u.newError)("Unable to parse servers entry from router ".concat(e," from record:\n").concat(JSON.stringify(t),"\nError message: ").concat(n.message),u.PROTOCOL_ERROR)}}},{key:"_callAvailableRoutingProcedure",value:function(t){var e=this;return t._run(null,null,(function(t,n){var r,i,o=t.server.version;c.ServerVersion.fromString(o).compareTo(c.VERSION_3_2_0)>=0?(r="CALL dbms.cluster.routing.getRoutingTable($context)",i={context:e._routingContext}):(r="CALL dbms.cluster.routing.getServers",i={}),t.protocol().run(r,i,l.default.empty(),f.default.empty(),h.ACCESS_MODE_WRITE,n)}))}}]),t}();function p(t){if(!Array.isArray(t))throw new TypeError("Array expected but got: "+t);return Array.from(t)}e.default=v},function(t,e,n){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(t){"use strict";function e(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length>1){e[0]=e[0].slice(0,-1);for(var r=e.length-1,i=1;i<r;++i)e[i]=e[i].slice(1,-1);return e[r]=e[r].slice(1),e.join("")}return e[0]}function n(t){return"(?:"+t+")"}function r(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function i(t){return t.toUpperCase()}function o(t){var r=e("[0-9]","[A-Fa-f]"),i=n(n("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+n("%[89A-Fa-f]"+r+"%"+r+r)+"|"+n("%"+r+r)),o="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",a=e("[\\:\\/\\?\\#\\[\\]\\@]",o),u=t?"[\\uE000-\\uF8FF]":"[]",s=e("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),c=n("[A-Za-z]"+e("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),l=n(n(i+"|"+e(s,o,"[\\:]"))+"*"),f=(n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("[1-9][0-9]")+"|[0-9]"),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?[0-9]")),h=n(f+"\\."+f+"\\."+f+"\\."+f),d=n(r+"{1,4}"),v=n(n(d+"\\:"+d)+"|"+h),p=n(n(d+"\\:")+"{6}"+v),_=n("\\:\\:"+n(d+"\\:")+"{5}"+v),y=n(n(d)+"?\\:\\:"+n(d+"\\:")+"{4}"+v),g=n(n(n(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+n(d+"\\:")+"{3}"+v),m=n(n(n(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+n(d+"\\:")+"{2}"+v),b=n(n(n(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+v),w=n(n(n(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+v),k=n(n(n(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),E=n(n(n(d+"\\:")+"{0,6}"+d)+"?\\:\\:"),S=n([p,_,y,g,m,b,w,k,E].join("|")),O=n(n(s+"|"+i)+"+"),I=(n(S+"\\%25"+O),n(S+n("\\%25|\\%(?!"+r+"{2})")+O)),T=n("[vV]"+r+"+\\."+e(s,o,"[\\:]")+"+"),C=n("\\["+n(I+"|"+S+"|"+T)+"\\]"),x=n(n(i+"|"+e(s,o))+"*"),N=n(C+"|"+h+"(?!"+x+")|"+x),P=n("[0-9]*"),R=n(n(l+"@")+"?"+N+n("\\:"+P)+"?"),A=n(i+"|"+e(s,o,"[\\:\\@]")),j=n(A+"*"),U=n(A+"+"),D=n(n(i+"|"+e(s,o,"[\\@]"))+"+"),L=n(n("\\/"+j)+"*"),M=n("\\/"+n(U+L)+"?"),F=n(D+L),V=n(U+L),B="(?!"+A+")",q=(n(L+"|"+M+"|"+F+"|"+V+"|"+B),n(n(A+"|"+e("[\\/\\?]",u))+"*")),z=n(n(A+"|[\\/\\?]")+"*"),H=n(n("\\/\\/"+R+L)+"|"+M+"|"+V+"|"+B),W=n(c+"\\:"+H+n("\\?"+q)+"?"+n("\\#"+z)+"?"),G=n(n("\\/\\/"+R+L)+"|"+M+"|"+F+"|"+B),Z=n(G+n("\\?"+q)+"?"+n("\\#"+z)+"?");return n(W+"|"+Z),n(c+"\\:"+H+n("\\?"+q)+"?"),n(n("\\/\\/("+n("("+l+")@")+"?("+N+")"+n("\\:("+P+")")+"?)")+"?("+L+"|"+M+"|"+V+"|"+B+")"),n("\\?("+q+")"),n("\\#("+z+")"),n(n("\\/\\/("+n("("+l+")@")+"?("+N+")"+n("\\:("+P+")")+"?)")+"?("+L+"|"+M+"|"+F+"|"+B+")"),n("\\?("+q+")"),n("\\#("+z+")"),n(n("\\/\\/("+n("("+l+")@")+"?("+N+")"+n("\\:("+P+")")+"?)")+"?("+L+"|"+M+"|"+V+"|"+B+")"),n("\\?("+q+")"),n("\\#("+z+")"),n("("+l+")@"),n("\\:("+P+")"),{NOT_SCHEME:new RegExp(e("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",s,o),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",s,o),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",s,o),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",s,o),"g"),NOT_QUERY:new RegExp(e("[^\\%]",s,o,"[\\:\\@\\/\\?]",u),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",s,o,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",s,o),"g"),UNRESERVED:new RegExp(s,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",s,a),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+h+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+n(n("\\%25|\\%(?!"+r+"{2})")+"("+O+")")+"?\\]?$")}}var a=o(!1),u=o(!0),s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,l=/^xn--/,f=/[^\0-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},v=Math.floor,p=String.fromCharCode;function _(t){throw new RangeError(d[t])}function y(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]);var i=function(t,e){for(var n=[],r=t.length;r--;)n[r]=e(t[r]);return n}((t=t.replace(h,".")).split("."),e).join(".");return r+i}function g(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e}var m=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},b=function(t,e,n){var r=0;for(t=n?v(t/700):t>>1,t+=v(t/e);t>455;r+=36)t=v(t/35);return v(r+36*t/(t+38))},w=function(t){var e,n=[],r=t.length,i=0,o=128,a=72,u=t.lastIndexOf("-");u<0&&(u=0);for(var s=0;s<u;++s)t.charCodeAt(s)>=128&&_("not-basic"),n.push(t.charCodeAt(s));for(var l=u>0?u+1:0;l<r;){for(var f=i,h=1,d=36;;d+=36){l>=r&&_("invalid-input");var p=(e=t.charCodeAt(l++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36;(p>=36||p>v((c-i)/h))&&_("overflow"),i+=p*h;var y=d<=a?1:d>=a+26?26:d-a;if(p<y)break;var g=36-y;h>v(c/g)&&_("overflow"),h*=g}var m=n.length+1;a=b(i-f,m,0==f),v(i/m)>c-o&&_("overflow"),o+=v(i/m),i%=m,n.splice(i++,0,o)}return String.fromCodePoint.apply(String,n)},k=function(t){var e=[],n=(t=g(t)).length,r=128,i=0,o=72,a=!0,u=!1,s=void 0;try{for(var l,f=t[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=l.value;h<128&&e.push(p(h))}}catch(t){u=!0,s=t}finally{try{!a&&f.return&&f.return()}finally{if(u)throw s}}var d=e.length,y=d;for(d&&e.push("-");y<n;){var w=c,k=!0,E=!1,S=void 0;try{for(var O,I=t[Symbol.iterator]();!(k=(O=I.next()).done);k=!0){var T=O.value;T>=r&&T<w&&(w=T)}}catch(t){E=!0,S=t}finally{try{!k&&I.return&&I.return()}finally{if(E)throw S}}var C=y+1;w-r>v((c-i)/C)&&_("overflow"),i+=(w-r)*C,r=w;var x=!0,N=!1,P=void 0;try{for(var R,A=t[Symbol.iterator]();!(x=(R=A.next()).done);x=!0){var j=R.value;if(j<r&&++i>c&&_("overflow"),j==r){for(var U=i,D=36;;D+=36){var L=D<=o?1:D>=o+26?26:D-o;if(U<L)break;var M=U-L,F=36-L;e.push(p(m(L+M%F,0))),U=v(M/F)}e.push(p(m(U,0))),o=b(i,C,y==d),i=0,++y}}}catch(t){N=!0,P=t}finally{try{!x&&A.return&&A.return()}finally{if(N)throw P}}++i,++r}return e.join("")},E={version:"2.1.0",ucs2:{decode:g,encode:function(t){return String.fromCodePoint.apply(String,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))}},decode:w,encode:k,toASCII:function(t){return y(t,(function(t){return f.test(t)?"xn--"+k(t):t}))},toUnicode:function(t){return y(t,(function(t){return l.test(t)?w(t.slice(4).toLowerCase()):t}))}},S={};function O(t){var e=t.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function I(t){for(var e="",n=0,r=t.length;n<r;){var i=parseInt(t.substr(n+1,2),16);if(i<128)e+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var o=parseInt(t.substr(n+4,2),16);e+=String.fromCharCode((31&i)<<6|63&o)}else e+=t.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var a=parseInt(t.substr(n+4,2),16),u=parseInt(t.substr(n+7,2),16);e+=String.fromCharCode((15&i)<<12|(63&a)<<6|63&u)}else e+=t.substr(n,9);n+=9}else e+=t.substr(n,3),n+=3}return e}function T(t,e){function n(t){var n=I(t);return n.match(e.UNRESERVED)?n:t}return t.scheme&&(t.scheme=String(t.scheme).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(e.PCT_ENCODED,n).replace(e.NOT_USERINFO,O).replace(e.PCT_ENCODED,i)),void 0!==t.host&&(t.host=String(t.host).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_HOST,O).replace(e.PCT_ENCODED,i)),void 0!==t.path&&(t.path=String(t.path).replace(e.PCT_ENCODED,n).replace(t.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,O).replace(e.PCT_ENCODED,i)),void 0!==t.query&&(t.query=String(t.query).replace(e.PCT_ENCODED,n).replace(e.NOT_QUERY,O).replace(e.PCT_ENCODED,i)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(e.PCT_ENCODED,n).replace(e.NOT_FRAGMENT,O).replace(e.PCT_ENCODED,i)),t}function C(t){return t.replace(/^0*(.*)/,"$1")||"0"}function x(t,e){var n=t.match(e.IPV4ADDRESS)||[],r=s(n,2)[1];return r?r.split(".").map(C).join("."):t}function N(t,e){var n=t.match(e.IPV6ADDRESS)||[],r=s(n,3),i=r[1],o=r[2];if(i){for(var a=i.toLowerCase().split("::").reverse(),u=s(a,2),c=u[0],l=u[1],f=l?l.split(":").map(C):[],h=c.split(":").map(C),d=e.IPV4ADDRESS.test(h[h.length-1]),v=d?7:8,p=h.length-v,_=Array(v),y=0;y<v;++y)_[y]=f[y]||h[p+y]||"";d&&(_[v-1]=x(_[v-1],e));var g=_.reduce((function(t,e,n){if(!e||"0"===e){var r=t[t.length-1];r&&r.index+r.length===n?r.length++:t.push({index:n,length:1})}return t}),[]).sort((function(t,e){return e.length-t.length}))[0],m=void 0;if(g&&g.length>1){var b=_.slice(0,g.index),w=_.slice(g.index+g.length);m=b.join(":")+"::"+w.join(":")}else m=_.join(":");return o&&(m+="%"+o),m}return t}var P=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,R=void 0==="".match(/(){0}/)[1];function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==e.iri?u:a;"suffix"===e.reference&&(t=(e.scheme?e.scheme+":":"")+"//"+t);var i=t.match(P);if(i){R?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==t.indexOf("@")?i[3]:void 0,n.host=-1!==t.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==t.indexOf("?")?i[7]:void 0,n.fragment=-1!==t.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=N(x(n.host,r),r)),void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?n.reference="relative":void 0===n.fragment?n.reference="absolute":n.reference="uri":n.reference="same-document",e.reference&&"suffix"!==e.reference&&e.reference!==n.reference&&(n.error=n.error||"URI is not a "+e.reference+" reference.");var o=S[(e.scheme||n.scheme||"").toLowerCase()];if(e.unicodeSupport||o&&o.unicodeSupport)T(n,r);else{if(n.host&&(e.domainHost||o&&o.domainHost))try{n.host=E.toASCII(n.host.replace(r.PCT_ENCODED,I).toLowerCase())}catch(t){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+t}T(n,a)}o&&o.parse&&o.parse(n,e)}else n.error=n.error||"URI can not be parsed.";return n}var j=/^\.\.?\//,U=/^\/\.(\/|$)/,D=/^\/\.\.(\/|$)/,L=/^\/?(?:.|\n)*?(?=\/|$)/;function M(t){for(var e=[];t.length;)if(t.match(j))t=t.replace(j,"");else if(t.match(U))t=t.replace(U,"/");else if(t.match(D))t=t.replace(D,"/"),e.pop();else if("."===t||".."===t)t="";else{var n=t.match(L);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];t=t.slice(r.length),e.push(r)}return e.join("")}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.iri?u:a,r=[],i=S[(e.scheme||t.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(t,e),t.host)if(n.IPV6ADDRESS.test(t.host));else if(e.domainHost||i&&i.domainHost)try{t.host=e.iri?E.toUnicode(t.host):E.toASCII(t.host.replace(n.PCT_ENCODED,I).toLowerCase())}catch(n){t.error=t.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+n}T(t,n),"suffix"!==e.reference&&t.scheme&&(r.push(t.scheme),r.push(":"));var o=function(t,e){var n=!1!==e.iri?u:a,r=[];return void 0!==t.userinfo&&(r.push(t.userinfo),r.push("@")),void 0!==t.host&&r.push(N(x(String(t.host),n),n).replace(n.IPV6ADDRESS,(function(t,e,n){return"["+e+(n?"%25"+n:"")+"]"}))),"number"==typeof t.port&&(r.push(":"),r.push(t.port.toString(10))),r.length?r.join(""):void 0}(t,e);if(void 0!==o&&("suffix"!==e.reference&&r.push("//"),r.push(o),t.path&&"/"!==t.path.charAt(0)&&r.push("/")),void 0!==t.path){var s=t.path;e.absolutePath||i&&i.absolutePath||(s=M(s)),void 0===o&&(s=s.replace(/^\/\//,"/%2F")),r.push(s)}return void 0!==t.query&&(r.push("?"),r.push(t.query)),void 0!==t.fragment&&(r.push("#"),r.push(t.fragment)),r.join("")}function V(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(t=A(F(t,n),n),e=A(F(e,n),n)),!(n=n||{}).tolerant&&e.scheme?(r.scheme=e.scheme,r.userinfo=e.userinfo,r.host=e.host,r.port=e.port,r.path=M(e.path||""),r.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(r.userinfo=e.userinfo,r.host=e.host,r.port=e.port,r.path=M(e.path||""),r.query=e.query):(e.path?("/"===e.path.charAt(0)?r.path=M(e.path):(void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?r.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:r.path=e.path:r.path="/"+e.path,r.path=M(r.path)),r.query=e.query):(r.path=t.path,void 0!==e.query?r.query=e.query:r.query=t.query),r.userinfo=t.userinfo,r.host=t.host,r.port=t.port),r.scheme=t.scheme),r.fragment=e.fragment,r}function B(t,e){return t&&t.toString().replace(e&&e.iri?u.PCT_ENCODED:a.PCT_ENCODED,I)}var q={scheme:"http",domainHost:!0,parse:function(t,e){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function(t,e){return t.port!==("https"!==String(t.scheme).toLowerCase()?80:443)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},z={scheme:"https",domainHost:q.domainHost,parse:q.parse,serialize:q.serialize},H={},W="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",G="[0-9A-Fa-f]",Z=n(n("%[EFef][0-9A-Fa-f]%"+G+G+"%"+G+G)+"|"+n("%[89A-Fa-f][0-9A-Fa-f]%"+G+G)+"|"+n("%"+G+G)),K=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),J=new RegExp(W,"g"),Y=new RegExp(Z,"g"),X=new RegExp(e("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',K),"g"),$=new RegExp(e("[^]",W,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),Q=$;function tt(t){var e=I(t);return e.match(J)?e:t}var et={scheme:"mailto",parse:function(t,e){var n=t,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,o={},a=n.query.split("&"),u=0,s=a.length;u<s;++u){var c=a[u].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),f=0,h=l.length;f<h;++f)r.push(l[f]);break;case"subject":n.subject=B(c[1],e);break;case"body":n.body=B(c[1],e);break;default:i=!0,o[B(c[0],e)]=B(c[1],e)}}i&&(n.headers=o)}n.query=void 0;for(var d=0,v=r.length;d<v;++d){var p=r[d].split("@");if(p[0]=B(p[0]),e.unicodeSupport)p[1]=B(p[1],e).toLowerCase();else try{p[1]=E.toASCII(B(p[1],e).toLowerCase())}catch(t){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}r[d]=p.join("@")}return n},serialize:function(t,e){var n,r=t,o=null!=(n=t.to)?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(o){for(var a=0,u=o.length;a<u;++a){var s=String(o[a]),c=s.lastIndexOf("@"),l=s.slice(0,c).replace(Y,tt).replace(Y,i).replace(X,O),f=s.slice(c+1);try{f=e.iri?E.toUnicode(f):E.toASCII(B(f,e).toLowerCase())}catch(t){r.error=r.error||"Email address's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+t}o[a]=l+"@"+f}r.path=o.join(",")}var h=t.headers=t.headers||{};t.subject&&(h.subject=t.subject),t.body&&(h.body=t.body);var d=[];for(var v in h)h[v]!==H[v]&&d.push(v.replace(Y,tt).replace(Y,i).replace($,O)+"="+h[v].replace(Y,tt).replace(Y,i).replace(Q,O));return d.length&&(r.query=d.join("&")),r}},nt=/^([^\:]+)\:(.*)/,rt={scheme:"urn",parse:function(t,e){var n=t.path&&t.path.match(nt),r=t;if(n){var i=e.scheme||r.scheme||"urn",o=n[1].toLowerCase(),a=n[2],u=i+":"+(e.nid||o),s=S[u];r.nid=o,r.nss=a,r.path=void 0,s&&(r=s.parse(r,e))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(t,e){var n=e.scheme||t.scheme||"urn",r=t.nid,i=n+":"+(e.nid||r),o=S[i];o&&(t=o.serialize(t,e));var a=t,u=t.nss;return a.path=(r||e.nid)+":"+u,a}},it=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ot={scheme:"urn:uuid",parse:function(t,e){var n=t;return n.uuid=n.nss,n.nss=void 0,e.tolerant||n.uuid&&n.uuid.match(it)||(n.error=n.error||"UUID is not valid."),n},serialize:function(t,e){var n=t;return n.nss=(t.uuid||"").toLowerCase(),n}};S[q.scheme]=q,S[z.scheme]=z,S[et.scheme]=et,S[rt.scheme]=rt,S[ot.scheme]=ot,t.SCHEMES=S,t.pctEncChar=O,t.pctDecChars=I,t.parse=A,t.removeDotSegments=M,t.serialize=F,t.resolveComponents=V,t.resolve=function(t,e,n){var r=function(t,e){var n=t;if(e)for(var r in e)n[r]=e[r];return n}({scheme:"null"},n);return F(V(A(t,r),A(e,r),r,!0),r)},t.normalize=function(t,e){return"string"==typeof t?t=F(A(t,e),e):"object"===r(t)&&(t=A(F(t,e),e)),t},t.equal=function(t,e,n){return"string"==typeof t?t=F(A(t,n),n):"object"===r(t)&&(t=F(t,n)),"string"==typeof e?e=F(A(e,n),n):"object"===r(e)&&(e=F(e,n)),t===e},t.escapeComponent=function(t,e){return t&&t.toString().replace(e&&e.iri?u.ESCAPE:a.ESCAPE,O)},t.unescapeComponent=B,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(41)),u=n(26),s=r(n(56)),c=function(){function t(e,n){(0,i.default)(this,t),this._connectionProvider=e,this._successCallback=n}return(0,o.default)(t,[{key:"verify",value:function(){var t=this;(function(t){var e=new a.default(u.READ,t);e.initializeConnection();var n=new s.default;return e.getConnection(n).then((function(t){return e.close().then((function(){return t.server}))})).catch((function(t){return e.close().catch((function(t){})).then((function(){return Promise.reject(t)}))}))})(this._connectionProvider).then((function(e){t._successCallback&&t._successCallback(e)})).catch((function(t){}))}}]),t}();e.default=c},function(t,e,n){"use strict";var r=n(12),i=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(n(1)),a=i(n(2)),u=i(n(7)),s=i(n(4)),c=i(n(8)),l=n(26),f=n(3),h=n(127),d=r(n(264)),v=r(n(265)),p=i(n(131)),_=i(n(266));var y=function(t){function e(t,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(0,o.default)(this,e),(i=(0,u.default)(this,(0,s.default)(e).call(this,t,r,a,function(t){if("TRUST_ON_FIRST_USE"===t.trust)throw(0,f.newError)("The chosen trust mode is not compatible with a routing driver");var e=t.resolver;if(e&&"function"!=typeof e)throw new TypeError("Configured resolver should be a function. Got: ".concat(e));return t}(c))))._routingContext=n,i}return(0,c.default)(e,t),(0,a.default)(e,[{key:"_afterConstruction",value:function(){this._log.info("Routing driver ".concat(this._id," created for server address ").concat(this._address))}},{key:"_createConnectionProvider",value:function(t,n,r){var i,o=e._createLoadBalancingStrategy(this._config,n),a=(i=this._config,new _.default(i.resolver));return new h.LoadBalancer(t,this._routingContext,n,o,a,r,this._log)}},{key:"_createConnectionErrorHandler",value:function(){var t=this;return new p.default(f.SESSION_EXPIRED,(function(e,n){return t._handleUnavailability(e,n)}),(function(e,n){return t._handleWriteFailure(e,n)}))}},{key:"_handleUnavailability",value:function(t,e){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(e," because of an error ").concat(t.code," '").concat(t.message,"'")),this._connectionProvider.forget(e),t}},{key:"_handleWriteFailure",value:function(t,e){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(e," because of an error ").concat(t.code," '").concat(t.message,"'")),this._connectionProvider.forgetWriter(e),(0,f.newError)("No longer possible to write to server at "+e,f.SESSION_EXPIRED)}}],[{key:"_createLoadBalancingStrategy",value:function(t,e){var n=t.loadBalancingStrategy;if(n&&n!==d.LEAST_CONNECTED_STRATEGY_NAME){if(n===v.ROUND_ROBIN_STRATEGY_NAME)return new v.default;throw(0,f.newError)("Unknown load balancing strategy: "+n)}return new d.default(e)}}]),e}(l.Driver);e.default=y},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.LEAST_CONNECTED_STRATEGY_NAME=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(7)),u=r(n(4)),s=r(n(8)),c=r(n(132)),l=r(n(133));e.LEAST_CONNECTED_STRATEGY_NAME="least_connected";var f=function(t){function e(t){var n;return(0,i.default)(this,e),(n=(0,a.default)(this,(0,u.default)(e).call(this)))._readersIndex=new c.default,n._writersIndex=new c.default,n._connectionPool=t,n}return(0,s.default)(e,t),(0,o.default)(e,[{key:"selectReader",value:function(t){return this._select(t,this._readersIndex)}},{key:"selectWriter",value:function(t){return this._select(t,this._writersIndex)}},{key:"_select",value:function(t,e){var n=t.length;if(0===n)return null;var r=e.next(n),i=r,o=null,a=Number.MAX_SAFE_INTEGER;do{var u=t[i],s=this._connectionPool.activeResourceCount(u);s<a&&(o=u,a=s),i===n-1?i=0:i++}while(i!==r);return o}}]),e}(l.default);e.default=f},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ROUND_ROBIN_STRATEGY_NAME=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(7)),u=r(n(4)),s=r(n(8)),c=r(n(132)),l=r(n(133));e.ROUND_ROBIN_STRATEGY_NAME="round_robin";var f=function(t){function e(){var t;return(0,i.default)(this,e),(t=(0,a.default)(this,(0,u.default)(e).call(this)))._readersIndex=new c.default,t._writersIndex=new c.default,t}return(0,s.default)(e,t),(0,o.default)(e,[{key:"selectReader",value:function(t){return this._select(t,this._readersIndex)}},{key:"selectWriter",value:function(t){return this._select(t,this._writersIndex)}},{key:"_select",value:function(t,e){var n=t.length;return 0===n?null:t[e.next(n)]}}]),e}(l.default);e.default=f},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(59));function u(t){return Promise.resolve([t])}var s=function(){function t(e){(0,i.default)(this,t),this._resolverFunction=e||u}return(0,o.default)(t,[{key:"resolve",value:function(t){var e=this;return new Promise((function(n){return n(e._resolverFunction(t.asHostPort()))})).then((function(t){if(!Array.isArray(t))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(t));return t.map((function(t){return a.default.fromUrl(t)}))}))}}]),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default="0.0.0-dev"},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(7)),u=r(n(4)),s=r(n(8)),c=r(n(26)),l=r(n(269)),f=r(n(272)),h=r(n(59)),d=function(t){function e(t,n,r,o){var s;return(0,i.default)(this,e),(s=(0,a.default)(this,(0,u.default)(e).call(this,h.default.fromUrl(t.hostAndPort),n,r,o)))._url=t,s._sessionTracker=new f.default,s}return(0,s.default)(e,t),(0,o.default)(e,[{key:"session",value:function(){return new l.default(this._url,this._authToken,this._config,this._sessionTracker)}},{key:"close",value:function(){return this._sessionTracker.close()}}]),e}(c.default);e.default=d},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(7)),u=r(n(4)),s=r(n(114)),c=r(n(8)),l=n(26),f=r(n(79)),h=n(10),d=n(3),v=r(n(270)),p=n(41),_=r(n(55)),y=function(t){function e(t,n,r,o){var c;return(0,i.default)(this,e),(c=(0,a.default)(this,(0,u.default)(e).call(this,l.WRITE,null,null,r)))._ongoingTransactionIds=[],c._serverInfoSupplier=function(t){return function(){return{server:{address:t.hostAndPort}}}}(t),c._requestRunner=new v.default(t,n),c._sessionTracker=o,c._sessionTracker.sessionOpened((0,s.default)(c)),c}return(0,c.default)(e,t),(0,o.default)(e,[{key:"run",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,h.validateStatementAndParameters)(t,n),i=r.query,o=r.params;return this._requestRunner.beginTransaction().then((function(t){return e._ongoingTransactionIds.push(t),e._requestRunner.runQuery(t,i,o).then((function(n){return n.hasFailed()?g(t,n,e._requestRunner):m(t,n,e._requestRunner)})).then((function(n){return e._ongoingTransactionIds=e._ongoingTransactionIds.filter((function(e){return e!==t})),new _.default(n,i,o,e._serverInfoSupplier,p.EMPTY_CONNECTION_HOLDER)}))}))}},{key:"beginTransaction",value:function(){w()}},{key:"readTransaction",value:function(){w()}},{key:"writeTransaction",value:function(){w()}},{key:"lastBookmark",value:function(){throw new d.Neo4jError("Experimental HTTP driver does not support bookmarks and routing")}},{key:"close",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},n=this._ongoingTransactionIds.map((function(e){return b(e,t._requestRunner)}));Promise.all(n).then((function(){t._sessionTracker.sessionClosed(t),e()}))}}]),e}(f.default);function g(t,e,n){return b(t,n).then((function(){return e}))}function m(t,e,n){return n.commitTransaction(t).catch((function(t){e.onError(t)})).then((function(){return e}))}function b(t,e){return e.rollbackTransaction(t).catch((function(){}))}function w(){throw new d.Neo4jError("Experimental HTTP driver does not support transactions")}e.default=y},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=r(n(56)),u=r(n(271)),s=n(3),c=function(){function t(e,n){(0,i.default)(this,t),this._url=e,this._authToken=n,this._converter=new u.default}return(0,o.default)(t,[{key:"beginTransaction",value:function(){var t=this;return l("POST",h(this._url),null,this._authToken).then((function(e){var n=t._converter.extractError(e);if(n)throw n;return t._converter.extractTransactionId(e)}))}},{key:"commitTransaction",value:function(t){var e=this;return l("POST",function(t,e){return d(t,e)+"/commit"}(this._url,t),null,this._authToken).then((function(t){var n=e._converter.extractError(t);if(n)throw n}))}},{key:"rollbackTransaction",value:function(t){var e=this;return l("DELETE",d(this._url,t),null,this._authToken).then((function(t){var n=e._converter.extractError(t);if(n)throw n}))}},{key:"runQuery",value:function(t,e,n){var r=this,i=new a.default,o=d(this._url,t),u=function(t,e,n,r){try{return function(t,e,n){var r=n.encodeStatementParameters(e);return JSON.stringify({statements:[{statement:t,parameters:r,resultDataContents:["row","graph"],includeStats:!0}]})}(t,e,n)}catch(t){return r.onError(t),null}}(e,n,this._converter,i);return u?l("POST",o,u,this._authToken).then((function(t){!function(t,e,n){if(!t)return;try{!function(t,e,n){var r=e.extractError(t);if(r)n.onError(r);else{var i=e.extractRecordMetadata(t);n.onCompleted(i),e.extractRawRecords(t).forEach((function(t){return n.onNext(t)}));var o=e.extractStatementMetadata(t);n.onCompleted(o)}}(t,e,n)}catch(t){n.onError(t)}}(t,r._converter,i)})).catch((function(t){i.onError(t)})).then((function(){return i})):Promise.resolve(i)}}]),t}();function l(t,e,n,r){try{var i={method:t,headers:f(r),body:n};return new Promise((function(t,n){fetch(e,i).then((function(t){return t.json()})).then((function(e){return t(e)})).catch((function(t){return n(new s.Neo4jError(t.message,s.SERVICE_UNAVAILABLE))}))}))}catch(t){return Promise.reject(t)}}function f(t){var e=new Headers;return e.append("Accept","application/json; charset=UTF-8"),e.append("Content-Type","application/json"),e.append("Authorization","Basic "+btoa(t.principal+":"+t.credentials)),e}function h(t){return function(t,e){return"".concat(t.scheme,"://").concat(t.host,":").concat(t.port).concat(e)}(t,"/db/data/transaction")}function d(t,e){return h(t)+"/"+e}e.default=c},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(115)),o=r(n(129)),a=r(n(40)),u=r(n(1)),s=r(n(2)),c=n(20),l=n(78),f=n(3),h=n(83),d=n(58),v=function(){function t(){(0,u.default)(this,t)}return(0,s.default)(t,[{key:"encodeStatementParameters",value:function(t){return p(t)}},{key:"extractError",value:function(t){var e=t.errors;if(e){var n=e[0];if(n){var r=t.password_change?"Neo.ClientError.Security.CredentialsExpired":n.code,i=n.message;return new f.Neo4jError(i,r)}}return null}},{key:"extractTransactionId",value:function(t){var e=t.commit;if(e){var n=e.replace("/commit",""),r=n.substring(n.lastIndexOf("/")+1),i=parseInt(r,10);if(i||0===i)return i}throw new f.Neo4jError("Unable to extract transaction id from the response JSON: ".concat(JSON.stringify(t)))}},{key:"extractRecordMetadata",value:function(t){var e=y(t);return{fields:e?e.columns:[]}}},{key:"extractRawRecords",value:function(t){var e=y(t);if(e){var n=e.data;if(n)return n.map((function(t){return function(t){var e=t.row,n=function(t){var e=t.graph;if(e){var n=e.nodes;if(n)return n.reduce((function(t,e){var n=m(e.id),r=e.labels,i=g(e.properties);return t[e.id]=new l.Node(n,r,i),t}),{})}return{}}(t),r=function(t){var e=t.graph;if(e){var n=e.relationships;if(n)return n.reduce((function(t,e){var n=m(e.id),r=m(e.startNode),i=m(e.endNode),o=e.type,a=g(e.properties);return t[e.id]=new l.Relationship(n,r,i,o,a),t}),{})}return{}}(t);if(e)return e.map((function(e,a){return function(t,e,n,r){var a=e.row?e.row[t]:null,u=e.meta?e.meta[t]:null;return u?function(t,e,n,r){return a=e,b("node",a)?n[e.id]:function(t){return b("relationship",t)}(e)?r[e.id]:function(t){return Array.isArray(t)}(e)?function(t,e,n){for(var r=null,i=null,o=[],a=0;a<t.length;a++){var u=t[a],s=u.id,c=u.type,h=null===r&&null===i||null!==r&&null!==i;if(h&&"node"!==c)throw new f.Neo4jError("Unable to parse path, node expected but got: ".concat(JSON.stringify(u)," in ").concat(JSON.stringify(t)));if(!h&&"node"===c)throw new f.Neo4jError("Unable to parse path, relationship expected but got: ".concat(JSON.stringify(u)," in ").concat(JSON.stringify(t)));if(h){var d=e[s];if(null===r)r=d;else{if(null===r||null===i)throw new f.Neo4jError("Unable to parse path, illegal node configuration: ".concat(JSON.stringify(t)));var v=new l.PathSegment(r,i,d);o.push(v),r=d,i=null}}else{if(null!==i)throw new f.Neo4jError("Unable to parse path, illegal relationship configuration: ".concat(JSON.stringify(t)));i=n[s]}}var p=o[o.length-1];if(p&&p.end!==r||null!==i)throw new f.Neo4jError("Unable to parse path: ".concat(JSON.stringify(t)));return function(t){var e=t[0].start,n=t[t.length-1].end;return new l.Path(e,n,t)}(o)}(e,n,r):function(t){return b("point",t)}(e)?function(t){if("Point"!==t.type)throw new f.Neo4jError("Unexpected Point type received: ".concat(JSON.stringify(t)));var e=t.coordinates;if(!Array.isArray(e)&&(2!==e.length||3!==e.length))throw new f.Neo4jError("Unexpected Point coordinates received: ".concat(JSON.stringify(t)));var n=function(t){var e=t.crs;if(!e||!e.name)throw new f.Neo4jError("Unexpected Point crs received: ".concat(JSON.stringify(t)));var n=e.name.toLowerCase();if("wgs-84"===n)return 4326;if("wgs-84-3d"===n)return 4979;if("cartesian"===n)return 7203;if("cartesian-3d"===n)return 9157;throw new f.Neo4jError("Unexpected Point crs received: ".concat(JSON.stringify(t)))}(t);return(0,i.default)(h.Point,[n].concat((0,o.default)(e)))}(t):t;var a}(a,u,n,r):g(a)}(a,t,n,r)}));return[]}(t)}))}return[]}},{key:"extractStatementMetadata",value:function(t){var e=y(t);if(e){var n=e.stats;if(n)return{stats:Object.keys(n).reduce((function(t,e){return"contains_updates"===e?t:(t[("relationship_deleted"===e?"relationships_deleted":e).replace("_","-")]=n[e],t)}),{})}}return{}}}]),t}();function p(t){return t&&"object"===(0,a.default)(t)?Object.keys(t).reduce((function(e,n){return e[n]=function t(e){if(e instanceof l.Node)throw new f.Neo4jError("It is not allowed to pass nodes in query parameters",f.PROTOCOL_ERROR);if(e instanceof l.Relationship)throw new f.Neo4jError("It is not allowed to pass relationships in query parameters",f.PROTOCOL_ERROR);if(e instanceof l.Path)throw new f.Neo4jError("It is not allowed to pass paths in query parameters",f.PROTOCOL_ERROR);if((0,h.isPoint)(e))throw _("points");if((0,d.isDate)(e))throw _("dates");if((0,d.isDateTime)(e))throw _("date-time");if((0,d.isDuration)(e))throw _("durations");if((0,d.isLocalDateTime)(e))throw _("local date-time");if((0,d.isLocalTime)(e))throw _("local time");if((0,d.isTime)(e))throw _("time");return(0,c.isInt)(e)?e.toNumber():Array.isArray(e)?e.map((function(e){return t(e)})):"object"===(0,a.default)(e)?p(e):e}(t[n]),e}),{}):t}function _(t){return new f.Neo4jError("It is not allowed to pass ".concat(t," in query parameters when using HTTP endpoint. ")+"Please consider using Cypher functions to create ".concat(t," so that query parameters are plain objects."),f.PROTOCOL_ERROR)}function y(t){var e=t.results;if(e){var n=e[0];if(n)return n}return null}function g(t){return null==t||void 0===t?null:"number"==typeof t?m(t):Array.isArray(t)?t.map((function(t){return g(t)})):"object"===(0,a.default)(t)?Object.keys(t).reduce((function(e,n){return e[n]=g(t[n]),e}),{}):t}function m(t){return"number"==typeof t?t:Number(t)}function b(t,e){return!Array.isArray(e)&&"object"===(0,a.default)(e)&&e.type===t}e.default=v},function(t,e,n){"use strict";var r=n(0);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(1)),o=r(n(2)),a=function(){function t(){(0,i.default)(this,t),this._openSessions=new Set}return(0,o.default)(t,[{key:"sessionOpened",value:function(t){this._openSessions.add(t)}},{key:"sessionClosed",value:function(t){this._openSessions.delete(t)}},{key:"close",value:function(){var t=Array.from(this._openSessions);return this._openSessions.clear(),Promise.all(t.map((function(t){return function(t){return new Promise((function(e){t.close((function(){e()}))}))}(t)})))}}]),t}();e.default=a}])}));
//# sourceMappingURL=neo4jE.js.map