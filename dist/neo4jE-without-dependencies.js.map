{"version":3,"sources":["webpack://Neo4jE/webpack/universalModuleDefinition","webpack://Neo4jE/webpack/bootstrap","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/regenerator\",\"commonjs2\":\"@babel/runtime-corejs3/regenerator\",\"amd\":\"@babel/runtime-corejs3/regenerator\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/helpers/defineProperty\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/defineProperty\",\"amd\":\"@babel/runtime-corejs3/helpers/defineProperty\"}","webpack://Neo4jE/external {\"commonjs\":\"neo4j-driver\",\"commonjs2\":\"neo4j-driver\",\"amd\":\"neo4j-driver\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/object/values\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/object/values\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/object/values\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/map\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/map\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/map\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/core-js/get-iterator\",\"commonjs2\":\"@babel/runtime-corejs3/core-js/get-iterator\",\"amd\":\"@babel/runtime-corejs3/core-js/get-iterator\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/promise\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/promise\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/promise\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/concat\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/includes\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/includes\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/includes\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/core-js-stable/instance/find-index\",\"commonjs2\":\"@babel/runtime-corejs3/core-js-stable/instance/find-index\",\"amd\":\"@babel/runtime-corejs3/core-js-stable/instance/find-index\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/helpers/typeof\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/typeof\",\"amd\":\"@babel/runtime-corejs3/helpers/typeof\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/helpers/classCallCheck\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/classCallCheck\",\"amd\":\"@babel/runtime-corejs3/helpers/classCallCheck\"}","webpack://Neo4jE/external {\"commonjs\":\"@babel/runtime-corejs3/helpers/createClass\",\"commonjs2\":\"@babel/runtime-corejs3/helpers/createClass\",\"amd\":\"@babel/runtime-corejs3/helpers/createClass\"}","webpack://Neo4jE/./src/neo4jE.js"],"names":["root","factory","exports","module","require","define","amd","undefined","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__4__","__WEBPACK_EXTERNAL_MODULE__5__","__WEBPACK_EXTERNAL_MODULE__6__","__WEBPACK_EXTERNAL_MODULE__7__","__WEBPACK_EXTERNAL_MODULE__8__","__WEBPACK_EXTERNAL_MODULE__9__","__WEBPACK_EXTERNAL_MODULE__10__","__WEBPACK_EXTERNAL_MODULE__11__","__WEBPACK_EXTERNAL_MODULE__12__","__WEBPACK_EXTERNAL_MODULE__13__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Neo4jE","config","neo4jUri","neo4jUser","neo4jPassword","encrypted","trust","initialQuery","domId","instance","dispose","id","hide_nodes","_nodes","show_nodes","node","sub_node_ids","sub_node_id","_fold","animation","title","text","subtext","top","left","tooltip","trigger","legend","series","focusNodeAdjacency","edgeSymbol","symbolSize","type","layout","data","edges","categories","roam","itemStyle","normal","borderColor","borderWidth","shadowBlur","shadowColor","force","initLayout","layoutAnimation","repulsion","gravity","edgeLength","circular","rotateLabel","draggable","label","show","position","textStyle","fontWeight","fontSize","edgeLabel","formatter","lineStyle","color","curveness","this","_init","defaults","_config","_encrypted","_trust","_driver","Neo4j","driver","server_url","auth","basic","server_user","server_password","_initEcharts","_consoleLog","graph","setOption","option","_option","on","params","dataType","showL","op","getOption","should_expand_childs","hide_node_count","hide_node","push","should_expand_child","should_expand_child_id","hideL","_edges","_groups","group","edge","neo4jNode","labels","labelConfig","captionKey","sizeKey","sizeCypher","communityKey","identity","toInt","session","run","result","records","record","v","isInt","toNumber","sizeProp","properties","inSafeRange","e","nodeTypeConfig","relationships","weightKey","thickness","caption","from","start","to","end","source","toString","target","message","level","console_debug","console","hideLoading","showLoading","effect","cql","dataBuildPromises","limit","subscribe","onNext","recordCount","dataPromises","toObject","a","async","types","Node","buildNodeVisObject","_addNode","Relationship","buildEdgeVisObject","_addEdge","Path","startNode","endNode","segments","obj","relationship","Array","all","onCompleted","close","map_nodes","map_edges","j","groups","all_target","category","onError","error","_clear","query"],"mappings":"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","file":"neo4jE-without-dependencies.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@babel/runtime-corejs3/regenerator\"), require(\"@babel/runtime-corejs3/helpers/defineProperty\"), require(\"neo4j-driver\"), require(\"@babel/runtime-corejs3/core-js-stable/object/values\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"), require(\"@babel/runtime-corejs3/core-js/get-iterator\"), require(\"@babel/runtime-corejs3/core-js-stable/promise\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/find-index\"), require(\"@babel/runtime-corejs3/helpers/typeof\"), require(\"@babel/runtime-corejs3/helpers/classCallCheck\"), require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@babel/runtime-corejs3/regenerator\", \"@babel/runtime-corejs3/helpers/defineProperty\", \"neo4j-driver\", \"@babel/runtime-corejs3/core-js-stable/object/values\", \"@babel/runtime-corejs3/core-js-stable/instance/for-each\", \"@babel/runtime-corejs3/core-js-stable/instance/map\", \"@babel/runtime-corejs3/core-js/get-iterator\", \"@babel/runtime-corejs3/core-js-stable/promise\", \"@babel/runtime-corejs3/core-js-stable/instance/concat\", \"@babel/runtime-corejs3/core-js-stable/instance/includes\", \"@babel/runtime-corejs3/core-js-stable/instance/find-index\", \"@babel/runtime-corejs3/helpers/typeof\", \"@babel/runtime-corejs3/helpers/classCallCheck\", \"@babel/runtime-corejs3/helpers/createClass\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Neo4jE\"] = factory(require(\"@babel/runtime-corejs3/regenerator\"), require(\"@babel/runtime-corejs3/helpers/defineProperty\"), require(\"neo4j-driver\"), require(\"@babel/runtime-corejs3/core-js-stable/object/values\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"), require(\"@babel/runtime-corejs3/core-js/get-iterator\"), require(\"@babel/runtime-corejs3/core-js-stable/promise\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"), require(\"@babel/runtime-corejs3/core-js-stable/instance/find-index\"), require(\"@babel/runtime-corejs3/helpers/typeof\"), require(\"@babel/runtime-corejs3/helpers/classCallCheck\"), require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\telse\n\t\troot[\"Neo4jE\"] = factory(root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined], root[undefined]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__4__, __WEBPACK_EXTERNAL_MODULE__5__, __WEBPACK_EXTERNAL_MODULE__6__, __WEBPACK_EXTERNAL_MODULE__7__, __WEBPACK_EXTERNAL_MODULE__8__, __WEBPACK_EXTERNAL_MODULE__9__, __WEBPACK_EXTERNAL_MODULE__10__, __WEBPACK_EXTERNAL_MODULE__11__, __WEBPACK_EXTERNAL_MODULE__12__, __WEBPACK_EXTERNAL_MODULE__13__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","module.exports = __WEBPACK_EXTERNAL_MODULE__4__;","module.exports = __WEBPACK_EXTERNAL_MODULE__5__;","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","module.exports = __WEBPACK_EXTERNAL_MODULE__10__;","module.exports = __WEBPACK_EXTERNAL_MODULE__11__;","module.exports = __WEBPACK_EXTERNAL_MODULE__12__;","module.exports = __WEBPACK_EXTERNAL_MODULE__13__;","import Neo4j from 'neo4j-driver';\r\n\r\n\r\nexport default class Neo4jE {\r\n\t_nodes = {};\r\n\t_edges = {};\r\n\t_groups = {};\r\n\r\n\tinstance = {};\r\n\r\n\r\n\thide_nodes = {};\r\n\tshow_nodes = {};\r\n\r\n\r\n\tdefaults = {\r\n\t\tneo4jUri: 'bolt://localhost:7687',\r\n\t\tneo4jUser: 'neo4j',\r\n\t\tneo4jPassword: 'neo4j',\r\n\t\tencrypted: 'ENCRYPTION_OFF',\r\n\t\ttrust: 'TRUST_ALL_CERTIFICATES',\r\n\t\tinitialQuery: 'MATCH (n)-[r]->(m) RETURN * limit 200',\r\n\t\tdomId: 'echarts'\r\n\t};\r\n\r\n\r\n\tconstructor(config) {\r\n\t\tthis._init(config);\r\n\t}\r\n\r\n\t_init(config) {\r\n\t\tvar defaults = this.defaults;\r\n\t\tthis._config = config;\r\n\t\tthis._encrypted = config.encrypted || defaults.encrypted;\r\n\t\tthis._trust = config.trust || defaults.trust;\r\n\t\tthis._driver = Neo4j.driver(\r\n\t\t\tconfig.server_url || defaults.neo4jUri,\r\n\t\t\tNeo4j.auth.basic(config.server_user || defaults.neo4jUser, config.server_password || defaults.neo4jPassword),\r\n\t\t\t{\r\n\t\t\t\tencrypted: this._encrypted,\r\n\t\t\t\ttrust: this._trust\r\n\t\t\t}\r\n\t\t);\r\n\r\n\t\tthis._initEcharts();\r\n\t}\r\n\r\n\tdispose = () => {\r\n\t\tthis.instance.dispose();\r\n\t};\r\n\r\n\t_fold = (id) => {\r\n\t\t//隐藏\r\n\t\tif (this.hide_nodes[id]) return;\r\n\t\t//隐藏节点\r\n\t\t// this._consoleLog('藏了节点');\r\n\t\t// this._consoleLog(this._nodes[id]);\r\n\t\t//加入隐藏队列\r\n\t\tthis.hide_nodes[id] = this._nodes[id];\r\n\t\tdelete this.show_nodes[id];\r\n\t\tvar node = this._nodes[id];\r\n\t\tif (node.sub_node_ids) {\r\n\t\t\tObject.values(node.sub_node_ids).forEach(sub_node_id => this._fold(sub_node_id));\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t_option = {\r\n\t\tanimation: true,\r\n\t\ttitle: {\r\n\t\t\ttext: 'Les Miserables',\r\n\t\t\tsubtext: 'Default layout',\r\n\t\t\ttop: 'bottom',\r\n\t\t\tleft: 'right'\r\n\t\t},\r\n\t\ttooltip: {\r\n\t\t\ttrigger: 'item',\r\n\r\n\t\t},\r\n\t\tlegend: [],\r\n\t\tseries: [\r\n\t\t\t{\r\n\t\t\t\tfocusNodeAdjacency: true,\r\n\t\t\t\tedgeSymbol: ['circle', 'arrow'],\r\n\t\t\t\tsymbolSize: 55,\r\n\t\t\t\tname: 'Les Miserables',\r\n\t\t\t\ttype: 'graph',\r\n\t\t\t\t// layout: 'circular',\r\n\t\t\t\tlayout: 'force',\r\n\t\t\t\tdata: [],\r\n\t\t\t\tedges: [],\r\n\t\t\t\tcategories: [],\r\n\t\t\t\troam: true,\r\n\t\t\t\titemStyle: {\r\n\t\t\t\t\tnormal: {\r\n\t\t\t\t\t\tborderColor: '#fff',\r\n\t\t\t\t\t\tborderWidth: 1,\r\n\t\t\t\t\t\tshadowBlur: 10,\r\n\t\t\t\t\t\tshadowColor: 'rgba(0, 0, 0, 0.3)'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// animation: false,\r\n\t\t\t\tforce: { // 力引导图基本配置\r\n\t\t\t\t\tinitLayout: 'circular',//力引导的初始化布局，默认使用xy轴的标点\r\n\t\t\t\t\tlayoutAnimation: true,\r\n\t\t\t\t\trepulsion: 1000,\r\n\t\t\t\t\tgravity: 0,\r\n\t\t\t\t\tedgeLength: [30, 10000]\r\n\t\t\t\t},\r\n\t\t\t\tcircular: {\r\n\t\t\t\t\trotateLabel: true\r\n\t\t\t\t},\r\n\t\t\t\tdraggable: true,\r\n\t\t\t\tlabel: {\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\tposition: 'inside',\r\n\t\t\t\t\ttextStyle: { // 标签的字体样式\r\n\t\t\t\t\t\t// 'oblique' 倾斜\r\n\t\t\t\t\t\tfontWeight: 'bold', // 'normal'标准'bold'粗的'bolder'更粗的'lighter'更细的或100\r\n\t\t\t\t\t\t// | 200 | 300 | 400...\r\n\t\t\t\t\t\tfontSize: 12 // 字体大小\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tedgeLabel: {\r\n\t\t\t\t\tshow: true,\r\n\t\t\t\t\tposition: 'middle',\r\n\t\t\t\t\tformatter: p => p.data.label\r\n\t\t\t\t},\r\n\t\t\t\tlineStyle: {\r\n\t\t\t\t\tcolor: 'source',\r\n\t\t\t\t\tcurveness: 0.3,\r\n\t\t\t\t},\r\n\t\t\t\ttooltip: {\r\n\t\t\t\t\tformatter: p => {\r\n\t\t\t\t\t\treturn p.data.title;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n\t};\r\n\r\n\t_initEcharts() {\r\n\t\tthis._consoleLog(this._config.id || this.defaults.domId);\r\n\t\tvar graph = this.instance = this._config.instance;\r\n\t\t// this._consoleLog(document.getElementById(this._config.id || this.defaults.domId), 'error');\r\n\t\t// var graph = this.instance = echarts.init(document.getElementById(this._config.id || this.defaults.domId));\r\n\t\tgraph.setOption(this._config.option || this._option);\r\n\r\n\t\tgraph.on('click', (params) => {\r\n\t\t\tif (params.dataType === 'node') {\r\n\t\t\t\tthis._consoleLog(params);\r\n\r\n\t\t\t\tvar sub_node_ids = params.data.sub_node_ids;\r\n\r\n\t\t\t\tif (sub_node_ids) { //有子节点\r\n\t\t\t\t\tthis.showL();\r\n\t\t\t\t\tvar op = this.instance.getOption();\r\n\r\n\t\t\t\t\tvar should_expand_childs = [];\r\n\t\t\t\t\tvar hide_node_count = 0;\r\n\r\n\t\t\t\t\tthis._consoleLog(this.hide_nodes);\r\n\r\n\t\t\t\t\tObject.values(sub_node_ids).forEach(sub_node_id => {\r\n\t\t\t\t\t\t//只有当当前点击节点的所有节点都在隐藏列表中才需要显示\r\n\t\t\t\t\t\tvar hide_node = this.hide_nodes[sub_node_id];\r\n\t\t\t\t\t\tif (hide_node) {\r\n\t\t\t\t\t\t\t//子节点存在隐藏列表中 + 1\r\n\t\t\t\t\t\t\thide_node_count++;\r\n\t\t\t\t\t\t\tshould_expand_childs.push(hide_node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\r\n\t\t\t\t\tif (hide_node_count > 0) {\r\n\t\t\t\t\t\tthis._consoleLog('需要展开的节点');\r\n\t\t\t\t\t\tthis._consoleLog(should_expand_childs);\r\n\t\t\t\t\t\tvar data = op.series[0].data;\r\n\t\t\t\t\t\t//只要有一个子节点被隐藏了就该把该节点下的子节点先全部显示\r\n\t\t\t\t\t\tshould_expand_childs.forEach(should_expand_child => {\r\n\t\t\t\t\t\t\tthis._consoleLog(`expand ${should_expand_child.name}`);\r\n\t\t\t\t\t\t\tvar should_expand_child_id = should_expand_child.id;\r\n\t\t\t\t\t\t\tthis.show_nodes[should_expand_child_id] = should_expand_child;\r\n\t\t\t\t\t\t\tdata.push(should_expand_child);\r\n\t\t\t\t\t\t\t//从隐藏队列中移除\r\n\t\t\t\t\t\t\tdelete this.hide_nodes[should_expand_child_id];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._consoleLog('需要隐藏的节点');\r\n\t\t\t\t\t\tthis._consoleLog(sub_node_ids);\r\n\r\n\t\t\t\t\t\tObject.values(sub_node_ids).forEach(sub_node_id => {\r\n\t\t\t\t\t\t\tthis._fold(sub_node_id);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\top.series[0].data = Object.values(this.show_nodes);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgraph.setOption(op);\r\n\t\t\t\t\tthis.hideL();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t_clear() {\r\n\t\tthis._consoleLog('开始清理');\r\n\t\tthis.hide_nodes = {};\r\n\t\tthis.show_nodes = {};\r\n\t\tthis._nodes = {};\r\n\t\tthis._edges = {};\r\n\t\tthis._groups = {};\r\n\t\tthis._consoleLog('清理完毕');\r\n\t}\r\n\r\n\t_addNode(node) {\r\n\t\tthis._nodes[node.id] = node;\r\n\t\tnode.group && (this._groups[node.group] = {name: node.group});\r\n\t}\r\n\r\n\t_addEdge(edge) {\r\n\t\tthis._edges[edge.id] = edge;\r\n\t}\r\n\r\n\t/**\r\n\t * Build node object for vis from a neo4j Node\r\n\t * FIXME: use config\r\n\t * FIXME: move to private api\r\n\t * @param neo4jNode\r\n\t * @returns {{}}\r\n\t */\r\n\tasync buildNodeVisObject(neo4jNode) {\r\n\t\tlet node = {};\r\n\t\tlet label = neo4jNode.labels[0];\r\n\r\n\t\tlet labelConfig = this._config && this._config.labels && this._config.labels[label];\r\n\r\n\t\tconst captionKey = labelConfig && labelConfig['caption'];\r\n\t\tconst sizeKey = labelConfig && labelConfig['size'];\r\n\t\tconst sizeCypher = labelConfig && labelConfig['sizeCypher'];\r\n\t\tconst communityKey = labelConfig && labelConfig['community'];\r\n\r\n\t\tnode.id = neo4jNode.identity.toInt();\r\n\r\n\t\t// node size\r\n\r\n\t\tif (sizeCypher) {\r\n\t\t\t// use a cypher statement to determine the size of the node\r\n\t\t\t// the cypher statement will be passed a parameter {id} with the value\r\n\t\t\t// of the internal node id\r\n\r\n\t\t\tlet session = this._driver.session();\r\n\t\t\tconst result = await session.run(sizeCypher, {id: Neo4j.int(node.id)});\r\n\t\t\tfor (let record of result.records) {\r\n\t\t\t\trecord.forEach((v) => {\r\n\t\t\t\t\tif (typeof v === 'number') {\r\n\t\t\t\t\t\tnode.value = v;\r\n\t\t\t\t\t} else if (Neo4j.isInt(v)) {\r\n\t\t\t\t\t\tnode.value = v.toNumber();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} else if (typeof sizeKey === 'number') {\r\n\t\t\tnode.value = sizeKey;\r\n\t\t} else {\r\n\t\t\tlet sizeProp = neo4jNode.properties[sizeKey];\r\n\r\n\t\t\tif (sizeProp && typeof sizeProp === 'number') {\r\n\t\t\t\t// property value is a number, OK to use\r\n\t\t\t\tnode.value = sizeProp;\r\n\t\t\t} else if (sizeProp && typeof sizeProp === 'object' && Neo4j.isInt(sizeProp)) {\r\n\t\t\t\t// property value might be a Neo4j Integer, check if we can call toNumber on it:\r\n\t\t\t\tif (sizeProp.inSafeRange()) {\r\n\t\t\t\t\tnode.value = sizeProp.toNumber();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// couldn't convert to Number, use default\r\n\t\t\t\t\tnode.value = 1.0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tnode.value = 1.0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// node caption\r\n\t\tif (typeof captionKey === 'function') {\r\n\t\t\tnode.label = captionKey(neo4jNode);\r\n\t\t} else {\r\n\t\t\tnode.label = neo4jNode.properties[captionKey] || label || '';\r\n\t\t}\r\n\r\n\t\t// community\r\n\t\t// behavior: color by value of community property (if set in config), then color by label\r\n\t\tif (!communityKey) {\r\n\t\t\tnode.group = label;\r\n\t\t} else {\r\n\t\t\ttry {\r\n\t\t\t\tif (neo4jNode.properties[communityKey]) {\r\n\t\t\t\t\tnode.group = neo4jNode.properties[communityKey].toNumber() || label || 0;  // FIXME: cast to Integer\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnode.group = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch (e) {\r\n\t\t\t\tnode.group = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\t// set all properties as tooltip\r\n\t\tnode.title = '';\r\n\t\tfor (let key in neo4jNode.properties) {\r\n\t\t\tif (neo4jNode.properties.hasOwnProperty(key)) {\r\n\t\t\t\tnode.title += `<strong>${key}:</strong> ${neo4jNode.properties[key]}<br>`;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn node;\r\n\t}\r\n\r\n\t/**\r\n\t * Build edge object for vis from a neo4j Relationship\r\n\t * @param r\r\n\t * @returns {{}}\r\n\t */\r\n\tbuildEdgeVisObject(r) {\r\n\t\tconst nodeTypeConfig = this._config && this._config.relationships && this._config.relationships[r.type];\r\n\t\tlet weightKey = nodeTypeConfig && nodeTypeConfig.thickness,\r\n\t\t\tcaptionKey = nodeTypeConfig && nodeTypeConfig.caption;\r\n\r\n\t\tlet edge = {};\r\n\t\tedge.id = r.identity.toInt();\r\n\t\tedge.from = r.start.toInt();\r\n\t\tedge.to = r.end.toInt();\r\n\r\n\t\tedge.source = r.start.toString();\r\n\t\tedge.target = r.end.toString();\r\n\r\n\t\t// hover tooltip. show all properties in the format <strong>key:</strong> value\r\n\t\tedge.title = '';\r\n\t\tfor (let key in r.properties) {\r\n\t\t\tif (r.properties.hasOwnProperty(key)) {\r\n\t\t\t\tedge['title'] += `<strong>${key}:</strong> ${r.properties[key]}<br>`;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// set relationship thickness\r\n\t\tif (weightKey && typeof weightKey === 'string') {\r\n\t\t\tedge.value = r.properties[weightKey];\r\n\t\t} else if (weightKey && typeof weightKey === 'number') {\r\n\t\t\tedge.value = weightKey;\r\n\t\t} else {\r\n\t\t\tedge.value = 1.0;\r\n\t\t}\r\n\r\n\t\tif (typeof captionKey === 'boolean') {\r\n\t\t\tif (!captionKey) {\r\n\t\t\t\tedge.label = '';\r\n\t\t\t} else {\r\n\t\t\t\tedge.label = r.type;\r\n\t\t\t}\r\n\t\t} else if (captionKey && typeof captionKey === 'string') {\r\n\t\t\tedge.label = r.properties[captionKey] || '';\r\n\t\t} else {\r\n\t\t\tedge.label = r.type;\r\n\t\t}\r\n\r\n\t\treturn edge;\r\n\t}\r\n\r\n\t_consoleLog(message, level = 'log') {\r\n\t\tif (level !== 'log' || this._config.console_debug) {\r\n\t\t\t// eslint-disable-next-line no-console\r\n\t\t\tconsole[level](message);\r\n\t\t}\r\n\t}\r\n\r\n\thideL() {\r\n\t\tthis.instance.hideLoading();\r\n\t}\r\n\r\n\tshowL() {\r\n\t\tthis.instance.showLoading({\r\n\t\t\ttext: '数据获取中',\r\n\t\t\teffect: 'whirling'\r\n\t\t});\r\n\t}\r\n\r\n\tquery(cql) {\r\n\t\t// eslint-disable-next-line no-unused-vars\r\n\t\tlet recordCount = 0;\r\n\t\tlet session = this._driver.session();\r\n\t\tconst dataBuildPromises = [];\r\n\t\tsession\r\n\t\t\t.run(cql, {limit: 30})\r\n\t\t\t.subscribe({\r\n\t\t\t\tonNext: (record) => {\r\n\t\t\t\t\trecordCount++;\r\n\t\t\t\t\tconst dataPromises = Object.values(record.toObject()).map(async (v) => {\r\n\t\t\t\t\t\tif (v instanceof Neo4j.types.Node) {\r\n\t\t\t\t\t\t\tlet node = await this.buildNodeVisObject(v);\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tthis._addNode(node);\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\tthis._consoleLog(e, 'error');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (v instanceof Neo4j.types.Relationship) {\r\n\t\t\t\t\t\t\tlet edge = this.buildEdgeVisObject(v);\r\n\t\t\t\t\t\t\tthis._addEdge(edge);\r\n\r\n\t\t\t\t\t\t} else if (v instanceof Neo4j.types.Path) {\r\n\t\t\t\t\t\t\tlet startNode = await this.buildNodeVisObject(v.start);\r\n\t\t\t\t\t\t\tlet endNode = await this.buildNodeVisObject(v.end);\r\n\r\n\t\t\t\t\t\t\tthis._addNode(startNode);\r\n\t\t\t\t\t\t\tthis._addNode(endNode);\r\n\r\n\t\t\t\t\t\t\tfor (let obj of v.segments) {\r\n\t\t\t\t\t\t\t\tthis._addNode(await this.buildNodeVisObject(obj.start));\r\n\t\t\t\t\t\t\t\tthis._addNode(await this.buildNodeVisObject(obj.end));\r\n\t\t\t\t\t\t\t\tthis._addEdge(this.buildEdgeVisObject(obj.relationship));\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else if (v instanceof Array) {\r\n\t\t\t\t\t\t\tfor (let obj of v) {\r\n\t\t\t\t\t\t\t\tif (obj instanceof Neo4j.types.Node) {\r\n\t\t\t\t\t\t\t\t\tlet node = await this.buildNodeVisObject(obj);\r\n\t\t\t\t\t\t\t\t\tthis._addNode(node);\r\n\r\n\t\t\t\t\t\t\t\t} else if (obj instanceof Neo4j.types.Relationship) {\r\n\t\t\t\t\t\t\t\t\tlet edge = this.buildEdgeVisObject(obj);\r\n\r\n\t\t\t\t\t\t\t\t\tthis._addEdge(edge);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdataBuildPromises.push(Promise.all(dataPromises));\r\n\t\t\t\t},\r\n\t\t\t\tonCompleted: async () => {\r\n\t\t\t\t\tawait Promise.all(dataBuildPromises);\r\n\t\t\t\t\tsession.close();\r\n\t\t\t\t\tthis._consoleLog('开始处理数据');\r\n\t\t\t\t\tvar show_nodes = this.show_nodes;\r\n\t\t\t\t\tvar hide_nodes = this.hide_nodes;\r\n\t\t\t\t\tvar map_nodes = this._nodes;\r\n\t\t\t\t\tvar map_edges = this._edges;\r\n\r\n\t\t\t\t\t//寄存子节点至父节点\r\n\t\t\t\t\tfor (var i in map_edges) {\r\n\t\t\t\t\t\tvar edge = map_edges[i];\r\n\t\t\t\t\t\tvar source = map_nodes[edge.source];\r\n\t\t\t\t\t\tvar target = map_nodes[edge.target];\r\n\r\n\t\t\t\t\t\tvar sub_node_ids = source.sub_node_ids;\r\n\t\t\t\t\t\tif (!sub_node_ids) {\r\n\t\t\t\t\t\t\tsub_node_ids = source.sub_node_ids = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsub_node_ids[target.id] = target.id;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar edges = Object.values(map_edges).map(edge => ({\r\n\t\t\t\t\t\ttarget: edge.target,\r\n\t\t\t\t\t\tsource: edge.source,\r\n\t\t\t\t\t\tlabel: edge.label\r\n\t\t\t\t\t}));\r\n\r\n\t\t\t\t\tvar groups = Object.values(this._groups);\r\n\r\n\t\t\t\t\tvar all_target = edges.map(edge => edge.target);\r\n\r\n\t\t\t\t\tfor (var j in map_nodes) {\r\n\t\t\t\t\t\tvar node = map_nodes[j];\r\n\t\t\t\t\t\t//转换为echarts数据\r\n\t\t\t\t\t\tnode.name = node.label;\r\n\t\t\t\t\t\tnode.value = node.id;\r\n\t\t\t\t\t\tif (node.group) {\r\n\t\t\t\t\t\t\tnode.category = groups.findIndex(group => group.name === node.group);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!all_target.includes(node.id.toString())) {\r\n\t\t\t\t\t\t\tshow_nodes[node.id] = node;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\thide_nodes[node.id] = node;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._consoleLog(show_nodes);\r\n\t\t\t\t\tthis._consoleLog(this.show_nodes);\r\n\r\n\t\t\t\t\tvar op = this.instance.getOption();\r\n\r\n\t\t\t\t\top.legend = [{\r\n\t\t\t\t\t\tdata: groups.map(function (a) {\r\n\t\t\t\t\t\t\treturn a.name;\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}];\r\n\r\n\t\t\t\t\tvar n = Object.values(show_nodes);\r\n\r\n\t\t\t\t\top.series[0].data = n;\r\n\t\t\t\t\top.series[0].edges = edges;\r\n\t\t\t\t\top.series[0].categories = groups;\r\n\t\t\t\t\tthis._consoleLog('数据梳理完成');\r\n\t\t\t\t\tthis._consoleLog(op);\r\n\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// //设置子节点数目\r\n\t\t\t\t\t// var count = nodes => {\r\n\t\t\t\t\t// \tnodes.forEach(node => {\r\n\t\t\t\t\t// \t\tnode.c = 0;\r\n\t\t\t\t\t// \t\tif (node.sub_node_ids) {\r\n\t\t\t\t\t// \t\t\t//获取子节点数目并设置\r\n\t\t\t\t\t// \t\t\treturn node.c += count(node.sub_node_ids);\r\n\t\t\t\t\t// \t\t}\r\n\t\t\t\t\t// \t});\r\n\t\t\t\t\t// };\r\n\t\t\t\t\t//\r\n\t\t\t\t\t// count(n);\r\n\r\n\r\n\t\t\t\t\tthis.instance.setOption(op);\r\n\t\t\t\t\tthis.hideL();\r\n\t\t\t\t},\r\n\t\t\t\tonError: (error) => {\r\n\t\t\t\t\tthis._consoleLog(error, 'error');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\trender(cql) {\r\n\t\tthis._consoleLog('开始查询');\r\n\t\tthis._clear();\r\n\t\tthis.showL();\r\n\t\tthis.query(cql);\r\n\t}\r\n\r\n}"],"sourceRoot":""}